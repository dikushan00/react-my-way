{"ast":null,"code":"import _objectWithoutProperties from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\src\\\\components\\\\Profile\\\\ProfileInfo\\\\ProfilInfo.tsx\",\n    _this3 = this;\n\nimport React from 'react';\nimport s from './ProfileInfo.module.css';\nimport Preloader from '../../common/Preloader/Preloader';\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\nimport { ProfileDataFormRedux } from \"./ProfileDataForm\";\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport { getCroppedImg } from '../../utils/Validators/cropImgFunctions';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAddressBook } from '@fortawesome/free-solid-svg-icons';\nimport { faStickyNote } from '@fortawesome/free-solid-svg-icons';\nimport { faBriefcase } from '@fortawesome/free-solid-svg-icons';\nimport { faCheck } from '@fortawesome/free-solid-svg-icons';\nimport AvatarPhoto from './AvatarPhoto';\n\nvar ProfileInfo = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ProfileInfo, _React$PureComponent);\n\n  function ProfileInfo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProfileInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProfileInfo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      editMode: false,\n      src: null,\n      crop: {\n        unit: '%',\n        width: 30,\n        height: 30,\n        x: 0,\n        y: 0,\n        aspect: 1 / 1\n      },\n      croppedObject: {\n        croppedImageFile: null,\n        croppedImageUrl: ''\n      },\n      isLoadImg: true\n    };\n    _this.inputRef = React.createRef();\n\n    _this.onInputPhoto = function (e) {\n      if (e.target.files.length && e.target.files.length > 0) {\n        _this.setState({\n          isLoadImg: true\n        });\n\n        var reader = new FileReader();\n        reader.addEventListener('load', function () {\n          return _this.setState({\n            src: reader.result\n          });\n        });\n        reader.readAsDataURL(e.target.files[0]);\n      }\n    };\n\n    _this.onImageLoaded = function (image) {\n      _this.imageRef = image;\n    };\n\n    _this.onCropComplete = function (crop, percentCrop) {\n      _this.makeClientCrop(crop);\n    };\n\n    _this.onCropChange = function (crop, percentCrop) {\n      _this.setState({\n        crop: crop\n      });\n    };\n\n    _this.onSubmit = function (data) {\n      _this.props.saveProfile(data).then(function () {\n        _this.setState({\n          editMode: false\n        });\n      });\n    };\n\n    _this.updatePhotoCrop = function () {\n      _this.state.croppedObject.croppedImageFile && _this.props.updatePhoto(_this.state.croppedObject.croppedImageFile);\n\n      _this.setState({\n        isLoadImg: false\n      });\n\n      _this.refreshInputArea();\n    };\n\n    _this.refreshInputArea = function () {\n      _this.setState({\n        src: null,\n        croppedObject: null,\n        isLoadImg: true\n      }); //@ts-ignore\n\n\n      _this.inputRef.current.value = null;\n    };\n\n    return _this;\n  }\n\n  _createClass(ProfileInfo, [{\n    key: \"makeClientCrop\",\n    value: function () {\n      var _makeClientCrop = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(crop) {\n        var croppedObject;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.imageRef && crop.width && crop.height)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 3;\n                return getCroppedImg(this.imageRef, crop, 'newFile.jpeg');\n\n              case 3:\n                croppedObject = _context.sent;\n                //@ts-ignore\n                this.setState({\n                  croppedObject: croppedObject\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function makeClientCrop(_x) {\n        return _makeClientCrop.apply(this, arguments);\n      }\n\n      return makeClientCrop;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          crop = _this$state.crop,\n          src = _this$state.src;\n\n      if (!this.props.profile) {\n        return /*#__PURE__*/React.createElement(Preloader, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 20\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: s.descriptionBlock,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(AvatarPhoto, {\n        avatar: this.props.profile.photos.large,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginLeft: \"20px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 28\n        }\n      }, this.props.profile.fullName || 'unknown user ')), /*#__PURE__*/React.createElement(ProfileStatusWithHooks, {\n        status: this.props.status,\n        updateStatus: this.props.updateStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 25\n        }\n      })), this.props.isOwner && /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        ref: this.inputRef,\n        onChange: this.onInputPhoto,\n        className: s.inputPhoto,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 44\n        }\n      })), src && this.state.isLoadImg && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 48\n        }\n      }, /*#__PURE__*/React.createElement(ReactCrop, {\n        src: src,\n        crop: crop,\n        ruleOfThirds: true,\n        onImageLoaded: this.onImageLoaded,\n        onComplete: this.onCropComplete,\n        onChange: this.onCropChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }\n      }), this.state.croppedObject.croppedImageUrl &&\n      /*#__PURE__*/\n      //@ts-ignore\n      React.createElement(\"img\", {\n        alt: \"Crop\",\n        style: {\n          maxWidth: '100%'\n        },\n        src: this.state.croppedObject.croppedImageUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.updatePhotoCrop();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 17\n        }\n      }, \" Send \")), this.state.editMode //@ts-ignore\n      ?\n      /*#__PURE__*/\n      React.createElement(ProfileDataFormRedux, {\n        initialValues: this.props.profile,\n        profile: this.props.profile,\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(ProfileData, {\n        profile: this.props.profile,\n        onEditMode: function onEditMode() {\n          return _this2.setState({\n            editMode: true\n          });\n        },\n        isOwner: this.props.isOwner,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 23\n        }\n      })));\n    }\n  }]);\n\n  return ProfileInfo;\n}(React.PureComponent);\n\nvar Contact = function Contact(_ref) {\n  var contactTitle = _ref.contactTitle,\n      contactValue = _ref.contactValue;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: s.contact,\n    style: {\n      display: 'flex'\n    },\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: s.infoKey,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 65\n    }\n  }, contactTitle, \":\"), \" \", contactValue);\n};\n\nvar ProfileData = function ProfileData(_ref2) {\n  var profile = _ref2.profile,\n      props = _objectWithoutProperties(_ref2, [\"profile\"]);\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      position: 'relative'\n    },\n    className: s.profileData,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 12\n    }\n  }, props.isOwner && /*#__PURE__*/React.createElement(\"button\", {\n    onClick: props.onEditMode,\n    className: s.editBtn + ' ' + s.btn,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: s.infoKey,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faStickyNote,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }), \"About me:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: s.infoValue,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, profile.aboutMe)), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: s.infoKey,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faCheck,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 17\n    }\n  }), \"Looking for a job:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: s.infoValue,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, profile.lookingForAJob ? 'yes' : 'no')), profile.lookingForAJob && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: s.infoKey,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faBriefcase,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }), \"My work skills:\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: s.infoValue,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, profile.lookingForAJob && profile.lookingForAJobDescription)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: s.infoKey,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, \" \", /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    icon: faAddressBook,\n    __self: _this3,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 42\n    }\n  }), \" Contacts \"), \":\", profile.contacts && Object.keys(profile.contacts).map(function (key) {\n    return profile.contacts[key] && /*#__PURE__*/React.createElement(Contact, {\n      key: key,\n      className: s.infoValue,\n      contactTitle: key,\n      contactValue: profile.contacts[key],\n      __self: _this3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 24\n      }\n    });\n  })));\n};\n\nexport default ProfileInfo;","map":{"version":3,"sources":["C:/Users/dikush/Documents/GitHub/react-my-way/src/components/Profile/ProfileInfo/ProfilInfo.tsx"],"names":["React","s","Preloader","ProfileStatusWithHooks","ProfileDataFormRedux","ReactCrop","getCroppedImg","FontAwesomeIcon","faAddressBook","faStickyNote","faBriefcase","faCheck","AvatarPhoto","ProfileInfo","state","editMode","src","crop","unit","width","height","x","y","aspect","croppedObject","croppedImageFile","croppedImageUrl","isLoadImg","inputRef","createRef","onInputPhoto","e","target","files","length","setState","reader","FileReader","addEventListener","result","readAsDataURL","onImageLoaded","image","imageRef","onCropComplete","percentCrop","makeClientCrop","onCropChange","onSubmit","data","props","saveProfile","then","updatePhotoCrop","updatePhoto","refreshInputArea","current","value","profile","descriptionBlock","display","photos","large","marginLeft","fullName","status","updateStatus","isOwner","inputPhoto","maxWidth","PureComponent","Contact","contactTitle","contactValue","contact","infoKey","ProfileData","position","profileData","onEditMode","editBtn","btn","infoValue","aboutMe","lookingForAJob","lookingForAJobDescription","contacts","Object","keys","map","key"],"mappings":"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","sourcesContent":["import React, { RefObject } from 'react';\r\nimport  s from './ProfileInfo.module.css'\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport {ProfileDataFormRedux} from \"./ProfileDataForm\"\r\nimport { ProfileType, SaveProfileType, ContactsType } from '../../../Types/Types';\r\nimport ReactCrop from 'react-image-crop';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport { getCroppedImg } from '../../utils/Validators/cropImgFunctions';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faAddressBook, faSearch } from '@fortawesome/free-solid-svg-icons'\r\nimport { faStickyNote } from '@fortawesome/free-solid-svg-icons'\r\nimport { faBriefcase } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCheck } from '@fortawesome/free-solid-svg-icons'\r\nimport AvatarPhoto from './AvatarPhoto';\r\n\r\nclass ProfileInfo extends React.PureComponent<PropsType> {\r\n\r\n    state = {\r\n        editMode: false,\r\n        src: null as string | null,\r\n        crop : {\r\n          unit: '%' as \"%\" | \"px\" | undefined,\r\n          width: 30,\r\n          height: 30,\r\n          x: 0,\r\n          y: 0,\r\n          aspect: 1 / 1\r\n        },\r\n        croppedObject: {\r\n            croppedImageFile: null as null | File,\r\n            croppedImageUrl: '',\r\n        },\r\n        isLoadImg: true\r\n    }\r\n\r\n    inputRef = React.createRef();\r\n\r\n    onInputPhoto = (e: any) => {\r\n        if(e.target.files.length && e.target.files.length > 0){\r\n            this.setState({isLoadImg: true})\r\n            const reader = new FileReader();\r\n            reader.addEventListener('load', () =>\r\n                this.setState( { src: reader.result } )\r\n            );\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        }\r\n    }\r\n\r\n    onImageLoaded = (image: HTMLImageElement) => {\r\n        this.imageRef = image;\r\n      };\r\n    \r\n    onCropComplete = (crop: ReactCrop.Crop , percentCrop: ReactCrop.PercentCrop) => {\r\n      this.makeClientCrop(crop);\r\n    };\r\n  \r\n    onCropChange = (crop: ReactCrop.Crop, percentCrop: ReactCrop.PercentCrop) => {\r\n        this.setState({ crop });\r\n      };\r\n    imageRef: any;\r\n    \r\n      async makeClientCrop(crop: ReactCrop.Crop) {\r\n        if (this.imageRef && crop.width && crop.height) {\r\n          const croppedObject = await getCroppedImg(\r\n            this.imageRef,\r\n            crop,\r\n            'newFile.jpeg'\r\n          )\r\n          //@ts-ignore\r\n          \r\n          this.setState({ croppedObject });\r\n        }\r\n      }\r\n    \r\n    onSubmit = (data: SaveProfileType) => {\r\n        this.props.saveProfile(data).then(() => {\r\n            this.setState({editMode: false})\r\n        });\r\n    }\r\n\r\n    updatePhotoCrop = () => {\r\n        this.state.croppedObject.croppedImageFile && this.props.updatePhoto(this.state.croppedObject.croppedImageFile)\r\n        this.setState({isLoadImg: false})\r\n        this.refreshInputArea()\r\n    }\r\n\r\n    refreshInputArea = () => {\r\n      this.setState({\r\n        src: null,\r\n        croppedObject: null,\r\n        isLoadImg: true\r\n      })\r\n      //@ts-ignore\r\n      this.inputRef.current.value = null\r\n    }\r\n        \r\n    render(){\r\n        const { crop, src } = this.state;\r\n\r\n        if (!this.props.profile){\r\n            return <Preloader />\r\n        }\r\n\r\n        return (<div>\r\n            <div className={s.descriptionBlock}>\r\n                <div style={{display:'flex'}}>\r\n                    <AvatarPhoto avatar = {this.props.profile.photos.large}/>\r\n                    <div style={{marginLeft:\"20px\"}}>\r\n                        <p><b>{this.props.profile.fullName || 'unknown user '}</b></p>\r\n                        <ProfileStatusWithHooks status = {this.props.status} updateStatus = {this.props.updateStatus}/>\r\n                    </div>\r\n                    {this.props.isOwner && <input type=\"file\" ref={this.inputRef as RefObject<HTMLInputElement> | null} onChange={this.onInputPhoto} className={s.inputPhoto}/>}\r\n                </div>\r\n\r\n                { \r\n                src && this.state.isLoadImg && <div>\r\n                    <ReactCrop\r\n                        src={src}\r\n                        crop={crop}\r\n                        ruleOfThirds\r\n                        onImageLoaded={this.onImageLoaded}\r\n                        onComplete={this.onCropComplete}\r\n                        onChange={this.onCropChange}\r\n                />\r\n                {   this.state.croppedObject.croppedImageUrl && \r\n                    //@ts-ignore\r\n                    <img alt=\"Crop\" style={{ maxWidth: '100%' }} src={this.state.croppedObject.croppedImageUrl} />\r\n                }\r\n                <button onClick = {() => this.updatePhotoCrop()}> Send </button>\r\n                </div>\r\n                }\r\n                {\r\n                this.state.editMode \r\n                //@ts-ignore\r\n                    ? <ProfileDataFormRedux initialValues = {this.props.profile} profile = {this.props.profile} onSubmit = {this.onSubmit}/>\r\n                    : <ProfileData profile = {this.props.profile} onEditMode = {() => this.setState({editMode: true})} isOwner={this.props.isOwner}/>\r\n                }\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nconst Contact: React.FC<ContactType> = ({contactTitle, contactValue}) => {\r\n    return <div className={s.contact}  style={{display:'flex'}}><span className={s.infoKey}>{contactTitle}:</span> {contactValue}</div>\r\n}\r\n\r\nconst ProfileData: React.FC<ProfileDataType> = ({profile, ...props}) => {\r\n\r\n    return <div style={{position: 'relative'}} className={s.profileData}>\r\n        {props.isOwner && <button onClick = {props.onEditMode} className = {s.editBtn + ' ' + s.btn}/>}\r\n        <div style={{display:'flex'}}>\r\n            <span className={s.infoKey}>\r\n                <FontAwesomeIcon icon={faStickyNote} /> \r\n                About me: \r\n            </span>\r\n            <span className={s.infoValue}>{profile.aboutMe}</span></div>\r\n        <div style={{display:'flex'}}>\r\n            <span className={s.infoKey}>\r\n                <FontAwesomeIcon icon={faCheck} /> \r\n                Looking for a job: \r\n            </span>\r\n            <span className={s.infoValue}>{profile.lookingForAJob ? 'yes' : 'no'}</span>\r\n        </div>\r\n        {profile.lookingForAJob \r\n            && <div style={{display:'flex'}}>\r\n                <span className={s.infoKey}>\r\n                    <FontAwesomeIcon icon={faBriefcase} /> \r\n                    My work skills:\r\n                </span>\r\n                <span className={s.infoValue}>\r\n                {profile.lookingForAJob && profile.lookingForAJobDescription}</span>\r\n            </div>}\r\n        <div>\r\n            <span className={s.infoKey}> <FontAwesomeIcon icon={faAddressBook} /> Contacts </span>: \r\n            {\r\n            profile.contacts && Object\r\n                .keys(profile.contacts)\r\n                .map(key => {\r\n                return profile.contacts[key as keyof ContactsType] \r\n                    && <Contact key={key} \r\n                                className={s.infoValue} \r\n                                contactTitle={key} \r\n                                contactValue={profile.contacts[key as keyof ContactsType]} />\r\n            })\r\n            }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default ProfileInfo;\r\n\r\n\r\ntype ContactType = {\r\n    contactTitle: string\r\n    contactValue: string\r\n    className: string\r\n}\r\n\r\ntype ProfileDataType = {\r\n    profile: ProfileType\r\n    isOwner: boolean\r\n    onEditMode: () => void\r\n}\r\n\r\ntype PropsType = {\r\n    profile: ProfileType | null\r\n    isOwner: boolean\r\n    status: string\r\n\r\n    updatePhoto: (file: File) => void\r\n    saveProfile: (data: SaveProfileType) => Promise<SaveProfileType>\r\n    updateStatus: (data: string) => void\r\n}"]},"metadata":{},"sourceType":"module"}