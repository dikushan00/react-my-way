{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { ProfileAPI, ResultCodeEnum } from \"../api/api\";\nimport { stopSubmit } from \"redux-form\";\nvar id = 0;\nvar initialState = {\n  postsData: [{\n    id: 1,\n    title: \"Hello everyone. it is my first news post!\",\n    photo: '',\n    comments: [{\n      userId: 1,\n      commentId: 1,\n      fullName: 'Башаров Максим',\n      text: \"its awesome!\",\n      photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\n    }, {\n      userId: 2,\n      commentId: 2,\n      fullName: 'Башаров Максим',\n      text: \"How are you?\",\n      photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\n    }],\n    likesCount: 5,\n    CommentsCount: 2,\n    liked: false\n  }, {\n    id: 2,\n    title: \"React makes it painless to create interactive UIs.\",\n    photo: '',\n    comments: [{\n      userId: 1,\n      commentId: 1,\n      fullName: 'Башаров Максим',\n      text: \"its awesome!\",\n      photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\n    }, {\n      userId: 2,\n      commentId: 2,\n      fullName: 'Башаров Максим',\n      text: \"How are you?\",\n      photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\n    }],\n    likesCount: 5,\n    CommentsCount: 2,\n    liked: false\n  }, {\n    id: 3,\n    title: \"Build encapsulated components that manage their own state, then compose them to make complex UIs.\",\n    photo: '',\n    comments: [{\n      userId: 1,\n      commentId: 1,\n      fullName: 'Башаров Максим',\n      text: \"its awesome!\",\n      photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\n    }, {\n      userId: 2,\n      commentId: 2,\n      fullName: 'Башаров Максим',\n      text: \"How are you?\",\n      photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\n    }],\n    likesCount: 5,\n    CommentsCount: 2,\n    liked: false\n  }, {\n    id: 4,\n    title: \"Declarative views make your code more predictable and easier to debug.\",\n    photo: '',\n    comments: [{\n      userId: 1,\n      commentId: 1,\n      fullName: 'Башаров Максим',\n      text: \"its awesome!\",\n      photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\n    }, {\n      userId: 2,\n      commentId: 2,\n      fullName: 'Башаров Максим',\n      text: \"How are you?\",\n      photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\n    }],\n    likesCount: 5,\n    CommentsCount: 2,\n    liked: false\n  }],\n  profile: null,\n  status: '',\n  photos: null\n};\n\nvar profile_reducer = function profile_reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case 'SN/Profile/ADD_NEW_POST':\n      {\n        if (action.newPostText.length > 0) {\n          return _objectSpread({}, state, {\n            postsData: [].concat(_toConsumableArray(state.postsData), [{\n              id: 5,\n              fullName: '',\n              title: action.newPostText,\n              photo: '',\n              avatar: '',\n              comments: [],\n              likesCount: 0,\n              CommentsCount: 0,\n              liked: false\n            }])\n          });\n        }\n\n        return state;\n      }\n\n    case 'SN/Profile/PROFILE_INFO':\n      {\n        return _objectSpread({}, state, {\n          profile: action.profile\n        });\n      }\n\n    case 'SN/Profile/My_PROFILE_INFO':\n      {\n        return _objectSpread({}, state, {\n          profile: _objectSpread({}, action.profile),\n          photos: action.profile.photos\n        });\n      }\n\n    case 'SN/Profile/SET_STATUS':\n      {\n        return _objectSpread({}, state, {\n          status: action.status\n        });\n      }\n\n    case 'SN/Profile/SET_PHOTO':\n      {\n        return _objectSpread({}, state, {\n          profile: _objectSpread({}, state.profile, {\n            photos: action.photoUrl\n          }),\n          photos: action.photoUrl\n        });\n      }\n\n    case 'SN/Profile/ADD_NEW_COMMENT':\n      {\n        if (action.newCommentText.length > 0) {\n          return _objectSpread({}, state, {\n            postsData: state.postsData.map(function (item) {\n              if (item.id === action.id) item.comments = [].concat(_toConsumableArray(item.comments), [{\n                userId: 5,\n                fullName: 'dikushan00',\n                commentId: 5,\n                text: action.newCommentText,\n                photo: ''\n              }]);\n              return item;\n            })\n          });\n          id++;\n        }\n\n        return state;\n      }\n\n    case 'SN/Profile/UPDATE_LIKE_COUNT':\n      {\n        return _objectSpread({}, state, {\n          postsData: state.postsData.map(function (item) {\n            if (item.id === action.id && !item.liked) {\n              item.likesCount = item.likesCount + 1;\n              item.liked = !item.liked;\n            } else if (item.id === action.id && item.liked) {\n              item.likesCount = item.likesCount - 1;\n              item.liked = !item.liked;\n            }\n\n            return item;\n          })\n        });\n      }\n\n    case 'SN/Profile/UPDATE_COMMENT_COUNT':\n      {\n        return _objectSpread({}, state, {\n          postsData: state.postsData.map(function (item) {\n            if (item.id === action.id) item.CommentsCount++;\n            return item;\n          })\n        });\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n};\n\nexport var actions = {\n  addPost: function addPost(newPostText) {\n    return {\n      type: 'SN/Profile/ADD_NEW_POST',\n      newPostText: newPostText\n    };\n  },\n  profileInfo: function profileInfo(profile) {\n    return {\n      type: 'SN/Profile/PROFILE_INFO',\n      profile: profile\n    };\n  },\n  myProfileInfo: function myProfileInfo(profile) {\n    return {\n      type: 'SN/Profile/My_PROFILE_INFO',\n      profile: profile\n    };\n  },\n  setStatus: function setStatus(status) {\n    return {\n      type: 'SN/Profile/SET_STATUS',\n      status: status\n    };\n  },\n  setPhoto: function setPhoto(photoUrl) {\n    return {\n      type: 'SN/Profile/SET_PHOTO',\n      photoUrl: photoUrl\n    };\n  },\n  addNewComment: function addNewComment(id, newCommentText) {\n    return {\n      type: 'SN/Profile/ADD_NEW_COMMENT',\n      id: id,\n      newCommentText: newCommentText\n    };\n  },\n  updateLikeCount: function updateLikeCount(id) {\n    return {\n      type: 'SN/Profile/UPDATE_LIKE_COUNT',\n      id: id\n    };\n  },\n  updateCommentCount: function updateCommentCount(id) {\n    return {\n      type: 'SN/Profile/UPDATE_COMMENT_COUNT',\n      id: id\n    };\n  }\n};\nexport var check_auth = function check_auth(userId) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return ProfileAPI.checkAuth(userId);\n\n            case 2:\n              data = _context.sent;\n              dispatch(actions.profileInfo(data));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var getStatus = function getStatus(userId) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return ProfileAPI.getStatus(userId);\n\n            case 2:\n              data = _context2.sent;\n              dispatch(actions.setStatus(data));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var updateStatus = function updateStatus(status) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return ProfileAPI.updateStatus(status);\n\n            case 2:\n              data = _context3.sent;\n\n              if (data.resultCode === ResultCodeEnum.Success) {\n                dispatch(actions.setStatus(status));\n              }\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\nexport var updatePhoto = function updatePhoto(photo) {\n  return /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return ProfileAPI.updateMainPhoto(photo);\n\n            case 2:\n              data = _context4.sent;\n\n              if (data.resultCode === ResultCodeEnum.Success) {\n                dispatch(actions.setPhoto(data.data.photos));\n              }\n\n            case 4:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};\nexport var saveProfile = function saveProfile(profile) {\n  return /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch, getState) {\n      var userId, response;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              userId = getState().auth.id;\n              _context5.next = 3;\n              return ProfileAPI.saveProfile(profile);\n\n            case 3:\n              response = _context5.sent;\n\n              if (!(response.data.resultCode === ResultCodeEnum.Success)) {\n                _context5.next = 12;\n                break;\n              }\n\n              if (!userId) {\n                _context5.next = 9;\n                break;\n              }\n\n              dispatch(check_auth(userId));\n              _context5.next = 10;\n              break;\n\n            case 9:\n              throw new Error();\n\n            case 10:\n              _context5.next = 14;\n              break;\n\n            case 12:\n              dispatch(stopSubmit(\"editProfileData\", {\n                _error: response.data.messages[0]\n              }));\n              return _context5.abrupt(\"return\", Promise.reject(response.data.messages[0]));\n\n            case 14:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function (_x5, _x6) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n};\nexport var check_auth_me = function check_auth_me() {\n  return /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch, getState) {\n      var myId, data;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              myId = getState().auth.id;\n              _context6.next = 3;\n              return ProfileAPI.checkAuth(myId);\n\n            case 3:\n              data = _context6.sent;\n              dispatch(actions.myProfileInfo(data));\n\n            case 5:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6);\n    }));\n\n    return function (_x7, _x8) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n};\nexport default profile_reducer;","map":{"version":3,"sources":["C:/Users/dikush/Documents/GitHub/react-my-way/src/redux/profile_reducer.ts"],"names":["ProfileAPI","ResultCodeEnum","stopSubmit","id","initialState","postsData","title","photo","comments","userId","commentId","fullName","text","likesCount","CommentsCount","liked","profile","status","photos","profile_reducer","state","action","type","newPostText","length","avatar","photoUrl","newCommentText","map","item","actions","addPost","profileInfo","myProfileInfo","setStatus","setPhoto","addNewComment","updateLikeCount","updateCommentCount","check_auth","dispatch","checkAuth","data","getStatus","updateStatus","resultCode","Success","updatePhoto","updateMainPhoto","saveProfile","getState","auth","response","Error","_error","messages","Promise","reject","check_auth_me","myId"],"mappings":"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","sourcesContent":["import {ProfileAPI, ResultCodeEnum} from \"../api/api\";\r\nimport { stopSubmit, FormAction } from \"redux-form\";\r\nimport {CommentsType, SaveProfileType, ContactsType, ProfileType} from './../Types/Types';\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { ThunkType, InferActionsTypes } from \"./store-redux\";\r\n\r\nlet id = 0\r\n\r\nlet initialState = {\r\n    postsData: [\r\n        {\r\n            id: 1,\r\n            title: \"Hello everyone. it is my first news post!\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: 'Башаров Максим', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: 'Башаров Максим', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 2,\r\n            title: \"React makes it painless to create interactive UIs.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: 'Башаров Максим', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: 'Башаров Максим', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 3,\r\n            title: \"Build encapsulated components that manage their own state, then compose them to make complex UIs.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: 'Башаров Максим', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: 'Башаров Максим', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 4,\r\n            title: \"Declarative views make your code more predictable and easier to debug.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: 'Башаров Максим', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: 'Башаров Максим', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        }\r\n    ] as Array<PostItemType>,\r\n    profile: null as ProfileType | null,\r\n    status: '',\r\n    photos: null as PhotosType | null\r\n}\r\n\r\nexport type ProfileInitialStateType = typeof initialState\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\nlet profile_reducer = (state = initialState, action: ActionsType): ProfileInitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'SN/Profile/ADD_NEW_POST': {\r\n\r\n            if (action.newPostText.length > 0) {\r\n                return {\r\n                    ...state,\r\n                    postsData: [...state.postsData, {\r\n                        id: 5,\r\n                        fullName: '',\r\n                        title: action.newPostText,\r\n                        photo: '',\r\n                        avatar: '',\r\n                        comments: [],\r\n                        likesCount: 0,\r\n                        CommentsCount: 0,\r\n                        liked: false\r\n                    }]\r\n                }\r\n            }\r\n\r\n            return state\r\n\r\n        }\r\n\r\n        case 'SN/Profile/PROFILE_INFO': {\r\n\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n\r\n        case 'SN/Profile/My_PROFILE_INFO': {\r\n\r\n            return {\r\n                ...state,\r\n                profile: {...action.profile},\r\n                photos: action.profile.photos\r\n            }\r\n        }\r\n\r\n        case 'SN/Profile/SET_STATUS': {\r\n\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case 'SN/Profile/SET_PHOTO': {\r\n\r\n            return {\r\n                ...state,\r\n                profile: { ...state.profile, photos: action.photoUrl } as ProfileType,\r\n                photos: action.photoUrl\r\n            }\r\n        }\r\n\r\n        case 'SN/Profile/ADD_NEW_COMMENT': {\r\n            if (action.newCommentText.length > 0){\r\n                return {\r\n                    ...state,\r\n                    postsData: state.postsData.map(item => {\r\n                        if(item.id === action.id)\r\n                            item.comments = [...item.comments, {userId: 5, fullName: 'dikushan00', commentId: 5, text: action.newCommentText, photo: ''}]\r\n                        return item\r\n                    })\r\n                }\r\n                id++;\r\n            }\r\n            return state\r\n        }\r\n\r\n        case 'SN/Profile/UPDATE_LIKE_COUNT': {\r\n            \r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.map(item => {\r\n                    if(item.id === action.id && !item.liked){\r\n                        item.likesCount = item.likesCount + 1\r\n                        item.liked = !item.liked \r\n                    } else if(item.id === action.id && item.liked) {\r\n                        item.likesCount = item.likesCount - 1 \r\n                        item.liked = !item.liked \r\n                    }\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        case 'SN/Profile/UPDATE_COMMENT_COUNT': {\r\n\r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.map(item => {\r\n                    if(item.id === action.id)\r\n                        item.CommentsCount++\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    addPost: (newPostText: string) => ({type: 'SN/Profile/ADD_NEW_POST', newPostText} as const),\r\n    profileInfo: (profile: ProfileType) => ({type: 'SN/Profile/PROFILE_INFO', profile} as const),\r\n    myProfileInfo: (profile: ProfileType) => ({type: 'SN/Profile/My_PROFILE_INFO', profile} as const),\r\n    setStatus: (status: string) => ({type: 'SN/Profile/SET_STATUS', status} as const),\r\n    setPhoto: (photoUrl: PhotosType) => ({type: 'SN/Profile/SET_PHOTO', photoUrl} as const),\r\n    addNewComment: (id: number, newCommentText: string) => ({type: 'SN/Profile/ADD_NEW_COMMENT', id, newCommentText} as const),\r\n    updateLikeCount: (id: number) => ({type: 'SN/Profile/UPDATE_LIKE_COUNT', id} as const),\r\n    updateCommentCount: (id: number) => ({type: 'SN/Profile/UPDATE_COMMENT_COUNT', id} as const)\r\n}\r\n\r\nexport const check_auth = (userId: number): getThunkType => async (dispatch) => {\r\n    const data = await ProfileAPI.checkAuth(userId)\r\n    dispatch(actions.profileInfo(data))\r\n}\r\n\r\nexport const getStatus = (userId: number): getThunkType => async (dispatch) => {\r\n    \r\n    const data = await ProfileAPI.getStatus(userId)\r\n    dispatch(actions.setStatus(data))\r\n}\r\n\r\nexport const updateStatus = (status:string): getThunkType => async (dispatch) => {\r\n    const data = await ProfileAPI.updateStatus(status)\r\n        if (data.resultCode === ResultCodeEnum.Success) {\r\n            dispatch(actions.setStatus(status));\r\n        }\r\n}\r\n\r\nexport const updatePhoto = (photo: File): getThunkType => async (dispatch) => {\r\n    const data = await ProfileAPI.updateMainPhoto(photo)\r\n        if (data.resultCode === ResultCodeEnum.Success) {\r\n            dispatch(actions.setPhoto(data.data.photos));\r\n        }\r\n}\r\n\r\nexport const saveProfile = (profile: SaveProfileType): getThunkType => async (dispatch, getState) => {\r\n    const userId = getState().auth.id;\r\n    const response = await ProfileAPI.saveProfile(profile);\r\n\r\n        if (response.data.resultCode === ResultCodeEnum.Success) {\r\n            if(userId)\r\n                dispatch(check_auth(userId));\r\n            else throw new Error\r\n        } else {\r\n            dispatch(stopSubmit(\"editProfileData\", {_error: response.data.messages[0]}));\r\n            return Promise.reject(response.data.messages[0]);\r\n        }\r\n}\r\n\r\nexport const check_auth_me = (): getThunkType => async (dispatch, getState) => {\r\n    const myId = getState().auth.id;\r\n    const data = await ProfileAPI.checkAuth(myId)\r\n    dispatch(actions.myProfileInfo(data))\r\n}\r\n\r\n\r\nexport default profile_reducer\r\n\r\n\r\nexport type PostItemType = {\r\n    id: number,\r\n    fullName: string,\r\n    title: string,\r\n    avatar: string,\r\n    photo: string,\r\n    comments: Array<CommentsType>\r\n    likesCount: number,\r\n    CommentsCount: number,\r\n    liked: boolean\r\n}\r\n\r\ntype PhotosType = {\r\n    small: string | null\r\n    large: string | null\r\n}\r\n\r\ntype getThunkType = ThunkType<ActionsType | FormAction>\r\n\r\n"]},"metadata":{},"sourceType":"module"}