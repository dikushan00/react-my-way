{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { ProfileAPI } from \"../api/api\";\nimport { stopSubmit } from \"redux-form\";\nvar ADD_NEW_POST = \"ADD-NEW-POST\";\nvar PROFILE_INFO = \"PROFILE_INFO\";\nvar My_PROFILE_INFO = \"My_PROFILE_INFO\";\nvar SET_STATUS = \"SET_STATUS\";\nvar SET_PHOTO = \"SET_PHOTO\";\nvar ADD_NEW_COMMENT = \"ADD_NEW_COMMENT\";\nvar UPDATE_LIKE_COUNT = \"UPDATE_LIKE_COUNT\";\nvar UPDATE_COMMENT_COUNT = \"UPDATE_COMMENT_COUNT\";\nvar id = 3;\nvar initialState = {\n  postsData: [{\n    id: 1,\n    title: \"Hello everyone. it is my first news post!\",\n    photo: '',\n    comments: [{\n      userId: 1,\n      commentId: 1,\n      fullName: 'Башаров Максим',\n      text: \"its awesome!\",\n      photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\n    }, {\n      userId: 2,\n      commentId: 2,\n      fullName: 'Башаров Максим',\n      text: \"How are you?\",\n      photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\n    }],\n    likesCount: 5,\n    CommentsCount: 2,\n    liked: false\n  }, {\n    id: 2,\n    title: \"React makes it painless to create interactive UIs.\",\n    photo: '',\n    comments: [{\n      userId: 1,\n      commentId: 1,\n      fullName: 'Башаров Максим',\n      text: \"its awesome!\",\n      photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\n    }, {\n      userId: 2,\n      commentId: 2,\n      fullName: 'Башаров Максим',\n      text: \"How are you?\",\n      photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\n    }],\n    likesCount: 5,\n    CommentsCount: 2,\n    liked: false\n  }, {\n    id: 3,\n    title: \"Build encapsulated components that manage their own state, then compose them to make complex UIs.\",\n    photo: '',\n    comments: [{\n      userId: 1,\n      commentId: 1,\n      fullName: 'Башаров Максим',\n      text: \"its awesome!\",\n      photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\n    }, {\n      userId: 2,\n      commentId: 2,\n      fullName: 'Башаров Максим',\n      text: \"How are you?\",\n      photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\n    }],\n    likesCount: 5,\n    CommentsCount: 2,\n    liked: false\n  }, {\n    id: 4,\n    title: \"Declarative views make your code more predictable and easier to debug.\",\n    photo: '',\n    comments: [{\n      userId: 1,\n      commentId: 1,\n      fullName: 'Башаров Максим',\n      text: \"its awesome!\",\n      photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\n    }, {\n      userId: 2,\n      commentId: 2,\n      fullName: 'Башаров Максим',\n      text: \"How are you?\",\n      photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\n    }],\n    likesCount: 5,\n    CommentsCount: 2,\n    liked: false\n  }],\n  profile: {\n    fullName: ''\n  },\n  status: '',\n  photos: {\n    small: '',\n    large: ''\n  }\n};\n\nvar profile_reducer = function profile_reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_NEW_POST:\n      {\n        if (action.newPostText.length > 0) {\n          return _objectSpread({}, state, {\n            postsData: [].concat(_toConsumableArray(state.postsData), [{\n              id: 5,\n              title: action.newPostText,\n              photo: '',\n              comments: [],\n              likesCount: 2,\n              CommentsCount: 0,\n              liked: false\n            }])\n          });\n        }\n\n        return state;\n      }\n\n    case PROFILE_INFO:\n      {\n        return _objectSpread({}, state, {\n          profile: action.profile\n        });\n      }\n\n    case My_PROFILE_INFO:\n      {\n        return _objectSpread({}, state, {\n          profile: action.profile,\n          photos: action.profile.photos\n        });\n      }\n\n    case SET_STATUS:\n      {\n        return _objectSpread({}, state, {\n          status: action.status\n        });\n      }\n\n    case SET_PHOTO:\n      {\n        return _objectSpread({}, state, {\n          profile: _objectSpread({}, state.profile, {\n            photos: action.photoUrl\n          }),\n          photos: action.photoUrl\n        });\n      }\n\n    case ADD_NEW_COMMENT:\n      {\n        if (action.newCommentText.length > 0) {\n          return _objectSpread({}, state, {\n            postsData: state.postsData.map(function (item) {\n              if (item.id === action.id) item.comments = [].concat(_toConsumableArray(item.comments), [{\n                userId: 5,\n                fullName: 'dikushan00',\n                commentId: 5,\n                text: action.newCommentText\n              }]);\n              return item;\n            })\n          });\n          id++;\n        }\n\n        return state;\n      }\n\n    case UPDATE_LIKE_COUNT:\n      {\n        return _objectSpread({}, state, {\n          postsData: state.postsData.map(function (item) {\n            if (item.id === action.id && !item.liked) {\n              item.likesCount = item.likesCount + 1;\n              item.liked = !item.liked;\n            } else if (item.id === action.id && item.liked) {\n              item.likesCount = item.likesCount - 1;\n              item.liked = !item.liked;\n            }\n\n            return item;\n          })\n        });\n      }\n\n    case UPDATE_COMMENT_COUNT:\n      {\n        return _objectSpread({}, state, {\n          postsData: state.postsData.map(function (item) {\n            if (item.id === action.id) item.CommentsCount++;\n            return item;\n          })\n        });\n      }\n\n    default:\n      {\n        return state;\n      }\n  }\n};\n\nexport var addPost = function addPost(newPostText) {\n  return {\n    type: ADD_NEW_POST,\n    newPostText: newPostText\n  };\n};\nexport var profileInfo = function profileInfo(profile) {\n  return {\n    type: PROFILE_INFO,\n    profile: profile\n  };\n};\nexport var myProfileInfo = function myProfileInfo(profile) {\n  return {\n    type: My_PROFILE_INFO,\n    profile: profile\n  };\n};\nexport var setStatus = function setStatus(status) {\n  return {\n    type: SET_STATUS,\n    status: status\n  };\n};\nexport var setPhoto = function setPhoto(photoUrl) {\n  return {\n    type: SET_PHOTO,\n    photoUrl: photoUrl\n  };\n};\nexport var addNewComment = function addNewComment(id, newCommentText) {\n  return {\n    type: ADD_NEW_COMMENT,\n    id: id,\n    newCommentText: newCommentText\n  };\n};\nexport var updateLikeCount = function updateLikeCount(id) {\n  return {\n    type: UPDATE_LIKE_COUNT,\n    id: id\n  };\n};\nexport var updateCommentCount = function updateCommentCount(id) {\n  return {\n    type: UPDATE_COMMENT_COUNT,\n    id: id\n  };\n};\nexport var check_auth = function check_auth(userId) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch, getState) {\n      var data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return ProfileAPI.checkAuth(userId);\n\n            case 2:\n              data = _context.sent;\n              dispatch(profileInfo(data));\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var getStatus = function getStatus(userId) {\n  return function (dispatch) {\n    ProfileAPI.getStatus(userId).then(function (data) {\n      dispatch(setStatus(data));\n    });\n  };\n};\nexport var updateStatus = function updateStatus(status) {\n  return function (dispatch) {\n    ProfileAPI.updateStatus(status).then(function (data) {\n      if (data.resultCode === 0) {\n        dispatch(setStatus(status));\n      }\n    });\n  };\n};\nexport var updatePhoto = function updatePhoto(photo) {\n  return function (dispatch) {\n    ProfileAPI.updateMainPhoto(photo).then(function (data) {\n      if (data.resultCode === 0) {\n        dispatch(setPhoto(data.data.photos));\n      }\n    });\n  };\n};\nexport var saveProfile = function saveProfile(profile) {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n      var userId, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              userId = getState().auth.id;\n              _context2.next = 3;\n              return ProfileAPI.saveProfile(profile);\n\n            case 3:\n              response = _context2.sent;\n\n              if (!(response.data.resultCode === 0)) {\n                _context2.next = 8;\n                break;\n              }\n\n              dispatch(check_auth(userId));\n              _context2.next = 10;\n              break;\n\n            case 8:\n              dispatch(stopSubmit(\"editProfileData\", {\n                _error: response.data.messages[0]\n              }));\n              return _context2.abrupt(\"return\", Promise.reject(response.data.messages[0]));\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x3, _x4) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var check_auth_me = function check_auth_me() {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch, getState) {\n      var myId, data;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              myId = getState().auth.id;\n              _context3.next = 3;\n              return ProfileAPI.checkAuth(myId);\n\n            case 3:\n              data = _context3.sent;\n              dispatch(myProfileInfo(data));\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x5, _x6) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\nexport default profile_reducer;","map":{"version":3,"sources":["C:/Users/dikush/Documents/GitHub/react-my-way/src/redux/profile_reducer.js"],"names":["ProfileAPI","stopSubmit","ADD_NEW_POST","PROFILE_INFO","My_PROFILE_INFO","SET_STATUS","SET_PHOTO","ADD_NEW_COMMENT","UPDATE_LIKE_COUNT","UPDATE_COMMENT_COUNT","id","initialState","postsData","title","photo","comments","userId","commentId","fullName","text","likesCount","CommentsCount","liked","profile","status","photos","small","large","profile_reducer","state","action","type","newPostText","length","photoUrl","newCommentText","map","item","addPost","profileInfo","myProfileInfo","setStatus","setPhoto","addNewComment","updateLikeCount","updateCommentCount","check_auth","dispatch","getState","checkAuth","data","getStatus","then","updateStatus","resultCode","updatePhoto","updateMainPhoto","saveProfile","auth","response","_error","messages","Promise","reject","check_auth_me","myId"],"mappings":"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","sourcesContent":["import {ProfileAPI} from \"../api/api\";\r\nimport { stopSubmit } from \"redux-form\";\r\n\r\nconst ADD_NEW_POST = \"ADD-NEW-POST\";\r\nconst PROFILE_INFO = \"PROFILE_INFO\";\r\nconst My_PROFILE_INFO = \"My_PROFILE_INFO\";\r\nconst SET_STATUS = \"SET_STATUS\";\r\nconst SET_PHOTO = \"SET_PHOTO\";\r\nconst ADD_NEW_COMMENT = \"ADD_NEW_COMMENT\";\r\nconst UPDATE_LIKE_COUNT = \"UPDATE_LIKE_COUNT\";\r\nconst UPDATE_COMMENT_COUNT = \"UPDATE_COMMENT_COUNT\";\r\nlet id = 3;\r\n\r\nlet initialState = {\r\n    postsData: [\r\n        {\r\n            id: 1,\r\n            title: \"Hello everyone. it is my first news post!\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: 'Башаров Максим', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: 'Башаров Максим', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 2,\r\n            title: \"React makes it painless to create interactive UIs.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: 'Башаров Максим', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: 'Башаров Максим', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 3,\r\n            title: \"Build encapsulated components that manage their own state, then compose them to make complex UIs.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: 'Башаров Максим', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: 'Башаров Максим', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 4,\r\n            title: \"Declarative views make your code more predictable and easier to debug.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: 'Башаров Максим', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: 'Башаров Максим', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        }\r\n    ],\r\n    profile: {\r\n        fullName: ''\r\n    },\r\n    status: '',\r\n    photos: {\r\n        small: '',\r\n        large: ''\r\n    }\r\n}\r\n\r\nlet profile_reducer = (state = initialState, action) => {\r\n\r\n    switch (action.type) {\r\n\r\n        case ADD_NEW_POST: {\r\n\r\n            if (action.newPostText.length > 0) {\r\n                return {\r\n                    ...state,\r\n                    postsData: [...state.postsData, {\r\n                        id: 5,\r\n                        title: action.newPostText,\r\n                        photo: '',\r\n                        comments: [],\r\n                        likesCount: 2,\r\n                        CommentsCount: 0,\r\n                        liked: false\r\n                    }]\r\n                }\r\n            }\r\n\r\n            return state\r\n\r\n        }\r\n\r\n        case PROFILE_INFO: {\r\n\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n\r\n        case My_PROFILE_INFO: {\r\n\r\n            return {\r\n                ...state,\r\n                profile: action.profile,\r\n                photos: action.profile.photos\r\n            }\r\n        }\r\n\r\n        case SET_STATUS: {\r\n\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case SET_PHOTO: {\r\n\r\n            return {\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photoUrl },\r\n                photos: action.photoUrl\r\n            }\r\n        }\r\n\r\n        case ADD_NEW_COMMENT: {\r\n            if (action.newCommentText.length > 0){\r\n                return {\r\n                    ...state,\r\n                    postsData: state.postsData.map(item => {\r\n                        if(item.id === action.id)\r\n                            item.comments = [...item.comments, {userId: 5, fullName: 'dikushan00', commentId: 5, text: action.newCommentText}]\r\n                        return item\r\n                    })\r\n                }\r\n                id++;\r\n            }\r\n            return state\r\n        }\r\n\r\n        case UPDATE_LIKE_COUNT: {\r\n            \r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.map(item => {\r\n                    if(item.id === action.id && !item.liked){\r\n                        item.likesCount = item.likesCount + 1\r\n                        item.liked = !item.liked \r\n                    } else if(item.id === action.id && item.liked) {\r\n                        item.likesCount = item.likesCount - 1 \r\n                        item.liked = !item.liked \r\n                    }\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        case UPDATE_COMMENT_COUNT: {\r\n\r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.map(item => {\r\n                    if(item.id === action.id)\r\n                        item.CommentsCount++\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport const addPost = (newPostText) => ({type: ADD_NEW_POST, newPostText});\r\nexport const profileInfo = (profile) => ({type: PROFILE_INFO, profile});\r\nexport const myProfileInfo = (profile) => ({type: My_PROFILE_INFO, profile});\r\nexport const setStatus = (status) => ({type: SET_STATUS, status});\r\nexport const setPhoto = (photoUrl) => ({type: SET_PHOTO, photoUrl});\r\nexport const addNewComment = (id, newCommentText) => ({type: ADD_NEW_COMMENT, id, newCommentText})\r\nexport const updateLikeCount = (id) => ({type: UPDATE_LIKE_COUNT, id})\r\nexport const updateCommentCount = (id) => ({type: UPDATE_COMMENT_COUNT, id})\r\n\r\n\r\nexport const check_auth = (userId) => async (dispatch, getState) => {\r\n    const data = await ProfileAPI.checkAuth(userId)\r\n    dispatch(profileInfo(data))\r\n}\r\n\r\nexport const getStatus = (userId) => (dispatch) => {\r\n    ProfileAPI.getStatus(userId).then((data) => {\r\n        dispatch(setStatus(data))\r\n    })\r\n}\r\n\r\nexport const updateStatus = (status) => (dispatch) => {\r\n    ProfileAPI.updateStatus(status).then((data) => {\r\n        if (data.resultCode === 0) {\r\n            dispatch(setStatus(status));\r\n        }\r\n    })\r\n}\r\n\r\nexport const updatePhoto = (photo) => (dispatch) => {\r\n    ProfileAPI.updateMainPhoto(photo).then((data) => {\r\n        if (data.resultCode === 0) {\r\n            dispatch(setPhoto(data.data.photos));\r\n        }\r\n    })\r\n}\r\n\r\nexport const saveProfile = (profile) => async (dispatch, getState) => {\r\n    const userId = getState().auth.id;\r\n    const response = await ProfileAPI.saveProfile(profile);\r\n\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(check_auth(userId));\r\n        } else {\r\n            dispatch(stopSubmit(\"editProfileData\", {_error: response.data.messages[0]}));\r\n            return Promise.reject(response.data.messages[0]);\r\n        }\r\n}\r\n\r\nexport const check_auth_me = () => async (dispatch, getState) => {\r\n    const myId = getState().auth.id;\r\n    const data = await ProfileAPI.checkAuth(myId)\r\n    dispatch(myProfileInfo(data))\r\n}\r\n\r\n\r\nexport default profile_reducer"]},"metadata":{},"sourceType":"module"}