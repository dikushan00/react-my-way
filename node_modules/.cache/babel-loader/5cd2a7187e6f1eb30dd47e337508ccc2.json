{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\src\\\\components\\\\Profile\\\\ProfileInfo\\\\ProfilInfo.tsx\";\nimport React from 'react';\nimport s from './ProfileInfo.module.css';\nimport Preloader from '../../common/Preloader/Preloader';\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\nimport { ProfileDataFormRedux } from \"./ProfileDataForm\";\nimport ReactCrop from 'react-image-crop';\nimport 'react-image-crop/dist/ReactCrop.css';\nimport { getCroppedImg } from '../../utils/Validators/cropImgFunctions';\nimport AvatarPhoto from './AvatarPhoto';\nimport ProfileData from './ProfileData';\n\nvar ProfileInfo = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(ProfileInfo, _React$PureComponent);\n\n  function ProfileInfo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProfileInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProfileInfo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      editMode: false,\n      src: null,\n      isLoadImg: true,\n      crop: {\n        unit: '%',\n        width: 30,\n        height: 30,\n        x: 0,\n        y: 0,\n        aspect: 1 / 1\n      },\n      croppedObject: {\n        croppedImageFile: null,\n        croppedImageUrl: ''\n      }\n    };\n    _this.inputRef = React.createRef();\n\n    _this.onInputPhoto = function (e) {\n      if (e.target.files.length && e.target.files.length > 0) {\n        _this.setState({\n          isLoadImg: true\n        });\n\n        var reader = new FileReader();\n        reader.addEventListener('load', function () {\n          return _this.setState({\n            src: reader.result\n          });\n        });\n        reader.readAsDataURL(e.target.files[0]);\n      }\n    };\n\n    _this.onImageLoaded = function (image) {\n      _this.imageRef = image;\n    };\n\n    _this.onCropComplete = function (crop, percentCrop) {\n      _this.makeClientCrop(crop);\n    };\n\n    _this.onCropChange = function (crop, percentCrop) {\n      _this.setState({\n        crop: crop\n      });\n    };\n\n    _this.onSubmit = function (data) {\n      _this.props.saveProfile(data).then(function () {\n        _this.setState({\n          editMode: false\n        });\n      });\n    };\n\n    _this.updatePhotoCrop = function () {\n      _this.state.croppedObject.croppedImageFile && _this.props.updatePhoto(_this.state.croppedObject.croppedImageFile);\n\n      _this.setState({\n        isLoadImg: false\n      });\n\n      _this.refreshInputArea();\n    };\n\n    _this.refreshInputArea = function () {\n      _this.setState({\n        src: null,\n        croppedObject: null,\n        isLoadImg: true\n      }); //@ts-ignore\n\n\n      _this.inputRef.current.value = null;\n    };\n\n    return _this;\n  }\n\n  _createClass(ProfileInfo, [{\n    key: \"makeClientCrop\",\n    value: function () {\n      var _makeClientCrop = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(crop) {\n        var croppedObject;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(this.imageRef && crop.width && crop.height)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 3;\n                return getCroppedImg(this.imageRef, crop, 'newFile.jpeg');\n\n              case 3:\n                croppedObject = _context.sent;\n                //@ts-ignore\n                this.setState({\n                  croppedObject: croppedObject\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function makeClientCrop(_x) {\n        return _makeClientCrop.apply(this, arguments);\n      }\n\n      return makeClientCrop;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          crop = _this$state.crop,\n          src = _this$state.src;\n\n      if (!this.props.profile) {\n        return /*#__PURE__*/React.createElement(Preloader, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 20\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: s.descriptionBlock,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          display: 'flex'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(AvatarPhoto, {\n        avatar: this.props.profile.photos.large,\n        fullName: this.props.profile.fullName,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          marginLeft: \"20px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 28\n        }\n      }, this.props.profile.fullName || 'unknown user ')), /*#__PURE__*/React.createElement(ProfileStatusWithHooks, {\n        status: this.props.status,\n        updateStatus: this.props.updateStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }\n      })), this.props.isOwner && /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        ref: this.inputRef,\n        onChange: this.onInputPhoto,\n        className: s.inputPhoto,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 44\n        }\n      })), src && this.state.isLoadImg && /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 48\n        }\n      }, /*#__PURE__*/React.createElement(ReactCrop, {\n        src: src,\n        crop: crop,\n        ruleOfThirds: true,\n        onImageLoaded: this.onImageLoaded,\n        onComplete: this.onCropComplete,\n        onChange: this.onCropChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }\n      }), this.state.croppedObject.croppedImageUrl &&\n      /*#__PURE__*/\n      //@ts-ignore\n      React.createElement(\"img\", {\n        alt: \"Crop\",\n        style: {\n          maxWidth: '100%'\n        },\n        src: this.state.croppedObject.croppedImageUrl,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.updatePhotoCrop();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }\n      }, \" Send \")), this.state.editMode //@ts-ignore\n      ?\n      /*#__PURE__*/\n      React.createElement(ProfileDataFormRedux, {\n        initialValues: this.props.profile,\n        profile: this.props.profile,\n        onSubmit: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 23\n        }\n      }) : /*#__PURE__*/React.createElement(ProfileData, {\n        profile: this.props.profile,\n        onEditMode: function onEditMode() {\n          return _this2.setState({\n            editMode: true\n          });\n        },\n        isOwner: this.props.isOwner,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 23\n        }\n      })));\n    }\n  }]);\n\n  return ProfileInfo;\n}(React.PureComponent);\n\nexport default ProfileInfo;","map":{"version":3,"sources":["C:/Users/dikush/Documents/GitHub/react-my-way/src/components/Profile/ProfileInfo/ProfilInfo.tsx"],"names":["React","s","Preloader","ProfileStatusWithHooks","ProfileDataFormRedux","ReactCrop","getCroppedImg","AvatarPhoto","ProfileData","ProfileInfo","state","editMode","src","isLoadImg","crop","unit","width","height","x","y","aspect","croppedObject","croppedImageFile","croppedImageUrl","inputRef","createRef","onInputPhoto","e","target","files","length","setState","reader","FileReader","addEventListener","result","readAsDataURL","onImageLoaded","image","imageRef","onCropComplete","percentCrop","makeClientCrop","onCropChange","onSubmit","data","props","saveProfile","then","updatePhotoCrop","updatePhoto","refreshInputArea","current","value","profile","descriptionBlock","display","photos","large","fullName","marginLeft","status","updateStatus","isOwner","inputPhoto","maxWidth","PureComponent"],"mappings":"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","sourcesContent":["import React, { RefObject } from 'react';\r\nimport  s from './ProfileInfo.module.css'\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport {ProfileDataFormRedux} from \"./ProfileDataForm\"\r\nimport { ProfileType, SaveProfileType, ContactsType } from '../../../Types/Types';\r\nimport ReactCrop from 'react-image-crop';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport { getCroppedImg } from '../../utils/Validators/cropImgFunctions';\r\nimport AvatarPhoto from './AvatarPhoto';\r\nimport ProfileData from './ProfileData';\r\n\r\nclass ProfileInfo extends React.PureComponent<PropsType> {\r\n\r\n    state = {\r\n        editMode: false,\r\n        src: null as string | null,\r\n        isLoadImg: true,\r\n        crop : {\r\n          unit: '%' as \"%\" | \"px\" | undefined,\r\n          width: 30,\r\n          height: 30,\r\n          x: 0,\r\n          y: 0,\r\n          aspect: 1 / 1\r\n        },\r\n        croppedObject: {\r\n            croppedImageFile: null as null | File,\r\n            croppedImageUrl: '',\r\n        }\r\n    }\r\n\r\n    inputRef = React.createRef();\r\n\r\n    onInputPhoto = (e: any) => {\r\n        if(e.target.files.length && e.target.files.length > 0){\r\n            this.setState({isLoadImg: true})\r\n            const reader = new FileReader();\r\n            reader.addEventListener('load', () =>\r\n                this.setState( { src: reader.result } )\r\n            );\r\n            reader.readAsDataURL(e.target.files[0]);\r\n        }\r\n    }\r\n\r\n    onImageLoaded = (image: HTMLImageElement) => {\r\n        this.imageRef = image;\r\n      };\r\n    \r\n    onCropComplete = (crop: ReactCrop.Crop , percentCrop: ReactCrop.PercentCrop) => {\r\n      this.makeClientCrop(crop);\r\n    };\r\n  \r\n    onCropChange = (crop: ReactCrop.Crop, percentCrop: ReactCrop.PercentCrop) => {\r\n        this.setState({ crop });\r\n      };\r\n    imageRef: any;\r\n    \r\n      async makeClientCrop(crop: ReactCrop.Crop) {\r\n        if (this.imageRef && crop.width && crop.height) {\r\n          const croppedObject = await getCroppedImg(\r\n            this.imageRef,\r\n            crop,\r\n            'newFile.jpeg'\r\n          )\r\n          //@ts-ignore\r\n          \r\n          this.setState({ croppedObject });\r\n        }\r\n      }\r\n    \r\n    onSubmit = (data: SaveProfileType) => {\r\n        this.props.saveProfile(data).then(() => {\r\n            this.setState({editMode: false})\r\n        });\r\n    }\r\n\r\n    updatePhotoCrop = () => {\r\n        this.state.croppedObject.croppedImageFile && this.props.updatePhoto(this.state.croppedObject.croppedImageFile)\r\n        this.setState({isLoadImg: false})\r\n        this.refreshInputArea()\r\n    }\r\n\r\n    refreshInputArea = () => {\r\n      this.setState({\r\n        src: null,\r\n        croppedObject: null,\r\n        isLoadImg: true\r\n      })\r\n      //@ts-ignore\r\n      this.inputRef.current.value = null\r\n    }\r\n        \r\n    render(){\r\n        const { crop, src } = this.state;\r\n\r\n        if (!this.props.profile){\r\n            return <Preloader />\r\n        }\r\n\r\n        return (<div>\r\n            <div className={s.descriptionBlock}>\r\n                <div style={{display:'flex'}}>\r\n                    <AvatarPhoto avatar = {this.props.profile.photos.large} fullName = {this.props.profile.fullName}/>\r\n                    <div style={{marginLeft:\"20px\"}}>\r\n                        <p><b>{this.props.profile.fullName || 'unknown user '}</b></p>\r\n                        <ProfileStatusWithHooks status = {this.props.status} updateStatus = {this.props.updateStatus}/>\r\n                    </div>\r\n                    {this.props.isOwner && <input type=\"file\" ref={this.inputRef as RefObject<HTMLInputElement> | null} onChange={this.onInputPhoto} className={s.inputPhoto}/>}\r\n                </div>\r\n\r\n                { \r\n                src && this.state.isLoadImg && <div>\r\n                    <ReactCrop\r\n                        src={src}\r\n                        crop={crop}\r\n                        ruleOfThirds\r\n                        onImageLoaded={this.onImageLoaded}\r\n                        onComplete={this.onCropComplete}\r\n                        onChange={this.onCropChange}\r\n                />\r\n                {   this.state.croppedObject.croppedImageUrl && \r\n                    //@ts-ignore\r\n                    <img alt=\"Crop\" style={{ maxWidth: '100%' }} src={this.state.croppedObject.croppedImageUrl} />\r\n                }\r\n                <button onClick = {() => this.updatePhotoCrop()}> Send </button>\r\n                </div>\r\n                }\r\n                {\r\n                this.state.editMode \r\n                //@ts-ignore\r\n                    ? <ProfileDataFormRedux initialValues = {this.props.profile} profile = {this.props.profile} onSubmit = {this.onSubmit}/>\r\n                    : <ProfileData profile = {this.props.profile} onEditMode = {() => this.setState({editMode: true})} isOwner={this.props.isOwner}/>\r\n                }\r\n            </div>\r\n        </div>);\r\n    }\r\n}\r\n\r\nexport default ProfileInfo;\r\n\r\n\r\ntype PropsType = {\r\n    profile: ProfileType | null\r\n    isOwner: boolean\r\n    status: string\r\n\r\n    updatePhoto: (file: File) => void\r\n    saveProfile: (data: SaveProfileType) => Promise<SaveProfileType>\r\n    updateStatus: (data: string) => void\r\n}"]},"metadata":{},"sourceType":"module"}