{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\src\\\\components\\\\Profile\\\\ProfileInfo\\\\ProfilInfo.tsx\";\n\nimport React, { useState } from 'react';\nimport s from './ProfileInfo.module.css';\nimport Preloader from '../../common/Preloader/Preloader';\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\nimport { ProfileDataFormRedux } from \"./ProfileDataForm\";\nimport 'react-image-crop/dist/ReactCrop.css';\nimport AvatarPhoto from './AvatarPhoto';\nimport ProfileData from './ProfileData';\nimport photoUser from \"../../../img/user.svg\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { saveProfile, updatePhoto } from './../../../redux/profile_reducer';\nimport { follow, unfollow } from '../../../redux/users_reducer';\n\nvar ProfileInfo = function ProfileInfo(props) {\n  var dispatch = useDispatch();\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      editMode = _useState2[0],\n      setEditMode = _useState2[1];\n\n  var isFetching = useSelector(function (state) {\n    return state.profilePage.isFetching;\n  });\n  var profile = useSelector(function (state) {\n    return state.profilePage.profile;\n  });\n  var friends = useSelector(function (state) {\n    return state.usersPage.friends;\n  });\n\n  var onSubmit = function onSubmit(data) {\n    dispatch(saveProfile(data));\n    setEditMode(false);\n  };\n\n  if (!profile || isFetching) {\n    return /*#__PURE__*/React.createElement(Preloader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 20\n      }\n    });\n  }\n\n  var switch_follow = function switch_follow(followed, userId) {\n    if (followed) {\n      dispatch(unfollow(userId));\n    } else {\n      dispatch(follow(userId));\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: s.descriptionBlock,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 17\n    }\n  }, props.isOwner ? /*#__PURE__*/React.createElement(AvatarPhoto, {\n    avatar: profile.photos.large,\n    fullName: profile.fullName,\n    isOwner: props.isOwner,\n    updatePhoto: updatePhoto,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 31\n    }\n  }) //@ts-ignore\n  :\n  /*#__PURE__*/\n  React.createElement(\"img\", {\n    src: profile.photos.large ? profile.photos.large : photoUser,\n    className: s.avaImg,\n    alt: \"PHOTO\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: \"20px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 28\n    }\n  }, profile.fullName || 'unknown user ')), /*#__PURE__*/React.createElement(ProfileStatusWithHooks, {\n    status: status,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }\n  }))), editMode //@ts-ignore\n  ?\n  /*#__PURE__*/\n  React.createElement(ProfileDataFormRedux, {\n    initialValues: profile,\n    profile: profile,\n    onSubmit: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(ProfileData, {\n    profile: profile,\n    onEditMode: function onEditMode() {\n      return setEditMode(true);\n    },\n    isOwner: props.isOwner,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 23\n    }\n  }), !props.isOwner && friends.some(function (item) {\n    return profile && item.id === profile.userId;\n  }) ? /*#__PURE__*/React.createElement(\"button\", {\n    className: s.btnFollow + ' ' + s.btnRed,\n    onClick: function onClick() {\n      return switch_follow(true, profile && profile.userId);\n    },\n    disabled: toggleProgressArr.some(function (id) {\n      return profile && id === profile.userId;\n    }),\n    key: profile.userId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 27\n    }\n  }, \" Unfollow\") : !props.isOwner && /*#__PURE__*/React.createElement(\"button\", {\n    className: s.btnFollow + ' ' + s.btnBlue,\n    onClick: function onClick() {\n      return switch_follow(false, profile && profile.userId);\n    },\n    disabled: toggleProgressArr.some(function (id) {\n      return profile && id === profile.userId;\n    }),\n    key: profile.userId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 45\n    }\n  }, \" Follow\")));\n};\n\nexport default ProfileInfo;","map":{"version":3,"sources":["C:/Users/dikush/Documents/GitHub/react-my-way/src/components/Profile/ProfileInfo/ProfilInfo.tsx"],"names":["React","useState","s","Preloader","ProfileStatusWithHooks","ProfileDataFormRedux","AvatarPhoto","ProfileData","useDispatch","useSelector","saveProfile","updatePhoto","follow","unfollow","ProfileInfo","props","dispatch","editMode","setEditMode","isFetching","state","profilePage","profile","friends","usersPage","onSubmit","data","switch_follow","followed","userId","descriptionBlock","display","isOwner","photos","large","fullName","photoUser","avaImg","marginLeft","status","some","item","id","btnFollow","btnRed","toggleProgressArr","btnBlue"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport  s from './ProfileInfo.module.css'\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport {ProfileDataFormRedux} from \"./ProfileDataForm\"\r\nimport {SaveProfileType} from '../../../Types/Types';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport AvatarPhoto from './AvatarPhoto';\r\nimport ProfileData from './ProfileData';\r\nimport photoUser from '../../../img/user.svg'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../../redux/store-redux';\r\nimport { saveProfile, updatePhoto, updateStatus } from './../../../redux/profile_reducer';\r\nimport { follow, unfollow } from '../../../redux/users_reducer';\r\n\r\nconst ProfileInfo:React.FC<PropsType> = (props) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const [editMode, setEditMode] = useState(false)\r\n    const isFetching = useSelector((state: AppStateType) => state.profilePage.isFetching)\r\n    const profile = useSelector((state: AppStateType) => state.profilePage.profile)\r\n    const friends = useSelector((state: AppStateType) => state.usersPage.friends)\r\n    \r\n    const onSubmit = (data: SaveProfileType) => {\r\n        dispatch(saveProfile(data))\r\n        setEditMode(false)\r\n    }\r\n        if (!profile || isFetching){\r\n            return <Preloader />\r\n        }\r\n\r\n    const switch_follow = (followed: boolean, userId: number | null) => {\r\n        if (followed) {\r\n            dispatch(unfollow(userId))\r\n        } else {\r\n            dispatch(follow(userId))\r\n        }\r\n    }\r\n\r\n        return (<div>\r\n            <div className={s.descriptionBlock}>\r\n                <div style={{display:'flex'}}>\r\n                    {\r\n                        props.isOwner \r\n                            ? <AvatarPhoto \r\n                                avatar = {profile.photos.large} \r\n                                fullName = {profile.fullName} \r\n                                isOwner = {props.isOwner}\r\n                                updatePhoto = {updatePhoto}/>\r\n                                //@ts-ignore\r\n                            : <img src = {profile.photos.large ? profile.photos.large : photoUser} className = {s.avaImg} alt=\"PHOTO\"/>\r\n                    }\r\n                    <div style={{marginLeft:\"20px\"}}>\r\n                        <p><b>{profile.fullName || 'unknown user '}</b></p>\r\n                        <ProfileStatusWithHooks status = {status} />\r\n                    </div>\r\n                </div>\r\n                {\r\n                editMode \r\n                //@ts-ignore\r\n                    ? <ProfileDataFormRedux initialValues = {profile} profile = {profile} onSubmit = {onSubmit}/>\r\n                    : <ProfileData profile = {profile} onEditMode = {() => setEditMode(true)} isOwner={props.isOwner}/>\r\n                }\r\n                {\r\n                    !props.isOwner\r\n                        && friends.some(item => { return profile && item.id === profile.userId})\r\n                        ? <button className={s.btnFollow + ' ' + (s.btnRed)} onClick={() => switch_follow(true, profile && profile.userId)}\r\n                                    disabled={toggleProgressArr.some(id => profile && id === profile.userId)} key = {profile.userId}> Unfollow\r\n                                </button>\r\n                        : !props.isOwner && <button className={s.btnFollow + ' ' + (s.btnBlue)} onClick={() => switch_follow(false, profile && profile.userId)}\r\n                                    disabled={toggleProgressArr.some(id => profile && id === profile.userId)} key = {profile.userId}> Follow\r\n                                </button>\r\n                }\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default ProfileInfo;\r\n\r\n\r\ntype PropsType = {\r\n    isOwner: boolean\r\n}"]},"metadata":{},"sourceType":"module"}