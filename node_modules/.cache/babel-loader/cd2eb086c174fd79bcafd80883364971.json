{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\src\\\\components\\\\Profile\\\\ProfileInfo\\\\ProfilInfo.tsx\";\n\nimport React, { useState } from 'react';\nimport s from './ProfileInfo.module.css';\nimport Preloader from '../../common/Preloader/Preloader';\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\nimport { ProfileDataFormRedux } from \"./ProfileDataForm\";\nimport 'react-image-crop/dist/ReactCrop.css';\nimport AvatarPhoto from './AvatarPhoto';\nimport ProfileData from './ProfileData';\nimport photoUser from \"../../../img/user.svg\";\nimport { useSelector } from 'react-redux';\n\nvar ProfileInfo = function ProfileInfo(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      editMode = _useState2[0],\n      setEditMode = _useState2[1];\n\n  var isFetching = useSelector(function (state) {\n    return state.profilePage.isFetching;\n  });\n\n  var onSubmit = function onSubmit(data) {\n    props.saveProfile(data).then(function () {\n      setEditMode(false);\n    });\n  };\n\n  if (!props.profile || isFetching) {\n    return /*#__PURE__*/React.createElement(Preloader, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 20\n      }\n    });\n  }\n\n  var switch_follow = function switch_follow(followed, userId) {\n    if (followed) {\n      props.unfollow(userId);\n    } else {\n      props.follow(userId);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: s.descriptionBlock,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }\n  }, props.isOwner ? /*#__PURE__*/React.createElement(AvatarPhoto, {\n    avatar: props.profile.photos.large,\n    fullName: props.profile.fullName,\n    isOwner: props.isOwner,\n    updatePhoto: props.updatePhoto,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 31\n    }\n  }) //@ts-ignore\n  :\n  /*#__PURE__*/\n  React.createElement(\"img\", {\n    src: props.profile.photos.large ? props.profile.photos.large : photoUser,\n    className: s.avaImg,\n    alt: \"PHOTO\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 31\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginLeft: \"20px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 28\n    }\n  }, props.profile.fullName || 'unknown user ')), /*#__PURE__*/React.createElement(ProfileStatusWithHooks, {\n    status: props.status,\n    updateStatus: props.updateStatus,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 25\n    }\n  }))), editMode //@ts-ignore\n  ?\n  /*#__PURE__*/\n  React.createElement(ProfileDataFormRedux, {\n    initialValues: props.profile,\n    profile: props.profile,\n    onSubmit: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 23\n    }\n  }) : /*#__PURE__*/React.createElement(ProfileData, {\n    profile: props.profile,\n    onEditMode: function onEditMode() {\n      return setEditMode(true);\n    },\n    isOwner: props.isOwner,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 23\n    }\n  }), !props.isOwner && props.friends.some(function (item) {\n    return props.profile && item.id === props.profile.userId;\n  }) ? /*#__PURE__*/React.createElement(\"button\", {\n    className: s.btnFollow + ' ' + s.btnRed,\n    onClick: function onClick() {\n      return switch_follow(true, props.profile && props.profile.userId);\n    },\n    disabled: props.toggleProgressArr.some(function (id) {\n      return props.profile && id === props.profile.userId;\n    }),\n    key: props.profile.userId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 27\n    }\n  }, \" Unfollow\") : !props.isOwner && /*#__PURE__*/React.createElement(\"button\", {\n    className: s.btnFollow + ' ' + s.btnBlue,\n    onClick: function onClick() {\n      return switch_follow(false, props.profile && props.profile.userId);\n    },\n    disabled: props.toggleProgressArr.some(function (id) {\n      return props.profile && id === props.profile.userId;\n    }),\n    key: props.profile.userId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 45\n    }\n  }, \" Follow\")));\n};\n\nexport default ProfileInfo;","map":{"version":3,"sources":["C:/Users/dikush/Documents/GitHub/react-my-way/src/components/Profile/ProfileInfo/ProfilInfo.tsx"],"names":["React","useState","s","Preloader","ProfileStatusWithHooks","ProfileDataFormRedux","AvatarPhoto","ProfileData","useSelector","ProfileInfo","props","editMode","setEditMode","isFetching","state","profilePage","onSubmit","data","saveProfile","then","profile","switch_follow","followed","userId","unfollow","follow","descriptionBlock","display","isOwner","photos","large","fullName","updatePhoto","photoUser","avaImg","marginLeft","status","updateStatus","friends","some","item","id","btnFollow","btnRed","toggleProgressArr","btnBlue"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport  s from './ProfileInfo.module.css'\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport {ProfileDataFormRedux} from \"./ProfileDataForm\"\r\nimport {ProfileType, SaveProfileType, UserType} from '../../../Types/Types';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport AvatarPhoto from './AvatarPhoto';\r\nimport ProfileData from './ProfileData';\r\nimport photoUser from '../../../img/user.svg'\r\nimport { useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../../redux/store-redux';\r\n\r\nconst ProfileInfo:React.FC<PropsType> = (props) => {\r\n\r\n    const [editMode, setEditMode] = useState(false)\r\n    const isFetching = useSelector((state: AppStateType) => state.profilePage.isFetching)\r\n    \r\n    const onSubmit = (data: SaveProfileType) => {\r\n        props.saveProfile(data).then(() => {\r\n            setEditMode(false)\r\n        });\r\n    }\r\n        if (!props.profile || isFetching){\r\n            return <Preloader />\r\n        }\r\n\r\n    const switch_follow = (followed: boolean, userId: number | null) => {\r\n        if (followed) {\r\n            props.unfollow(userId)\r\n        } else {\r\n            props.follow(userId)\r\n        }\r\n    }\r\n\r\n        return (<div>\r\n            <div className={s.descriptionBlock}>\r\n                <div style={{display:'flex'}}>\r\n                    {\r\n                        props.isOwner \r\n                            ? <AvatarPhoto \r\n                                avatar = {props.profile.photos.large} \r\n                                fullName = {props.profile.fullName} \r\n                                isOwner = {props.isOwner}\r\n                                updatePhoto = {props.updatePhoto}/>\r\n                                //@ts-ignore\r\n                            : <img src = {props.profile.photos.large ? props.profile.photos.large : photoUser} className = {s.avaImg} alt=\"PHOTO\"/>\r\n                    }\r\n                    <div style={{marginLeft:\"20px\"}}>\r\n                        <p><b>{props.profile.fullName || 'unknown user '}</b></p>\r\n                        <ProfileStatusWithHooks status = {props.status} updateStatus = {props.updateStatus}/>\r\n                    </div>\r\n                </div>\r\n                {\r\n                editMode \r\n                //@ts-ignore\r\n                    ? <ProfileDataFormRedux initialValues = {props.profile} profile = {props.profile} onSubmit = {onSubmit}/>\r\n                    : <ProfileData profile = {props.profile} onEditMode = {() => setEditMode(true)} isOwner={props.isOwner}/>\r\n                }\r\n                {\r\n                    !props.isOwner\r\n                        && props.friends.some(item => { return props.profile && item.id === props.profile.userId})\r\n                        ? <button className={s.btnFollow + ' ' + (s.btnRed)} onClick={() => switch_follow(true, props.profile && props.profile.userId)}\r\n                                    disabled={props.toggleProgressArr.some(id => props.profile && id === props.profile.userId)} key = {props.profile.userId}> Unfollow\r\n                                </button>\r\n                        : !props.isOwner && <button className={s.btnFollow + ' ' + (s.btnBlue)} onClick={() => switch_follow(false, props.profile && props.profile.userId)}\r\n                                    disabled={props.toggleProgressArr.some(id => props.profile && id === props.profile.userId)} key = {props.profile.userId}> Follow\r\n                                </button>\r\n                }\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default ProfileInfo;\r\n\r\n\r\ntype PropsType = {\r\n    profile: ProfileType | null\r\n    isOwner: boolean\r\n    status: string\r\n    friends: Array<UserType>\r\n    toggleProgressArr: Array<number>\r\n\r\n    updatePhoto: (file: File) => void\r\n    saveProfile: (data: SaveProfileType) => Promise<SaveProfileType>\r\n    updateStatus: (data: string) => void\r\n    unfollow: (userId: number | null) => void\r\n    follow: (userId: number | null) => void\r\n}"]},"metadata":{},"sourceType":"module"}