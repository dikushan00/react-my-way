{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\dikush\\\\Documents\\\\GitHub\\\\react-my-way\\\\src\\\\components\\\\Profile\\\\ProfileContainer.tsx\";\nimport React, { PureComponent } from 'react';\nimport Profile from \"./Profile\";\nimport { connect } from \"react-redux\";\nimport { check_auth, getStatus, updateStatus, updatePhoto, saveProfile } from \"../../redux/profile_reducer\";\nimport { withRouter } from \"react-router-dom\";\nimport { compose } from \"redux\";\nimport { withAuthRedirect } from \"../HOC/withAuthRedirect\";\nimport { follow, unfollow } from './../../redux/users_reducer';\n\nvar ProfileContainer = /*#__PURE__*/function (_PureComponent) {\n  _inherits(ProfileContainer, _PureComponent);\n\n  function ProfileContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProfileContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProfileContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.refreshProfile = function () {\n      var userId = +_this.props.match.params.userId;\n      if (!userId) userId = _this.props.authId;\n\n      _this.props.check_auth(userId);\n\n      _this.props.getStatus(userId);\n    };\n\n    return _this;\n  }\n\n  _createClass(ProfileContainer, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.refreshProfile();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.match.params.userId !== this.props.match.params.userId) {\n        this.refreshProfile();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Profile, {\n        state: this.props.state,\n        isOwner: !this.props.match.params.userId,\n        status: this.props.status,\n        updateStatus: this.props.updateStatus,\n        updatePhoto: this.props.updatePhoto,\n        saveProfile: this.props.saveProfile,\n        follow: this.props.follow,\n        unfollow: this.props.unfollow,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 13\n        }\n      });\n    }\n  }]);\n\n  return ProfileContainer;\n}(PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    state: state.profilePage,\n    status: state.profilePage.status,\n    authId: state.auth.id,\n    isAuth: state.auth.isAuth\n  };\n};\n\nexport default compose(connect(mapStateToProps, {\n  check_auth: check_auth,\n  getStatus: getStatus,\n  updateStatus: updateStatus,\n  updatePhoto: updatePhoto,\n  saveProfile: saveProfile,\n  follow: follow,\n  unfollow: unfollow\n}), withRouter, withAuthRedirect)(ProfileContainer);","map":{"version":3,"sources":["C:/Users/dikush/Documents/GitHub/react-my-way/src/components/Profile/ProfileContainer.tsx"],"names":["React","PureComponent","Profile","connect","check_auth","getStatus","updateStatus","updatePhoto","saveProfile","withRouter","compose","withAuthRedirect","follow","unfollow","ProfileContainer","refreshProfile","userId","props","match","params","authId","prevProps","state","status","mapStateToProps","profilePage","auth","id","isAuth"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAqC,OAArC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,UAAR,EAAoBC,SAApB,EAA+BC,YAA/B,EAA6CC,WAA7C,EAA0DC,WAA1D,QAAqG,6BAArG;AACA,SAAQC,UAAR,QAA8C,kBAA9C;AACA,SAAQC,OAAR,QAAsB,OAAtB;AACA,SAAQC,gBAAR,QAA+B,yBAA/B;AAGA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,6BAAjC;;IAEMC,gB;;;;;;;;;;;;;;;;UAEFC,c,GAAiB,YAAM;AACnB,UAAIC,MAAqB,GAAG,CAAC,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAArD;AACA,UAAI,CAACA,MAAL,EAAaA,MAAM,GAAG,MAAKC,KAAL,CAAWG,MAApB;;AACb,YAAKH,KAAL,CAAWb,UAAX,CAAsBY,MAAtB;;AACA,YAAKC,KAAL,CAAWZ,SAAX,CAAqBW,MAArB;AACH,K;;;;;;;wCAEmB;AAChB,WAAKD,cAAL;AACH;;;uCAEkBM,S,EAA6D;AAC5E,UAAGA,SAAS,CAACH,KAAV,CAAgBC,MAAhB,CAAuBH,MAAvB,KAAmC,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAA9D,EAAqE;AACjE,aAAKD,cAAL;AACH;AACJ;;;6BAEQ;AAEL,0BACI,oBAAC,OAAD;AACI,QAAA,KAAK,EAAE,KAAKE,KAAL,CAAWK,KADtB;AAEI,QAAA,OAAO,EAAE,CAAC,KAAKL,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,MAFtC;AAGI,QAAA,MAAM,EAAI,KAAKC,KAAL,CAAWM,MAHzB;AAII,QAAA,YAAY,EAAE,KAAKN,KAAL,CAAWX,YAJ7B;AAKI,QAAA,WAAW,EAAE,KAAKW,KAAL,CAAWV,WAL5B;AAMI,QAAA,WAAW,EAAE,KAAKU,KAAL,CAAWT,WAN5B;AAOI,QAAA,MAAM,EAAI,KAAKS,KAAL,CAAWL,MAPzB;AAQI,QAAA,QAAQ,EAAI,KAAKK,KAAL,CAAWJ,QAR3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ;AAWH;;;;EAhC0BZ,a;;AAmC/B,IAAIuB,eAAe,GAAG,SAAlBA,eAAkB,CAACF,KAAD;AAAA,SAA0B;AAC5CA,IAAAA,KAAK,EAAEA,KAAK,CAACG,WAD+B;AAE5CF,IAAAA,MAAM,EAAED,KAAK,CAACG,WAAN,CAAkBF,MAFkB;AAG5CH,IAAAA,MAAM,EAAEE,KAAK,CAACI,IAAN,CAAWC,EAHyB;AAI5CC,IAAAA,MAAM,EAAEN,KAAK,CAACI,IAAN,CAAWE;AAJyB,GAA1B;AAAA,CAAtB;;AAOA,eAAelB,OAAO,CAClBP,OAAO,CAACqB,eAAD,EAAkB;AACrBpB,EAAAA,UAAU,EAAVA,UADqB;AAErBC,EAAAA,SAAS,EAATA,SAFqB;AAGrBC,EAAAA,YAAY,EAAZA,YAHqB;AAIrBC,EAAAA,WAAW,EAAXA,WAJqB;AAKrBC,EAAAA,WAAW,EAAXA,WALqB;AAMrBI,EAAAA,MAAM,EAANA,MANqB;AAOrBC,EAAAA,QAAQ,EAARA;AAPqB,CAAlB,CADW,EASlBJ,UATkB,EAUlBE,gBAVkB,CAAP,CAWbG,gBAXa,CAAf","sourcesContent":["import React, { PureComponent } from 'react';\r\nimport Profile from \"./Profile\";\r\nimport {connect} from \"react-redux\";\r\nimport {check_auth, getStatus, updateStatus, updatePhoto, saveProfile, ProfileInitialStateType} from \"../../redux/profile_reducer\";\r\nimport {withRouter, RouteComponentProps} from \"react-router-dom\";\r\nimport {compose} from \"redux\";\r\nimport {withAuthRedirect} from \"../HOC/withAuthRedirect\"\r\nimport { AppStateType } from '../../redux/store-redux';\r\nimport { ProfileType, SaveProfileType } from '../../Types/Types';\r\nimport { follow, unfollow } from './../../redux/users_reducer';\r\n\r\nclass ProfileContainer extends PureComponent<PropsType & RouteComponentProps<RouteParamsProps>> {\r\n\r\n    refreshProfile = () => {\r\n        let userId: number | null = +this.props.match.params.userId;\r\n        if (!userId) userId = this.props.authId\r\n        this.props.check_auth(userId)\r\n        this.props.getStatus(userId)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshProfile();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: PropsType & RouteComponentProps<RouteParamsProps>){\r\n        if(prevProps.match.params.userId !==  this.props.match.params.userId){\r\n            this.refreshProfile();\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        return (\r\n            <Profile \r\n                state={this.props.state} \r\n                isOwner={!this.props.match.params.userId}\r\n                status = {this.props.status}\r\n                updateStatus={this.props.updateStatus} \r\n                updatePhoto={this.props.updatePhoto}\r\n                saveProfile={this.props.saveProfile}\r\n                follow = {this.props.follow}\r\n                unfollow = {this.props.unfollow}/>\r\n        )\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state: AppStateType) => ({\r\n    state: state.profilePage,\r\n    status: state.profilePage.status,\r\n    authId: state.auth.id,\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport default compose<React.ComponentType>(\r\n    connect(mapStateToProps, {\r\n        check_auth, \r\n        getStatus, \r\n        updateStatus, \r\n        updatePhoto, \r\n        saveProfile,\r\n        follow,\r\n        unfollow}),\r\n    withRouter,\r\n    withAuthRedirect\r\n)(ProfileContainer)\r\n\r\n\r\n\r\ntype PropsType = {\r\n    authId: number\r\n    profile: ProfileType\r\n    isOwner: boolean\r\n    status: string\r\n    state: ProfileInitialStateType\r\n    updateStatus: () => void\r\n    updatePhoto: (file: File) => void\r\n    saveProfile: (data: SaveProfileType) => Promise<SaveProfileType>\r\n    check_auth: (userId: number) => void\r\n    getStatus: (userId: number) => void\r\n    unfollow: (userId: number | null) => void\r\n    follow: (userId: number | null) => void\r\n}\r\n\r\ntype RouteParamsProps = {\r\n    userId: string \r\n}"]},"metadata":{},"sourceType":"module"}