{"version":3,"sources":["components/Profile/ProfileInfo/ProfileInfo.module.css","redux/dialogs_reducer.ts","components/News/News.module.css","Footer.module.css","img/logo.png","components/common/Preloader/Preloader.module.css","components/Profile/Profile.module.css","img/next.svg","img/back.svg","components/News/Stories/Stories.module.css","components/Login/Login.module.css","api/api.ts","components/common/FormControl/FormControl.tsx","serviceWorker.js","components/Navbar/FriendsBar/FreindsBar.tsx","components/Navbar/Navbar.tsx","Footer.jsx","redux/profile_reducer.ts","redux/header_reducer.ts","redux/music_reducer.ts","components/Header/MusicPlayer.tsx","components/Header/HeaderSearchForm.tsx","components/Header/Header.tsx","components/Header/HeaderContainer.tsx","redux/app_reducer.ts","redux/navbar_reducer.ts","redux/news_reducer.ts","api/chat-api.ts","redux/chat_reducer.ts","redux/store-redux.ts","components/Profile/ProfileInfo/ProfileStatusWithHooks.tsx","components/Profile/ProfileInfo/ProfileDataForm.tsx","components/utils/Validators/cropImgFunctions.ts","components/Profile/ProfileInfo/DropzoneAva.tsx","components/Profile/ProfileInfo/AvatarPhoto.tsx","components/Profile/ProfileInfo/ProfileData.tsx","components/Profile/ProfileInfo/ProfilInfo.tsx","components/Profile/MyPosts/Post/CommentsArea.tsx","components/Profile/MyPosts/Post/ReviewArea.tsx","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx","components/Music/Playlist.tsx","components/Music/Controls.tsx","components/Music/Music.tsx","components/Settings/Settings.jsx","components/News/newsItem/NewsItem.tsx","components/News/Stories/StoriesItem.tsx","components/News/Stories/Stories.tsx","components/News/News.tsx","components/News/NewsContainer.tsx","components/Login/Login.tsx","components/HOC/withSuspens.tsx","components/Chat/Chat.tsx","components/Chat/ChatPage.tsx","componentsDataArr.js","App.tsx","index.js","img/user.svg","img/user(1).svg","components/common/Preloader/Preloader.tsx","redux/users_reducer.ts","components/Navbar/Navbar.module.css","components/Header/Header.module.css","components/common/FormControl/FormControl.module.css","components/utils/Validators/validators.ts","img/heart.svg","img/heart_active.svg","components/Navbar/FriendsBar/FreindsBar.module.css","components/HOC/withAuthRedirect.tsx","components/News/newsItem/NewsItem.module.css","img/user22.jpg","img/comment2.svg","components/Profile/MyPosts/MyPosts.module.css"],"names":["module","exports","descriptionBlock","avaArea","avaHover","avaImg","contact","btn","editBtn","inputPhoto","profileData","infoKey","postImg","dropzone","btnFollow","btnBlue","btnRed","BigModeArea","rightContent","closeBig","initialState","userData","id","name","messageData","messages","message","newMessages","actions","addMessage","newMessageText","type","sendNewMessage","data","sendMessage","_ref","Object","I_files_web_practice_react_react_my_way_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","I_files_web_practice_react_react_my_way_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","dispatch","wrap","_context","prev","next","DialogsAPI","sendMessagesToUser","then","sent","stop","_x","apply","this","arguments","dialogs_reducer","state","length","undefined","action","I_files_web_practice_react_react_my_way_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_3__","map","item","concat","I_files_web_practice_react_react_my_way_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","story","footer","__webpack_require__","p","ldsDualRing","content","storiesArea","storiesItem","storiesImg","form","d","__webpack_exports__","ResultCodeEnum","CaptchaEnum","UsersAPI","AuthAPI","ProfileAPI","LoginAPI","SecurityAPI","axios__WEBPACK_IMPORTED_MODULE_0__","instance","n","axios","create","withCredentials","baseURL","headers","api-key","getUsers","currentPage","pageSize","term","friends","get","response","follow","userId","post","unfollow","delete","getFriends","res","checkAuthMe","checkAuth","getStatus","updateStatus","status","put","updateMainPhoto","photo","formData","FormData","append","Content-Type","saveProfile","profile","checkLogin","email","password","rememberMe","captcha","logout","getCaptcha","viewAllDialogs","startDialog","getMessagesWUser","body","Element","input","meta","props","I_files_web_practice_react_react_my_way_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__","hasError","touched","error","react__WEBPACK_IMPORTED_MODULE_1___default","createElement","className","style","inputArea","assign","Boolean","window","location","hostname","match","FriendsBar","useSelector","usersPage","react_default","textAlign","FriendsBarContent","i","key","react_router_dom","to","photos","large","src","width","alt","userPhoto","itemName","display","fontSize","Navbar","navState","navbar","navData","s","nav","href","itemLink","linkWrap","navbarItemImg","toLowerCase","toString","linkName","FreindsBar","Footer","postsData","title","comments","commentId","fullName","text","likesCount","CommentsCount","liked","isFetching","addPost","newPostText","profileInfo","myProfileInfo","toggleIsFetching","setStatus","setPhoto","photoUrl","addNewComment","newCommentText","updateLikeCount","updateCommentCount","check_auth","asyncToGenerator","regenerator_default","updatePhoto","_ref4","_callee4","_context4","resultCode","Success","_x4","check_auth_me","_ref6","_callee6","getState","myId","_context6","auth","_x7","_x8","profile_reducer","objectSpread","toConsumableArray","avatar","login","isAuth","_response$data","url","header_reducer","songs","currentSong","currentTime","repeat","random","playing","audio","time","music_reducer","MusicPlayer","useDispatch","music","currentTimeState","useRef","_useState","useState","_useState2","slicedToArray","statevolum","_useState3","_useState4","setDur","_useState5","_useState6","setCurrentTime","SetCurrent","nextSong","toggleAudio","current","paused","play","pause","useEffect","volume","justifyContent","onTimeUpdate","e","target","handleUpdateTime","onCanPlay","duration","onEnded","Math","ref","preload","onClick","react_fontawesome_index_es","icon","faStepBackward","faPlay","faPause","faStepForward","HeaderSearchForm","searchFriends","setSearchFriends","isFocuced","setIsFocused","toggleFocus","document","addEventListener","elem","accountDrop","getElementById","outsideClickListener","event","contains","offsetWidth","offsetHeight","getClientRects","isVisible","removeEventListener","position","formik_esm","initialValues","onSubmit","values","setSubmitting","filter","includes","console","log","_ref2","handleChange","submitForm","autoComplete","onFocus","placeholder","value","onChange","setTimeout","borderRadius","border","outline","height","padding","faSearch","top","right","color","flexDirection","background","zIndex","index","marginTop","photoUser","margin","marginLeft","Header","profilePage","isLogInfoMode","setLogInfoMode","header","logoImg","Header_HeaderSearchForm","Header_MusicPlayer","authArea","accountInfo","userImg","_ref3","_callee3","_context3","_x3","HeaderContainer","components_Header_Header","initialized","app_reducer","navbar_reducer","news","stories","viewed","news_reducer","ws","subscribers","messagesSubs","statusSubs","closeHandler","notifyStatusChanging","createChanel","messageHandler","messagesData","JSON","parse","forEach","openHandler","errorHandler","cleanUp","close","WebSocket","ChatApi","subscriber","push","send","_newMessageHandler","newMessageHandler","_newStatusHandler","newStatusHandler","chat_reducer","v1","array","reducers","combineReducers","dialogPage","newsPage","users_reducer","app","chat","formReducer","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleWare","ProfileStatusWithHooks","statusWord","editMode","setEditMode","toggleEditMode","autoFocus","onBlur","onDoubleClick","cursor","Input","Textarea1","Textarea2","Checkbox","ProfileDataFormRedux","reduxForm","handleSubmit","commonError","Field","component","contacts","keys","getCroppedImg","image","crop","fileName","canvas","scaleX","naturalWidth","scaleY","naturalHeight","ctx","getContext","drawImage","x","y","Promise","resolve","reject","toBlob","blob","reader","FileReader","readAsDataURL","onload","croppedImageFile","base64String","filename","arr","split","mime","bstr","atob","u8arr","Uint8Array","charCodeAt","File","base64StringtoFile","result","croppedImageUrl","URL","createObjectURL","DropzoneAva","setIsLoadImg","setSrc","dist_es","onDrop","files","rejectedFiles","multiple","accept","maxSize","getRootProps","getInputProps","AvatarBigMode","isBigMode","setBigMode","avatarPhoto","isOwner","imageRef","setImageRef","isLoadImg","_useState7","_useState8","_useState9","_useState10","croppedObject","setCroppedObject","_useState11","unit","aspect","_useState12","setCrop","makeClientCrop","_croppedObject","refreshInputArea","alignItems","borderBottom","user","ProfileInfo_DropzoneAva","ReactCrop_min_default","ruleOfThirds","onImageLoaded","onComplete","maxWidth","AvatarPhoto","classList","add","remove","AvatarPhoto_AvatarBigMode","Contact","contactTitle","contactValue","ProfileData","objectWithoutProperties","onEditMode","faStickyNote","infoValue","aboutMe","faCheck","lookingForAJob","faBriefcase","lookingForAJobDescription","faAddressBook","ProfileData_Contact","ProfileInfo","toggleProgressArr","Preloader","switch_follow","followed","ProfileInfo_AvatarPhoto","ProfileInfo_ProfileStatusWithHooks","_ref5","_callee5","_context5","Error","stopSubmit","_error","abrupt","_x5","_x6","ProfileInfo_ProfileData","some","disabled","CommentsArea","sNews","commentsArea","commentsItem","commentPhoto","commentUserPhoto","paddingLeft","ReviewArea","onAddLike","reviewCount","likesPhotoActive","reviewIcon","likesPhoto","CommentFormRedux","inputComment","Post","newsItem","newsTitle","Post_ReviewArea","addComment","reset","Post_CommentsArea","maxLength255","maxLengthCreater","Textarea","myPostForm","sendText","validate","required","React","Component","MyPostFormRedux","MyPosts","addPostArea","newMyPostText","posts","reverse","MyPosts_Post_Post","MyPostsContainer","connect","Profile","ProfilInfo","MyPosts_MyPostsContainer","withAuthRedirect","params","useParams","authId","refreshProfile","_callee2","_context2","_x2","components_Profile_Profile","Playlist","faListUl","song","faMusic","Controls","setStateVolum","dur","fmtMSS","faVolumeDown","round","q","compute","faRandom","faRedoAlt","Music","Fragment","Music_Controls","Music_Playlist","Settings","NewsItemBigMode","onAddComment","NewsItem_CommentFormRedux","NewsItem_NewsCommentsArea","NewsCommentsArea","NewsItem","newsItemContent","NewsItem_NewsItemBigMode","StoriesItem","memo","setStoryViewed","storyPhoto","setStoryPhoto","storyIndex","setStoryIndex","imgStyle","onStoryClick","storyTime","setInterval","changeStoryPhoto","direction","clearInterval","left","defaultUserPhoto","StoryBigMode","storyId","centerStory","backPhoto","nextPhoto","Stories","Stories_StoriesItem","News","newsState","newsWrap","News_Stories_Stories","postArea","newsItem_NewsItem","ReduxForm","htmlFor","checkLoginMe","Captcha","react_router","inputData","withSuspens","Suspense","fallback","Chat","Chat_Messages","Chat_AddMessageForm","Messages","messageWrapper","messagesBottom","_React$useState","_React$useState2","isAutoScroll","setIsAutoScroll","scrollIntoView","onScroll","element","currentTarget","abs","scrollHeight","scrollTop","clientHeight","maxHeight","overflowY","Chat_Message","Message","userName","AddMessageForm","_React$useState3","_React$useState4","setMessage","sendMessageHandler","cols","rows","ChatPage","Chat_Chat","UsersContainer","lazy","bind","WithSuspensDialogs","WithSuspensUsers","componentsData","path","exact","NewsContainer","ChatPage_ChatPage","Profile_ProfileContainer","components_Music_Music","components_Settings_Settings","components_Login_Login","App","promise","all","Header_HeaderContainer","components_Navbar_Navbar","render","src_Footer","MyWayApp","es","App_App","ReactDOM","src_App_0","navigator","serviceWorker","ready","registration","unregister","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","_Preloader_module_css__WEBPACK_IMPORTED_MODULE_1__","_Preloader_module_css__WEBPACK_IMPORTED_MODULE_1___default","usersData","pageCount","users","count","items","totalCount","u","active","itemSettings","settings","maxLength","react_router_dom__WEBPACK_IMPORTED_MODULE_1__","react_redux__WEBPACK_IMPORTED_MODULE_2__","myPostWrap"],"mappings":"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","file":"static/js/main.d63fe1d1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__3IQY5\",\"avaArea\":\"ProfileInfo_avaArea__18DAX\",\"avaHover\":\"ProfileInfo_avaHover__3nvcH\",\"avaImg\":\"ProfileInfo_avaImg__2N24i\",\"contact\":\"ProfileInfo_contact__3sfQm\",\"btn\":\"ProfileInfo_btn__2kxrB\",\"editBtn\":\"ProfileInfo_editBtn__3eBuS\",\"inputPhoto\":\"ProfileInfo_inputPhoto__2hIBc\",\"profileData\":\"ProfileInfo_profileData__1UrmR\",\"infoKey\":\"ProfileInfo_infoKey__2chCu\",\"postImg\":\"ProfileInfo_postImg__2kEd0\",\"dropzone\":\"ProfileInfo_dropzone__1CZls\",\"btnFollow\":\"ProfileInfo_btnFollow__2_-TK\",\"btnBlue\":\"ProfileInfo_btnBlue__1CYGR\",\"btnRed\":\"ProfileInfo_btnRed__1z1AG\",\"BigModeArea\":\"ProfileInfo_BigModeArea__SSov4\",\"rightContent\":\"ProfileInfo_rightContent__2khK0\",\"closeBig\":\"ProfileInfo_closeBig__16rkQ\"};","import { InferActionsTypes, ThunkType } from \"./store-redux\";\r\nimport { DialogsAPI } from \"../api/api\";\r\n\r\nlet id = 4;\r\n\r\ntype UserDataType = {\r\n    id: number\r\n    name: string\r\n}\r\ntype MessagesType = {\r\n    id: number\r\n    message: string\r\n}\r\ntype MessageDataType = {\r\n    id: number\r\n    messages: Array<MessagesType>\r\n}\r\n\r\nlet initialState = {\r\n    userData: [\r\n        {\"id\": 1, \"name\": \"Dmitri\"},\r\n        {\"id\": 2, \"name\": \"Svetlana\"},\r\n        {\"id\": 3, \"name\": \"Nauryz\"},\r\n        {\"id\": 4, \"name\": \"Dinmukhamed\"},\r\n        {\"id\": 5, \"name\": \"Mukhit\"}\r\n    ] as Array<UserDataType>,\r\n    messageData: [\r\n            {\r\n                id: 1,\r\n                messages: [\r\n                    {\"id\": 1, \"message\": \"Yo\"},\r\n                    {\"id\": 2, \"message\": \"Hello\"},\r\n                    {\"id\": 1, \"message\": \"How are you\"}\r\n                ]\r\n            },\r\n            {\r\n                id: 2,\r\n                messages: [\r\n                    {\"id\": 1, \"message\": \"hello. how are you?\"},\r\n                    {\"id\": 2, \"message\": \"Hello\"},\r\n                    {\"id\": 1, \"message\": \"im good\"}\r\n                ]\r\n            },\r\n            {\r\n                id: 3,\r\n                messages: [\r\n                    {\"id\": 1, \"message\": \"hi\"},\r\n                    {\"id\": 2, \"message\": \"Hello\"},\r\n                    {\"id\": 1, \"message\": \"what we get in home work\"}\r\n                ]\r\n            },\r\n            {\r\n                id: 4,\r\n                messages: [\r\n                    {\"id\": 1, \"message\": \"drop our phootos\"},\r\n                    {\"id\": 2, \"message\": \"which?\"},\r\n                    {\"id\": 1, \"message\": \"from zerendy\"}\r\n                ]\r\n            },\r\n            {\r\n                id: 5,\r\n                messages: [\r\n                    {\"id\": 1, \"message\": \"Hello classmates\"},\r\n                    {\"id\": 2, \"message\": \"Hello\"},\r\n                    {\"id\": 1, \"message\": \"wourld you like have hang out with me?\"},\r\n                    {\"id\": 2, \"message\": \"yes, go!\"}\r\n                ]\r\n            }\r\n        ] as Array<MessageDataType>,\r\n    newMessages: []\r\n}\r\n\r\nexport type DialogsInitialStateType = typeof initialState\r\n\r\nlet dialogs_reducer = (state = initialState, action: ActionsType): DialogsInitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'SN/Dialogs/ADD_NEW_MESSAGE': {\r\n\r\n            if (action.newMessageText.length > 0) {\r\n                return {\r\n                    ...state,\r\n                    messageData: state.messageData.map(item => {\r\n                        if(+action.id == item.id){\r\n                            item.messages = [...item.messages, {\"id\": 2, \"message\": action.newMessageText}]\r\n                            return item\r\n                        }\r\n                        return item\r\n                    })\r\n                }\r\n            }\r\n            id += 2;\r\n            return state\r\n        }\r\n\r\n        case 'SN/Dialogs/SEND_NEW_MESSAGE': {\r\n\r\n            return {\r\n                ...state,\r\n                newMessages: action.data\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    addMessage: (id: number, newMessageText: string) => ({type: 'SN/Dialogs/ADD_NEW_MESSAGE', id, newMessageText} as const),\r\n    sendNewMessage: (data: any) => ({type: 'SN/Dialogs/SEND_NEW_MESSAGE', data} as const)\r\n}\r\n\r\ntype getThunkType = ThunkType<ActionsType>\r\n\r\nexport const sendMessage = (id: number, message: string): getThunkType => async (dispatch) => {\r\n    debugger\r\n    let data = await DialogsAPI.sendMessagesToUser(id, message).then(() => {\r\n        dispatch(actions.sendNewMessage(data))\r\n    })\r\n}\r\n    \r\ntype ActionsType = InferActionsTypes<typeof actions>\r\n\r\nexport default dialogs_reducer\r\n\r\n\r\n// [\r\n//     {\r\n//         id: 1,\r\n//         messages: [\r\n//             {\"id\": 1, \"message\": \"Yo\"},\r\n//             {\"id\": 2, \"message\": \"Hello\"},\r\n//             {\"id\": 1, \"message\": \"How are you\"}\r\n//         ]\r\n//     },\r\n//     {\r\n//         id: 2,\r\n//         messages: [\r\n//             {\"id\": 1, \"message\": \"hello. how are you?\"},\r\n//             {\"id\": 2, \"message\": \"Hello\"},\r\n//             {\"id\": 1, \"message\": \"im good\"}\r\n//         ]\r\n//     },\r\n//     {\r\n//         id: 3,\r\n//         messages: [\r\n//             {\"id\": 1, \"message\": \"hi\"},\r\n//             {\"id\": 2, \"message\": \"Hello\"},\r\n//             {\"id\": 1, \"message\": \"what we get in home work\"}\r\n//         ]\r\n//     },\r\n//     {\r\n//         id: 4,\r\n//         messages: [\r\n//             {\"id\": 1, \"message\": \"drop our phootos\"},\r\n//             {\"id\": 2, \"message\": \"which?\"},\r\n//             {\"id\": 1, \"message\": \"from zerendy\"}\r\n//         ]\r\n//     },\r\n//     {\r\n//         id: 5,\r\n//         messages: [\r\n//             {\"id\": 1, \"message\": \"Hello classmates\"},\r\n//             {\"id\": 2, \"message\": \"Hello\"},\r\n//             {\"id\": 1, \"message\": \"wourld you like have hang out with me?\"},\r\n//             {\"id\": 2, \"message\": \"yes, go!\"}\r\n//         ]\r\n//     }\r\n// ]","// extracted by mini-css-extract-plugin\nmodule.exports = {\"story\":\"News_story__LJLNL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__3ogKW\"};","module.exports = __webpack_public_path__ + \"static/media/logo.3fa434f6.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ldsDualRing\":\"Preloader_ldsDualRing__1cBAI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"content\":\"Profile_content__Lj4Bi\"};","module.exports = __webpack_public_path__ + \"static/media/next.a6dfbed7.svg\";","module.exports = __webpack_public_path__ + \"static/media/back.87e27296.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"storiesArea\":\"Stories_storiesArea__2G9qc\",\"storiesItem\":\"Stories_storiesItem__3jXBQ\",\"storiesImg\":\"Stories_storiesImg__gvng1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Login_form__2n2g0\"};","import axios from \"axios\";\r\nimport {ProfileType, UserType, PhotosType, SaveProfileType} from \"../Types/Types\";\r\n\r\n\r\nconst instance = axios.create({\r\n    withCredentials: true,\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    headers: {\r\n        \"api-key\": \"201fbca2-9214-4c3c-bd7a-b698236c954c\"\r\n    }\r\n})\r\n\r\nexport enum ResultCodeEnum {\r\n    Success = 0,\r\n    Error = 1\r\n}\r\n\r\nexport enum CaptchaEnum {\r\n    Captcha = 10\r\n}\r\n\r\nexport const UsersAPI = {\r\n\r\n    getUsers(currentPage: number = 1, pageSize: number = 10, term: string = '', friends: boolean | null = null) {\r\n        return instance.get<GetUsersType>(`users?page=${currentPage}&count=${pageSize}&term=${term}` + (friends === null ? '' : `&friend=${friends}`))\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    },\r\n\r\n    follow(userId: number) {\r\n        return instance.post<CommonApiType>(`follow/${userId}`, {})\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    },\r\n\r\n    unfollow(userId: number | null) {\r\n        return instance.delete<CommonApiType>(`follow/${userId}`)\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    },\r\n\r\n    getFriends() {\r\n        return instance.get<GetUsersType>(`users?count=100&friend=true`)\r\n            .then(res => res.data)\r\n    }\r\n}\r\n\r\nexport const AuthAPI = {\r\n\r\n    checkAuthMe() {\r\n        return instance.get<AuthMeType>(`auth/me`)\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    }\r\n}\r\n\r\nexport const ProfileAPI = {\r\n\r\n    checkAuth(userId: number | null) {\r\n        return instance.get<ProfileType>(`profile/${userId}`)\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance.get(`profile/status/${userId}`)\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put<CommonApiType>(`profile/status`, {status})\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    },\r\n    updateMainPhoto(photo: File) {\r\n        const formData = new FormData()\r\n        formData.append(\"image\", photo)\r\n        return instance.put<UpdatePhotoType>(`profile/photo`, formData, {\r\n            headers: {\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n            .then(response => {\r\n                return response.data;\r\n            })\r\n    },\r\n    saveProfile(profile: SaveProfileType) {\r\n        return instance.put<CommonApiType>(`profile`, profile)\r\n    }\r\n}\r\n\r\nexport const LoginAPI = {\r\n    \r\n    checkLogin(email: string | null, password: string | null, rememberMe: boolean, captcha: string | null = null) {\r\n        return instance.post<PostLoginType>(`auth/login`, {email, password, rememberMe, captcha})\r\n    },\r\n    logout() {\r\n        return instance.delete<DeleteLoginType>(`auth/login`)\r\n    }\r\n}\r\n\r\nexport const SecurityAPI = {\r\n    getCaptcha() {\r\n        return instance.get<GetCaptchaType>(`security/get-captcha-url`)\r\n    }\r\n}\r\n\r\n\r\nexport const DialogsAPI = {\r\n\r\n    viewAllDialogs() {\r\n        return instance.get<CommonApiType>(`dialogs`)\r\n    },\r\n    startDialog(userId: number) {\r\n        return instance.put<CommonApiType>(`dialogs/${userId}`)\r\n    },\r\n    getMessagesWUser(userId: number) {\r\n        return instance.get<CommonApiType>(`dialogs/${userId}/messages`)\r\n    },\r\n    sendMessagesToUser(userId: number, message: string) {\r\n        return instance.post<CommonApiType>(`dialogs/${userId}/messages`, {\r\n            body: '' + message\r\n        }).then((res) => {\r\n            return res.data\r\n        })\r\n    }\r\n}\r\n\r\n\r\ntype CommonApiType = DeleteLoginType\r\n\r\ntype GetUsersType = {\r\n    items: Array<UserType>\r\n    totalCount: number\r\n    error: null | string\r\n}\r\n\r\n\r\ntype AuthMeType = {\r\n    data: { id: number | null, login: string | null, email: string | null }\r\n    resultCode: ResultCodeEnum | CaptchaEnum\r\n    messages: Array<string>\r\n}\r\n\r\n\r\ntype UpdatePhotoType = {\r\n    data: {\r\n        photos: PhotosType\r\n    }\r\n    messages: Array<string>\r\n    resultCode: ResultCodeEnum | CaptchaEnum\r\n}\r\n\r\n\r\ntype DeleteLoginType = {\r\n    data: {}\r\n    resultCode: ResultCodeEnum | CaptchaEnum\r\n    messages: Array<string>\r\n}\r\n\r\ntype PostLoginType = {\r\n    data: { userId: number }\r\n    resultCode: ResultCodeEnum | CaptchaEnum\r\n    messages: Array<string>\r\n}\r\n\r\n\r\ntype GetCaptchaType = {\r\n    url: string\r\n}","import React, { EventHandler, DragEvent, FocusEvent, ChangeEvent } from 'react'\r\nimport style from './FormControl.module.css'\r\nimport { WrappedFieldProps, EventOrValueHandler } from 'redux-form'\r\n\r\ntype FormControlType = (params: WrappedFieldProps) => React.ReactNode\r\n\r\ntype ElementType = {\r\n    checked?: boolean\r\n    value: any\r\n    onBlur: EventOrValueHandler<FocusEvent<any>>\r\n    onChange: EventOrValueHandler<ChangeEvent<any>>\r\n    onDragStart: EventHandler<DragEvent<any>>\r\n    onDrop: EventHandler<DragEvent<any>>\r\n    onFocus: EventHandler<FocusEvent<any>>\r\n}\r\n\r\nexport function Element(Element: any): FormControlType{\r\n    \r\n    return function( {input, meta, ...props} ) {\r\n\r\n    const hasError = meta.touched && meta.error\r\n\r\n    return <div className={style.inputArea + \" \" + (hasError ? style.error : \"\")}>\r\n        \r\n            <Element {...input} {...props} />\r\n            <span>{hasError && meta.error}</span>\r\n        </div>\r\n}}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport style from '../FriendsBar/FreindsBar.module.css'\r\nimport userPhoto from '../../../img/user(1).svg'\r\nimport { NavLink } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport { AppStateType } from '../../../redux/store-redux'\r\n\r\nconst FriendsBar: React.FC = () => {\r\n\r\n    const friends = useSelector((state: AppStateType) => state.usersPage.friends)\r\n\r\n    return <div className={style.FriendsBar}>\r\n        <h3 style={{textAlign: 'center'}}>Friends</h3>\r\n        <div className={style.FriendsBarContent}>\r\n        {\r\n            friends.map((item, i) => {\r\n                if(i<5){\r\n                    return <div key={item.id}><NavLink to={`/profile/${item.id}`} className={style.item}>\r\n                        {\r\n                        item.photos.large \r\n                            ? <img src={item.photos.large as string | undefined} style={{width: '40px'}} alt=\"User\"/>\r\n                            : <img src={userPhoto} style={{width: '40px'}} alt=\"User\"/>\r\n                        }\r\n                        <span className={style.itemName} style={{display: 'block', fontSize: '13px'}}>\r\n                            {item.name}\r\n                        </span>\r\n                    </NavLink>\r\n                    </div>\r\n                }\r\n            })\r\n        }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default FriendsBar","import React, { Props } from 'react';\r\nimport s from './Navbar.module.css';\r\nimport {useSelector} from \"react-redux\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport { AppStateType } from '../../redux/store-redux';\r\nimport FriendsBar from './FriendsBar/FreindsBar';\r\n\r\nconst Navbar: React.FC = () => {\r\n\r\n    const navState = useSelector((state: AppStateType) => state.navbar.navData)\r\n\r\n    return <nav className={s.nav}>\r\n        {navState.map((data) => (\r\n            <div className={s.item} key={data.id}>\r\n                <NavLink to={'/' + data.href} className={s.itemLink}>\r\n                    <span className={s.linkWrap}>\r\n                        <span className={s.navbarItemImg + ' ' + s[data.name.toLowerCase().toString()]}/>\r\n                        <span className={s.linkName}>{data.name}</span>\r\n                    </span>\r\n                </NavLink>\r\n            </div>\r\n        ))}\r\n        <FriendsBar />\r\n    </nav>\r\n}\r\n\r\nexport default Navbar;","import React from 'react';\r\nimport s from './Footer.module.css'\r\n\r\nconst Footer = () => {\r\n  return (<footer className={s.footer}>\r\n   <p>&copy; all right reserves, 2020</p>\r\n  </footer>);\r\n}\r\n\r\nexport default Footer;","import {ProfileAPI, ResultCodeEnum} from \"../api/api\";\r\nimport { stopSubmit, FormAction } from \"redux-form\";\r\nimport {CommentsType, SaveProfileType, ProfileType} from './../Types/Types';\r\nimport { ThunkType, InferActionsTypes } from \"./store-redux\";\r\n\r\nlet initialState = {\r\n    postsData: [\r\n        {\r\n            id: 1,\r\n            title: \"Hello everyone. it is my first news post!\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: ' ', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: ' ', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 2,\r\n            title: \"React makes it painless to create interactive UIs.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: ' ', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: ' ', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 3,\r\n            title: \"Build encapsulated components that manage their own state, then compose them to make complex UIs.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: ' ', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: ' ', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 4,\r\n            title: \"Declarative views make your code more predictable and easier to debug.\",\r\n            photo: '',\r\n            comments: [\r\n                {\r\n                    userId: 1, commentId: 1, fullName: ' ', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'\r\n                }, \r\n                {\r\n                    userId: 2, commentId: 2, fullName: ' ', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'\r\n                }],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        }\r\n    ] as Array<PostItemType>,\r\n    profile: null as ProfileType | null,\r\n    status: '',\r\n    isFetching: false,\r\n    photos: null as PhotosType | null\r\n}\r\n\r\nexport type ProfileInitialStateType = typeof initialState\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\nlet profile_reducer = (state = initialState, action: ActionsType): ProfileInitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'SN/Profile/ADD_NEW_POST': {\r\n\r\n            if (action.newPostText.length > 0) {\r\n                return {\r\n                    ...state,\r\n                    postsData: [...state.postsData, {\r\n                        id: 5,\r\n                        fullName: '',\r\n                        title: action.newPostText,\r\n                        photo: '',\r\n                        avatar: '',\r\n                        comments: [],\r\n                        likesCount: 0,\r\n                        CommentsCount: 0,\r\n                        liked: false\r\n                    }]\r\n                }\r\n            }\r\n\r\n            return state\r\n\r\n        }\r\n\r\n        case 'SN/Profile/PROFILE_INFO': {\r\n\r\n            return {\r\n                ...state,\r\n                profile: action.profile\r\n            }\r\n        }\r\n\r\n        case 'SN/Profile/My_PROFILE_INFO': {\r\n\r\n            return {\r\n                ...state,\r\n                profile: {...action.profile},\r\n                photos: action.profile.photos\r\n            }\r\n        }\r\n        case 'SN/Profile/TOGGLE_FETCHING': {\r\n            return { ...state, isFetching: action.isFetching}\r\n        }\r\n        case 'SN/Profile/SET_STATUS': {\r\n\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        case 'SN/Profile/SET_PHOTO': {\r\n\r\n            return {\r\n                ...state,\r\n                profile: { ...state.profile, photos: action.photoUrl } as ProfileType,\r\n                photos: action.photoUrl\r\n            }\r\n        }\r\n\r\n        case 'SN/Profile/ADD_NEW_COMMENT': {\r\n            if (action.newCommentText.length > 0){\r\n                return {\r\n                    ...state,\r\n                    postsData: state.postsData.map(item => {\r\n                        if(item.id === action.id)\r\n                            item.comments = [...item.comments, {userId: 5, fullName: 'dikushan00', commentId: 5, text: action.newCommentText, photo: ''}]\r\n                        return item\r\n                    })\r\n                }\r\n            }\r\n            return state\r\n        }\r\n\r\n        case 'SN/Profile/UPDATE_LIKE_COUNT': {\r\n            \r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.map(item => {\r\n                    if(item.id === action.id && !item.liked){\r\n                        item.likesCount = item.likesCount + 1\r\n                        item.liked = !item.liked \r\n                    } else if(item.id === action.id && item.liked) {\r\n                        item.likesCount = item.likesCount - 1 \r\n                        item.liked = !item.liked \r\n                    }\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        case 'SN/Profile/UPDATE_COMMENT_COUNT': {\r\n\r\n            return {\r\n                ...state,\r\n                postsData: state.postsData.map(item => {\r\n                    if(item.id === action.id)\r\n                        item.CommentsCount++\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    addPost: (newPostText: string) => ({type: 'SN/Profile/ADD_NEW_POST', newPostText} as const),\r\n    profileInfo: (profile: ProfileType) => ({type: 'SN/Profile/PROFILE_INFO', profile} as const),\r\n    myProfileInfo: (profile: ProfileType) => ({type: 'SN/Profile/My_PROFILE_INFO', profile} as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({type: 'SN/Profile/TOGGLE_FETCHING', isFetching} as const),\r\n    setStatus: (status: string) => ({type: 'SN/Profile/SET_STATUS', status} as const),\r\n    setPhoto: (photoUrl: PhotosType) => ({type: 'SN/Profile/SET_PHOTO', photoUrl} as const),\r\n    addNewComment: (id: number, newCommentText: string) => ({type: 'SN/Profile/ADD_NEW_COMMENT', id, newCommentText} as const),\r\n    updateLikeCount: (id: number) => ({type: 'SN/Profile/UPDATE_LIKE_COUNT', id} as const),\r\n    updateCommentCount: (id: number) => ({type: 'SN/Profile/UPDATE_COMMENT_COUNT', id} as const)\r\n}\r\n\r\nexport const check_auth = (userId: number): getThunkType => async (dispatch) => {\r\n    dispatch(actions.toggleIsFetching(true))\r\n    const data = await ProfileAPI.checkAuth(userId)\r\n    dispatch(actions.profileInfo(data))\r\n    dispatch(actions.toggleIsFetching(false))\r\n}\r\n\r\nexport const getStatus = (userId: number): getThunkType => async (dispatch) => {\r\n    \r\n    const data = await ProfileAPI.getStatus(userId)\r\n    dispatch(actions.setStatus(data))\r\n}\r\n\r\nexport const updateStatus = (status:string): getThunkType => async (dispatch) => {\r\n    const data = await ProfileAPI.updateStatus(status)\r\n        if (data.resultCode === ResultCodeEnum.Success) {\r\n            dispatch(actions.setStatus(status));\r\n        }\r\n}\r\n\r\nexport const updatePhoto = (photo: File): getThunkType => async (dispatch) => {\r\n    const data = await ProfileAPI.updateMainPhoto(photo)\r\n        if (data.resultCode === ResultCodeEnum.Success) {\r\n            dispatch(actions.setPhoto(data.data.photos));\r\n        }\r\n}\r\n\r\nexport const saveProfile = (profile: SaveProfileType): getThunkType => async (dispatch, getState) => {\r\n    const userId = getState().auth.id;\r\n    const response = await ProfileAPI.saveProfile(profile);\r\n\r\n    if (response.data.resultCode === ResultCodeEnum.Success) {\r\n        if(userId)\r\n            dispatch(check_auth(userId));\r\n        else throw new Error\r\n    } else {\r\n        dispatch(stopSubmit(\"editProfileData\", {_error: response.data.messages[0]}));\r\n        return Promise.reject(response.data.messages[0]);\r\n    }\r\n}\r\n\r\nexport const check_auth_me = (): getThunkType => async (dispatch, getState) => {\r\n    dispatch(actions.toggleIsFetching(true))\r\n    const myId = getState().auth.id;\r\n    const data = await ProfileAPI.checkAuth(myId)\r\n    dispatch(actions.myProfileInfo(data))\r\n    dispatch(actions.toggleIsFetching(false))\r\n}\r\n\r\n\r\nexport default profile_reducer\r\n\r\nexport type PostItemType = {\r\n    id: number,\r\n    fullName: string,\r\n    title: string,\r\n    avatar: string,\r\n    photo: string | null,\r\n    comments: Array<CommentsType>\r\n    likesCount: number,\r\n    CommentsCount: number,\r\n    liked: boolean\r\n}\r\n\r\n\r\ntype PhotosType = {\r\n    small: string | null\r\n    large: string | null\r\n}\r\n\r\ntype getThunkType = ThunkType<ActionsType | FormAction>\r\n\r\n","import {AuthAPI, LoginAPI, SecurityAPI, CaptchaEnum, ResultCodeEnum} from \"../api/api\";\r\nimport {stopSubmit, FormAction} from \"redux-form\";\r\nimport { check_auth_me } from \"./profile_reducer\";\r\nimport { ThunkAction } from \"redux-thunk\";\r\nimport { AppStateType, InferActionsTypes, ThunkType } from \"./store-redux\";\r\n\r\nlet initialState = {\r\n    id: null as number | null,\r\n    login: null as string | null,\r\n    email: null as string | null,\r\n    isAuth: false,\r\n    captcha: null as string | null\r\n}\r\n\r\ntype initialStateType = typeof initialState;\r\n\r\nlet header_reducer = (state = initialState, action : ActionsType): initialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'SN/Header/SET_NEW_AUTH':\r\n        case 'SN/Header/SET_NEW_CAPTCHA': {\r\n            return {\r\n                ...state,\r\n                ...action.data\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    setNewAuth: (id :number | null, login : string | null, email : string | null, isAuth: boolean) => ({type: 'SN/Header/SET_NEW_AUTH', data: {id, login, email, isAuth}} as const),\r\n    setNewCaptcha: (captcha: string) => ({type: 'SN/Header/SET_NEW_CAPTCHA', data: {captcha}} as const)\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\n\r\ntype GetThunkType = ThunkType<ActionsType | FormAction>\r\n\r\nexport const checkAuthMe = (): GetThunkType => async (dispatch) => {\r\n    const response = await AuthAPI.checkAuthMe()\r\n    if (response.resultCode === ResultCodeEnum.Success) {\r\n        let {id, login, email} = response.data\r\n        dispatch(actions.setNewAuth(id, login, email, true))\r\n    }\r\n}\r\n\r\nexport const checkLoginMe = (email: string | null, password: string | null, rememberMe: boolean, captcha : string | null):GetThunkType => async (dispatch) => {\r\n    const response = await LoginAPI.checkLogin(email, password, rememberMe, captcha)\r\n\r\n    if (response.data.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(checkAuthMe());\r\n        dispatch(check_auth_me());\r\n    } else {\r\n        if(response.data.resultCode === CaptchaEnum.Captcha){\r\n            dispatch(getCaptcha())\r\n        }\r\n        let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Some error!'\r\n        dispatch(stopSubmit('login', {_error: message}))\r\n    }\r\n}\r\n\r\nexport const logoutMe = (): GetThunkType => async (dispatch) => {\r\n    const response = await LoginAPI.logout()\r\n    if (response.data.resultCode === ResultCodeEnum.Success) {\r\n        dispatch(actions.setNewAuth(null, null, null, false))\r\n    }\r\n}\r\n\r\nexport const getCaptcha = (): GetThunkType => async (dispatch) => {\r\n    const response = await SecurityAPI.getCaptcha()\r\n    dispatch(actions.setNewCaptcha(response.data.url))\r\n}\r\n\r\nexport default header_reducer","import {InferActionsTypes} from \"./store-redux\";\r\n\r\nlet initialState = {\r\n    songs: [\r\n        [\r\n            \"Homeroad\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_09_-_Homeroad.mp3\"\r\n        ],\r\n        [\r\n            \"Interception\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_07_-_Interception.mp3\"\r\n        ],\r\n        [\r\n            \"Sentinel\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_04_-_Sentinel.mp3\"\r\n        ],\r\n        [\r\n            \"Great Expectations\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_05_-_Great_Expectations.mp3\"\r\n        ],\r\n        [\r\n            \"Downfall\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_08_-_Downfall.mp3\"\r\n        ],\r\n        [\r\n            \"Augmentations\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_01_-_Augmentations.mp3\"\r\n        ],\r\n        [\r\n            \"Illumination\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/no_curator/Kai_Engel/Satin/Kai_Engel_-_02_-_Illumination.mp3\"\r\n        ],\r\n        [\r\n            \"Cabaret\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_10_-_Cabaret.mp3\"\r\n        ],\r\n        [\r\n            \"Contention\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_03_-_Contention.mp3\"\r\n        ],\r\n        [\r\n            \"Dark Alleys\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/ccCommunity/Kai_Engel/Satin/Kai_Engel_-_06_-_Dark_Alleys.mp3\"\r\n        ],\r\n        [\r\n            \"Climb\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/Ziklibrenbib/The_Ghost_in_Your_Piano/The_Ghost_in_your_piano/The_Ghost_in_Your_Piano_-_01_-_Climb.mp3\"\r\n        ],\r\n        [\r\n            \"Adventure\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/Ziklibrenbib/The_Ghost_in_Your_Piano/The_Ghost_in_your_piano/The_Ghost_in_Your_Piano_-_03_-_Adventure.mp3\"\r\n        ],\r\n        [\r\n            \"Lullaby\",\r\n            \"https://files.freemusicarchive.org/storage-freemusicarchive-org/music/Ziklibrenbib/The_Ghost_in_Your_Piano/The_Ghost_in_your_piano/The_Ghost_in_Your_Piano_-_04_-_Lullaby.mp3\"\r\n        ]\r\n    ],\r\n    currentSong: 0,\r\n    currentTime: 0,\r\n    repeat: false,\r\n    random: false,\r\n    playing: false,\r\n    audio: null\r\n}\r\n\r\nexport type MusicInitialStateType = typeof initialState\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\n\r\nlet music_reducer = (state = initialState, action: ActionsType):MusicInitialStateType => {\r\n        switch (action.type) {\r\n            case 'SET_CURRENT_SONG':\r\n                return {\r\n                    ...state,\r\n                    currentSong: action.data,\r\n                    playing: true\r\n                }\r\n            case 'UPDATE_CURRENT_TIME':\r\n                return {\r\n                    ...state,\r\n                    currentTime: action.time\r\n                }\r\n            case 'TOGGLE_RANDOM':\r\n                return {\r\n                    ...state,\r\n                    random: !state.random\r\n                }\r\n            case 'TOGGLE_REPEAT':\r\n                return {\r\n                    ...state,\r\n                    repeat: !state.playing\r\n                }\r\n            case 'TOGGLE_PLAYING':\r\n                return {\r\n                    ...state,\r\n                    playing: !state.playing\r\n                }\r\n            default:\r\n                return state\r\n        }\r\n    return state\r\n}\r\n\r\nexport const actions = {\r\n    SetCurrent: (id: number) => ({ type: 'SET_CURRENT_SONG', data: id } as const),\r\n    updateCurrentTime: (time: any) => ({ type: 'UPDATE_CURRENT_TIME', time } as const),\r\n    togglePlaying: () => ({ type: 'TOGGLE_PLAYING' } as const),\r\n    toggleRepeat: () => ({ type: 'TOGGLE_REPEAT' } as const),\r\n    toggleRandom: () => ({ type: 'TOGGLE_RANDOM' } as const),\r\n}\r\n\r\nexport default music_reducer","import { faPause, faPlay, faStepBackward, faStepForward } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { AppStateType } from '../../redux/store-redux'\r\nimport { actions } from './../../redux/music_reducer';\r\nimport './../Music/Music.css'\r\n\r\nconst MusicPlayer = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const playing = useSelector((state: AppStateType) => state.music.playing)\r\n    const currentSong = useSelector((state: AppStateType) => state.music.currentSong)\r\n    const random = useSelector((state: AppStateType) => state.music.random)\r\n    const songs = useSelector((state: AppStateType) => state.music.songs)\r\n    const repeat = useSelector((state: AppStateType) => state.music.repeat)\r\n    const currentTimeState = useSelector((state: AppStateType) => state.music.currentTime)\r\n\r\n    const audio = useRef('audio_tag');\r\n\r\n    const [statevolum, setStateVolum] = useState(0.3)\r\n    const [dur, setDur] = useState(0)\r\n    const [currentTime, setCurrentTime] = useState(currentTimeState)\r\n\r\n    const SetCurrent = (id: number) => {\r\n        dispatch(actions.SetCurrent(id))\r\n    }\r\n    // Prev song\r\n    const prevSong = () => {\r\n        if (currentSong === 0) {\r\n            SetCurrent(songs.length - 1)\r\n        } else {\r\n            SetCurrent(currentSong - 1)\r\n        }\r\n    }\r\n    // Next song\r\n    const nextSong = () => {\r\n        if (currentSong === songs.length - 1) {\r\n            SetCurrent(0)\r\n        } else {\r\n            SetCurrent(currentSong + 1)\r\n        }\r\n    }\r\n\r\n    const handleEnd = () => {\r\n        // Check for random and repeat options\r\n        if (random) {\r\n            return dispatch({ type: 'SET_CURRENT_SONG', data: ~~(Math.random() * songs.length) })\r\n        } else {\r\n            if (repeat) {\r\n                nextSong()\r\n            } else if ((currentSong === songs.length - 1)) {\r\n                return\r\n            } else {\r\n                nextSong();\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleUpdateTime = (e: any) => {\r\n        setCurrentTime(e.target.currentTime)\r\n        dispatch(actions.updateCurrentTime(currentTime))\r\n    }\r\n\r\n    const togglePlaying = () => {\r\n        dispatch(actions.togglePlaying())\r\n    }\r\n    //@ts-ignore\r\n    const toggleAudio = () => audio.current.paused ? audio.current.play() : audio.current.pause();\r\n\r\n    useEffect(() => {\r\n        //@ts-ignore\r\n        audio.current.volume = statevolum;\r\n        //@ts-ignore\r\n        audio.current.currentTime = currentTime\r\n        if (playing) { toggleAudio() }\r\n    }, [currentSong])\r\n\r\n    useEffect(() => {\r\n        setCurrentTime(currentTimeState)\r\n        //@ts-ignore\r\n        audio.current.currentTime = currentTime\r\n    }, [currentTimeState])\r\n\r\n    return <div style = {{display: \"flex\", justifyContent: \"left\"}}>\r\n        <audio\r\n                //@ts-ignore\r\n                onTimeUpdate={(e) => handleUpdateTime(e)}\r\n                //@ts-ignore\r\n                onCanPlay={(e) => setDur(e.target.duration)}\r\n                onEnded={handleEnd}\r\n                //@ts-ignore\r\n                ref={audio}\r\n                type=\"audio/mpeg\"\r\n                preload='true'\r\n                src={songs[currentSong][1]} />\r\n        <div className=\"musicControls\">\r\n                <span className=\"prev\" onClick={prevSong}><FontAwesomeIcon icon={faStepBackward} /></span>\r\n                <span className=\"play\" onClick={() => { togglePlaying(); toggleAudio(); }}>\r\n                    <span className={!playing ? '' : 'hide'}><FontAwesomeIcon icon={faPlay} /></span>\r\n                    <span className={!playing ? 'hide' : ''}><FontAwesomeIcon icon={faPause} /></span>\r\n                </span>\r\n\r\n                <span className=\"next\" onClick={nextSong}><FontAwesomeIcon icon={faStepForward} /></span>\r\n        </div>\r\n        <span className=\"song\">{songs[currentSong][0]}</span>\r\n    </div>\r\n}\r\n\r\nexport default MusicPlayer","import {faSearch} from '@fortawesome/free-solid-svg-icons'\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport {Field, Form, Formik} from 'formik'\r\nimport React, {useState} from 'react'\r\nimport {useSelector} from 'react-redux'\r\nimport {NavLink} from 'react-router-dom'\r\nimport photoUser from '../../img/user.svg'\r\nimport {AppStateType} from '../../redux/store-redux'\r\nimport {UserType} from '../../Types/Types'\r\n\r\nconst HeaderSearchForm = () => {\r\n\r\n    const friends = useSelector((state: AppStateType) => state.usersPage.friends)\r\n    const [searchFriends, setSearchFriends] = useState([])\r\n    const [isFocuced, setIsFocused] = useState(false)\r\n\r\n    const submit = (values: FormValuesType, {setSubmitting}: { setSubmitting: (isSubmitting: boolean) => void }) => {\r\n        setSubmitting(false)\r\n        let searchFriends = friends.filter((item: UserType) => {\r\n            return item.name && item.name.toLowerCase().includes(values.fullName)\r\n        }) as Array<UserType>\r\n        //@ts-ignore\r\n        setSearchFriends(searchFriends)\r\n        console.log(values.fullName)\r\n        console.log(searchFriends)\r\n    }\r\n\r\n    const toggleFocus = () => {\r\n        const flag = !isFocuced\r\n        setIsFocused(flag)\r\n    }\r\n\r\n    function onClickClose(elem: HTMLElement) {\r\n        function outsideClickListener(event: any) {\r\n            if (elem && !elem.contains(event.target) && isVisible(elem)) {\r\n                setIsFocused(false)\r\n                document.removeEventListener('click', outsideClickListener);\r\n            }\r\n        }\r\n\r\n        document.addEventListener('click', outsideClickListener)\r\n    }\r\n\r\n    document.addEventListener(\"click\", () => {\r\n        const accountDrop = document.getElementById(\"subResulSearch\");\r\n        //@ts-ignore\r\n        onClickClose(accountDrop)\r\n    })\r\n\r\n    function isVisible(elem: HTMLElement) {\r\n        return !!elem && !!(elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length);\r\n    }\r\n\r\n    return <div style={{position: \"relative\"}}>\r\n        <Formik\r\n            initialValues={{\r\n                fullName: \"\",\r\n            }}\r\n            onSubmit={submit}>\r\n            {\r\n                ({values, handleChange, submitForm}) => (\r\n                    <Form style={{position: \"relative\"}}>\r\n                        <Field type=\"text\" name=\"fullName\" autoComplete=\"off\" onFocus={toggleFocus}\r\n                               placeholder=\"Enter name...\" value={values.fullName} onChange={(e: any) => {\r\n                            handleChange(e);\r\n                            setTimeout(submitForm, 0)\r\n                        }} style={{\r\n                            borderRadius: \"20px\",\r\n                            border: \"1px\",\r\n                            outline: \"none\",\r\n                            height: \"22px\",\r\n                            padding: \"5px 19px\"\r\n                        }}/>\r\n                        <FontAwesomeIcon icon={faSearch}\r\n                                         style={{position: \"absolute\", top: \"4px\", right: \"12px\", color: \"#4a76a8\"}}/>\r\n                    </Form>\r\n                )\r\n            }\r\n        </Formik>\r\n        {\r\n            searchFriends.length > 0 && isFocuced &&\r\n            <div id=\"subResultSearch\" onClick={() => setTimeout(() => setIsFocused(false), 100)} style={{\r\n                display: \"flex\",\r\n                flexDirection: \"column\",\r\n                border: \"1px solid #ccc\",\r\n                width: \"196px\",\r\n                borderRadius: \"5px\",\r\n                position: \"absolute\",\r\n                top: \"36px\",\r\n                background: \"#fff\",\r\n                padding: \"20px\",\r\n                zIndex: 1005\r\n            }}>\r\n                {searchFriends.map((item, index) => {\r\n                    if (index < 7) {\r\n                        return <div style={{display: \"flex\", height: \"30px\", marginTop: \"10px\"}}>\r\n                            {/*@ts-ignore */}\r\n                            {<NavLink to={`/profile/${item.id}`}>\r\n                                {/*@ts-ignore */}\r\n                                <img src={item.photos.large ? item.photos.large : photoUser}\r\n                                     style={{width: \"25px\", height: \"25px\", margin: 0, borderRadius: \"50%\"}}\r\n                                     alt=\"PHOTOS\"/>\r\n                                {/*@ts-ignore */}\r\n                                <span style={{marginLeft: \"15px\"}}>{item.name}</span>\r\n                            </NavLink>}\r\n                        </div>\r\n                    }\r\n                })}\r\n            </div>\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default HeaderSearchForm\r\n\r\ntype FormValuesType = {\r\n    fullName: string\r\n}","import React, { useState } from 'react';\r\nimport s from './Header.module.css';\r\nimport {NavLink} from \"react-router-dom\";\r\nimport userPhoto from '../../img/user(1).svg'\r\nimport logoImg from '../../img/logo.png'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../redux/store-redux';\r\nimport { logoutMe } from '../../redux/header_reducer';\r\nimport MusicPlayer from './MusicPlayer';\r\nimport HeaderSearchForm from './HeaderSearchForm';\r\n\r\nconst Header: React.FC = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const isAuth = useSelector((state: AppStateType) => state.auth.isAuth)\r\n    const photos = useSelector((state: AppStateType) => state.profilePage.photos)\r\n    const login = useSelector((state: AppStateType) => state.auth.login)\r\n    const [isLogInfoMode, setLogInfoMode] = useState(false)\r\n\r\n    const logout = () => {\r\n        dispatch(logoutMe())\r\n    }\r\n\r\n    function onClickClose(elem: HTMLElement) {\r\n        function outsideClickListener(event: any) {\r\n            if (elem && !elem.contains(event.target) && isVisible(elem)) { \r\n                setLogInfoMode(false)\r\n                 document.removeEventListener('click', outsideClickListener);\r\n            }\r\n        }\r\n        document.addEventListener('click', outsideClickListener)\r\n    }\r\n    \r\n    document.addEventListener(\"click\", () => {  \r\n        const accountDrop = document.getElementById(\"accountDrop\"); \r\n        //@ts-ignore\r\n        onClickClose(accountDrop)\r\n    })\r\n\r\n    function isVisible(elem: HTMLElement) {\r\n        return !!elem && !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\r\n    }\r\n\r\n    return <header className={s.header}>\r\n        <NavLink className=\"logo\" to='/'><img src={logoImg} /></NavLink>\r\n        <HeaderSearchForm />\r\n        <MusicPlayer />\r\n        <div className={s.authArea} id=\"Drop\" style={{height: \"100%\"}}>\r\n            { isAuth\r\n                ? <div className={s.accountInfo} onClick = {() => setLogInfoMode(true)}>\r\n                    { photos \r\n                        ? photos.large && <img src={photos.large} className={s.userImg}/> \r\n                        : <img src={userPhoto} className={s.userImg}/>}\r\n                    {login}\r\n                    {\r\n                        isLogInfoMode \r\n                        && <div className={s.accountDrop} id=\"accountDrop\">\r\n                            <NavLink to=\"/profile\" className={s.login}>{login}</NavLink>\r\n                            <button onClick={logout} className = \"btn\" style={{marginTop: \"15px\"}}>logout</button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n                : <NavLink to=\"/login\">Login</NavLink> }\r\n        </div>\r\n\r\n    </header>\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\nimport Header from \"./Header\";\r\n\r\nconst HeaderContainer = () => {\r\n\r\n    return <Header />\r\n}\r\n\r\nexport default HeaderContainer","import {checkAuthMe} from \"./header_reducer\";\r\nimport {check_auth_me} from \"./profile_reducer\";\r\nimport {getFriends} from '../redux/users_reducer'\r\nimport { InferActionsTypes, ThunkType } from \"./store-redux\";\r\n\r\n\r\nlet initialState = {\r\n    initialized: false\r\n}\r\n\r\ntype InitialStateType = typeof initialState\r\n\r\nlet app_reducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'SN/APP/INIT': {\r\n            return {\r\n                ...state,\r\n                initialized: true\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    initialize: () => ({type: 'SN/APP/INIT'} as const)\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype GetThunkType = ThunkType<ActionsType>\r\n\r\nexport const init = (): GetThunkType => async (dispatch) => {\r\n    let promise = dispatch(checkAuthMe())\r\n    let promise2 = dispatch(getFriends)\r\n\r\n    Promise.all([promise])\r\n        .then(() => {\r\n            dispatch(check_auth_me())\r\n        })\r\n        .then(()=> {\r\n            dispatch(getFriends())\r\n            dispatch(actions.initialize());\r\n        })\r\n}\r\n\r\nexport default app_reducer","\r\nlet initialState = {\r\n    navData: [\r\n        {\r\n            \"id\": 1,\r\n            \"href\": \"News\",\r\n            \"name\": \"News\",\r\n            \"photo\": \"https://image.flaticon.com/icons/svg/3158/3158703.svg\"\r\n        },\r\n        {\r\n            \"id\": 2,\r\n            \"href\": \"profile\",\r\n            \"name\": \"Profile\",\r\n            \"photo\": \"https://image.flaticon.com/icons/svg/1077/1077114.svg\"\r\n        },\r\n        {\r\n            \"id\": 3,\r\n            \"href\": \"dialogs\",\r\n            \"name\": \"Message\",\r\n            \"photo\": \"https://image.flaticon.com/icons/svg/2462/2462719.svg\"\r\n        },\r\n        {\r\n            \"id\": 4,\r\n            \"href\": \"music\",\r\n            \"name\": \"Music\",\r\n            \"photo\": \"https://image.flaticon.com/icons/svg/876/876817.svg\"\r\n        },\r\n        {\r\n            \"id\": 5,\r\n            \"href\": \"users\",\r\n            \"name\": \"Users\",\r\n            \"photo\": \"https://image.flaticon.com/icons/svg/681/681494.svg\"\r\n        },\r\n        {\r\n            \"id\": 6,\r\n            \"href\": \"settings\",\r\n            \"name\": \"Settings\",\r\n            \"photo\": \"https://image.flaticon.com/icons/svg/889/889744.svg\"\r\n        },\r\n        {\r\n            \"id\": 7,\r\n            \"href\": \"chat\",\r\n            \"name\": \"Chat\",\r\n            \"photo\": \"https://image.flaticon.com/icons/svg/889/889744.svg\"\r\n        }\r\n    ] as Array<NavDataItemType>\r\n}\r\n\r\nexport type NavbarInitialStateType = typeof initialState\r\n\r\nlet navbar_reducer = (state = initialState, action: any):NavbarInitialStateType => {\r\n\r\n    return state\r\n}\r\n\r\nexport default navbar_reducer\r\n\r\nexport type NavDataItemType = {\r\n    id: number\r\n    href: string\r\n    name: string\r\n    photo: string\r\n}\r\n","import { InferActionsTypes } from \"./store-redux\";\r\nimport { stat } from \"fs\";\r\n\r\nlet id = 3;\r\n\r\nlet initialState = {\r\n    news: [\r\n        {\r\n            id: 1,\r\n            fullName: ' ',\r\n            title: \"Hello everyone. it is my first news post!\",\r\n            avatar: \"http://a824.phobos.apple.com/us/r30/Purple3/v4/47/47/e2/4747e282-b06d-8c33-c4d8-b9c22db8abad/pr_source.png?downloadKey=1422036762_0750e892c607d16376f15f0523f383d6\",\r\n            photo: \"https://sites.google.com/site/prirodanaha/_/rsrc/1468741750018/home/%D0%96%D0%B8%D0%B2%D0%B0%D1%8F-%D0%BF%D1%80%D0%B8%D1%80%D0%BE%D0%B4%D0%B0.jpg\",\r\n            comments: [{userId: 1, commentId: 1, fullName: ' ', text: \"its awesome!\", photo: 'https://i.pinimg.com/736x/8f/f6/08/8ff60864af4b3eebc06a8bbabcf0c21b.jpg'}, {userId: 2, commentId: 2, fullName: ' ', text: \"How are you?\", photo: 'https://avatars.mds.yandex.net/get-zen_doc/229614/pub_5db308ea5ba2b500b6bb0d1d_5db309208d5b5f00afb1fe92/scale_1200'}],\r\n            likesCount: 5,\r\n            CommentsCount: 2,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 2,\r\n            fullName: ' ',\r\n            title: \"Today wether is good\",\r\n            avatar: \"https://yt3.ggpht.com/a/AATXAJwu0fvICSBsYl9qzOz1sjoyoxfEP2aPplVF7d9H=s900-c-k-c0xffffffff-no-rj-mo\",\r\n            photo: \"https://content.onliner.by/news/original_size/9b099955c46555811d26c14efdb3af00.jpeg\",\r\n            comments: [{userId: 2, commentId: 2, fullName: ' ', text: \"Kazakhstan!!!\", photo: 'https://www.trendsmap.com/ipx/https://pbs.twimg.com/profile_images/926488420645523456/hwKSfqNj.jpg'}],\r\n            likesCount: 13,\r\n            CommentsCount: 1,\r\n            liked: true\r\n        },\r\n        {\r\n            id: 3,\r\n            fullName: '  253',\r\n            title: \"Im go to school\",\r\n            avatar: \"https://yt3.ggpht.com/a/AATXAJwNrBajG2GHjhDoh5dd4Ol6bgmpNmIFCcA8DeLvaA=s900-c-k-c0xffffffff-no-rj-mo\",\r\n            photo: \"https://vsluh.ru/uploads/2020/03/17/154154/fixed_large_b8213f97-e5d7-49ea-8085-2195204a7423.jpg\",\r\n            comments: [{userId: 3, commentId: 3, fullName: ' ', text: \"COol!\", photo: 'https://yt3.ggpht.com/a/AATXAJz96SEqjCTeAd4fIKN-cMmEeqGU26eHSkwB9JISgg=s900-c-k-c0xffffffff-no-rj-mo'}],\r\n            likesCount: 12,\r\n            CommentsCount: 1,\r\n            liked: false\r\n        },\r\n        {\r\n            id: 4,\r\n            fullName: '   ',\r\n            title: \"Why he not me?!\",\r\n            avatar: \"https://yt3.ggpht.com/a/AATXAJw0vq_YrFUkbgA2WYAGe0upS4MeD1QJZomS4QaE=s900-c-k-c0xffffffff-no-rj-mo\",\r\n            photo: \"https://s.ura.news/images/news/upload/news/426/025/1052426025/2f82b66cdc059a737ef34fe31281c88e_760x0_700.800.0.0.jpg\",\r\n            comments: [{userId: 4, commentId: 4, fullName: ' ', text: \"Go walk with me>\", photo: 'https://cdn.freelance.ru/img/portfolio/pics/00/3A/2C/3812566.jpg?mt=d239b33b'}],\r\n            likesCount: 1,\r\n            CommentsCount: 1,\r\n            liked: false\r\n        }\r\n    ] as Array<NewsItemType>,\r\n    stories: [\r\n        {id: 1, userId: 1, viewed: false, photo: 'https://avatars.mds.yandex.net/get-pdb/1996997/9c893ac4-b0d0-48ca-ba75-5c79bccf41f8/s375'},\r\n        {id: 2, userId: 2, viewed: false, photo: 'https://photodzen.com/content/images/lines_2_2.jpg'},\r\n        {id: 3, userId: 3, viewed: false, photo: 'https://otvet.imgsmail.ru/download/497424eb0af0d51913941be13c03b052_i-18.jpg'}\r\n    ] as Array<StoriesType>\r\n}\r\n\r\nexport type NewsInitialStateType = typeof initialState\r\n\r\n\r\nlet news_reducer = (state = initialState, action: ActionsType): NewsInitialStateType => {\r\n    \r\n\r\n    switch (action.type) {\r\n\r\n        case 'SN/News/ADD_NEW_COMMENT': {\r\n            if (action.newCommentText.length > 0){\r\n                return {\r\n                    ...state,\r\n                    news: state.news.map(item => {\r\n                        if(item.id === action.id)\r\n                            item.comments = [...item.comments, {userId: 5, fullName: 'dikushan00', commentId: 5, text: action.newCommentText, photo: ''}]\r\n                        return item\r\n                    })\r\n                }\r\n                id++;\r\n            }\r\n            return state\r\n        }\r\n\r\n        case 'SN/News/UPDATE_LIKE_COUNT': {\r\n            \r\n            return {\r\n                ...state,\r\n                news: state.news.map(item => {\r\n                    if(item.id === action.id && !item.liked){\r\n                        item.likesCount = item.likesCount + 1\r\n                        item.liked = !item.liked \r\n                    } else if(item.id === action.id && item.liked) {\r\n                        item.likesCount = item.likesCount - 1 \r\n                        item.liked = !item.liked \r\n                    }\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        case 'SN/News/UPDATE_COMMENT_COUNT': {\r\n\r\n            return {\r\n                ...state,\r\n                news: state.news.map(item => {\r\n                    if(item.id === action.id)\r\n                        item.CommentsCount++\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        case 'SN/News/VIEW_STORY': {\r\n\r\n            return {\r\n                ...state,\r\n                stories: state.stories.map((item) => {\r\n                    if(item.id === action.id)\r\n                        item.viewed = true\r\n                    return item\r\n                })\r\n            }\r\n        }\r\n\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    addNewComment: (id: number, newCommentText: string) => ({type: 'SN/News/ADD_NEW_COMMENT', id, newCommentText} as const),\r\n    updateLikeCount: (id: number) => ({type: 'SN/News/UPDATE_LIKE_COUNT', id} as const),\r\n    updateCommentCount: (id: number) => ({type: 'SN/News/UPDATE_COMMENT_COUNT', id} as const),\r\n    viewStory: (id: number) => ({type: 'SN/News/VIEW_STORY', id} as const)\r\n} \r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\n\r\nexport default news_reducer\r\n\r\n\r\ntype CommentsType = {\r\n    userId: number\r\n    commentId: number\r\n    fullName: string\r\n    text: string\r\n    photo: string\r\n}\r\n\r\nexport type StoriesType = {\r\n    id: number\r\n    userId: number\r\n    viewed: boolean\r\n    photo: string\r\n}\r\n\r\nexport type NewsItemType = {\r\n    id: number,\r\n    fullName: string,\r\n    title: string,\r\n    avatar: string,\r\n    photo: string,\r\n    comments: Array<CommentsType>,\r\n    likesCount: number,\r\n    CommentsCount: number,\r\n    liked: boolean\r\n}","import {MessageApiType} from \"../components/Chat/Chat\";\r\nimport {StatusType} from \"../redux/chat_reducer\";\r\n\r\nlet ws: WebSocket | null = null\r\nlet subscribers = {\r\n    messagesSubs: [] as MessageSubscriberType[],\r\n    statusSubs: [] as StatusSubscriberType[]\r\n}\r\n\r\ntype EventTypes = \"statusSubs\" | \"messagesSubs\"\r\nconst closeHandler = () => {\r\n    notifyStatusChanging(\"pending\")\r\n    setTimeout(createChanel, 3000)\r\n}\r\nlet messageHandler = (e: MessageEvent) => {\r\n    let messagesData = JSON.parse(e.data)\r\n    subscribers.messagesSubs.forEach(s => s(messagesData))\r\n}\r\nlet openHandler = () => {\r\n    notifyStatusChanging(\"ready\")\r\n}\r\nlet errorHandler = () => {\r\n    notifyStatusChanging(\"error\")\r\n}\r\n\r\nconst notifyStatusChanging = (status: StatusType) => {\r\n    subscribers.statusSubs.forEach(s => s(status))\r\n}\r\nconst cleanUp = () => {\r\n    ws && ws.removeEventListener(\"close\", closeHandler)\r\n    ws && ws.removeEventListener(\"message\", messageHandler)\r\n    ws && ws.removeEventListener(\"open\", openHandler)\r\n    ws && ws.removeEventListener(\"error\", errorHandler)\r\n    notifyStatusChanging(\"pending\")\r\n}\r\n\r\nfunction createChanel() {\r\n    cleanUp()\r\n    ws && ws.close()\r\n    ws = new WebSocket(\"wss://social-network.samuraijs.com/handlers/ChatHandler.ashx\")\r\n    ws && ws.addEventListener(\"close\", closeHandler)\r\n    ws && ws.addEventListener(\"open\", openHandler)\r\n    ws && ws.addEventListener(\"error\", errorHandler)\r\n    ws && ws.addEventListener(\"message\", messageHandler)\r\n    notifyStatusChanging(\"pending\")\r\n}\r\n\r\nexport const ChatApi = {\r\n    start() {\r\n        createChanel()\r\n    },\r\n    stop() {\r\n        subscribers.statusSubs = []\r\n        subscribers.messagesSubs = []\r\n        ws && ws.close()\r\n        cleanUp()\r\n    },\r\n    subscribe(event: EventTypes, subscriber: MessageSubscriberType | StatusSubscriberType) {\r\n        //@ts-ignore\r\n        subscribers[event].push(subscriber)\r\n    },\r\n    unsubscribe(event: EventTypes, subscriber: MessageSubscriberType | StatusSubscriberType) {\r\n        //@ts-ignore\r\n        subscribers = subscribers[event].filter(item => item !== subscriber)\r\n    },\r\n    sendMessage(message: string) {\r\n        ws && ws.send(message)\r\n    }\r\n}\r\n\r\nexport type MessageSubscriberType = (messages: MessageApiType[]) => void\r\nexport type StatusSubscriberType = (status: StatusType) => void\r\n","import {InferActionsTypes, ThunkType} from \"./store-redux\";\r\nimport {MessageApiType} from \"../components/Chat/Chat\";\r\nimport {ChatApi} from \"../api/chat-api\";\r\nimport {Dispatch} from \"redux\";\r\nimport {v1} from \"uuid\"\r\n\r\ntype MessageType = MessageApiType & { id: string }\r\n\r\nlet initialState = {\r\n    messages: [] as MessageType[],\r\n    status: null as StatusType | null\r\n}\r\n\r\ntype InitialStateType = typeof initialState\r\nexport type StatusType = \"pending\" | \"ready\" | \"error\"\r\n\r\nlet chat_reducer = (state = initialState, action: ActionsType): InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'SN/CHAT/MESSAGES_RECEIVED': {\r\n            return {\r\n                ...state,\r\n                messages: [...state.messages, ...action.messages].map(item => ({\r\n                    ...item,\r\n                    id: v1()\r\n                })).filter((item, index, array) => index >= array.length - 100)\r\n            }\r\n        }\r\n        case 'SN/CHAT/STATUS_CHANGED': {\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const actions = {\r\n    messagesReceived: (messages: MessageApiType[]) => ({type: 'SN/CHAT/MESSAGES_RECEIVED', messages} as const),\r\n    statusChanged: (status: StatusType) => ({type: 'SN/CHAT/STATUS_CHANGED', status} as const),\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\ntype GetThunkType = ThunkType<ActionsType>\r\n\r\nlet _newMessageHandler: (((messages: MessageApiType[]) => void) | null) = null\r\nconst newMessageHandler = (dispatch: Dispatch) => {\r\n    if (_newMessageHandler === null) {\r\n        _newMessageHandler = (messages: MessageApiType[]) =>\r\n            dispatch(actions.messagesReceived(messages))\r\n    }\r\n\r\n    return _newMessageHandler\r\n}\r\nlet _newStatusHandler: (((status: StatusType) => void) | null) = null\r\nconst newStatusHandler = (dispatch: Dispatch) => {\r\n    if (_newStatusHandler === null) {\r\n        _newStatusHandler = (status: StatusType) =>\r\n            dispatch(actions.statusChanged(status))\r\n    }\r\n\r\n    return _newStatusHandler\r\n}\r\nexport const startMessagesListening = (): GetThunkType => async (dispatch) => {\r\n    ChatApi.subscribe(\"messagesSubs\", newMessageHandler(dispatch))\r\n}\r\nexport const stopMessagesListening = (): GetThunkType => async (dispatch) => {\r\n    ChatApi.unsubscribe(\"messagesSubs\", newMessageHandler(dispatch))\r\n}\r\nexport const startStatusListening = (): GetThunkType => async (dispatch) => {\r\n    ChatApi.subscribe(\"statusSubs\", newStatusHandler(dispatch))\r\n}\r\nexport const stopStatusListening = (): GetThunkType => async (dispatch) => {\r\n    ChatApi.unsubscribe(\"statusSubs\", newStatusHandler(dispatch))\r\n}\r\nexport const sendMessage = (message: string): GetThunkType => async () => {\r\n    ChatApi.sendMessage(message)\r\n}\r\n\r\nexport default chat_reducer","import dialogs_reducer from \"./dialogs_reducer\";\r\nimport profile_reducer from \"./profile_reducer\";\r\nimport navbar_reducer from \"./navbar_reducer\";\r\nimport {applyMiddleware, combineReducers, createStore, compose, Action} from 'redux'\r\nimport news_reducer from \"./news_reducer\";\r\nimport users_reducer from \"./users_reducer\";\r\nimport header_reducer from \"./header_reducer\";\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport thunkMiddleWare from 'redux-thunk'\r\nimport app_reducer from \"./app_reducer\";\r\nimport { ThunkAction } from 'redux-thunk';\r\nimport music_reducer from \"./music_reducer\";\r\nimport chat_reducer from \"./chat_reducer\";\r\n\r\nlet reducers = combineReducers({\r\n    dialogPage: dialogs_reducer,\r\n    profilePage: profile_reducer,\r\n    navbar: navbar_reducer,\r\n    newsPage: news_reducer,\r\n    usersPage: users_reducer,\r\n    auth: header_reducer,\r\n    app: app_reducer,\r\n    music: music_reducer,\r\n    chat: chat_reducer,\r\n    form: formReducer\r\n})\r\n\r\ntype RootReducerType = typeof reducers\r\nexport type AppStateType = ReturnType<RootReducerType>\r\n\r\ntype PropertiesTypes<T> = T extends {[key: string]: infer U} ? U : never\r\nexport type InferActionsTypes<T extends {[key: string]: (...args: any[])=>any}> = ReturnType<PropertiesTypes<T>>\r\n\r\nexport type ThunkType<A extends Action> = ThunkAction<Promise<void>, AppStateType, unknown, A >\r\n\r\n// @ts-ignore\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleWare)));\r\n\r\nexport default store\r\n\r\n","import React, {useEffect, useState, ChangeEvent} from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../../redux/store-redux';\r\nimport { updateStatus } from './../../../redux/profile_reducer';\r\n\r\nconst ProfileStatusWithHooks: React.FC = (props) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const statusWord = useSelector((state: AppStateType) => state.profilePage.status)\r\n    const [editMode, setEditMode] = useState(false)\r\n    const [status, setStatus] = useState(statusWord)\r\n\r\n    useEffect( () => {\r\n        setStatus(status)\r\n    }, [status] )\r\n\r\n    const toggleEditMode = () => {\r\n        setEditMode(!editMode)\r\n        if (editMode) dispatch(updateStatus(status))\r\n    }\r\n\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.target.value)\r\n    }\r\n\r\n    return <div>\r\n        { editMode\r\n            ? <input onChange={onStatusChange} autoFocus={true} onBlur={toggleEditMode} type=\"text\" value={status}/>\r\n            : <span onDoubleClick={toggleEditMode} style = {{cursor: \"pointer\"}}>{status || '   '}</span>}\r\n    </div>\r\n}\r\n\r\nexport default ProfileStatusWithHooks;","import React, { useState } from 'react';\r\nimport { reduxForm, Field, InjectedFormProps } from 'redux-form';\r\nimport { Element } from '../../common/FormControl/FormControl';\r\nimport style from '../../common/FormControl/FormControl.module.css'\r\nimport  s from './ProfileInfo.module.css'\r\nimport { SaveProfileType } from '../../../Types/Types';\r\n\r\nconst Input = Element('input')\r\nconst Textarea1 = Element('textarea')\r\nconst Textarea2 = Element('textarea')\r\nconst Checkbox = Element('input')\r\n\r\ntype LoginFormValuesKeys = Extract<keyof ProfileFormValuesType, string>\r\n\r\nconst ProfileDataForm: React.FC<PropsType & InjectedFormProps<ProfileFormValuesType, PropsType>> = (props) => {\r\n    return <form onSubmit = {props.handleSubmit} style={{position:'relative'}}>\r\n        <button className={'btn ' + s.btn}>Save</button>\r\n        {props.error && <div className={style.commonError}>{props.error}</div>}\r\n        <span>{props.profile.fullName}</span>\r\n        <div>\r\n            <b>About me: </b>\r\n            <Field placeholder='about me..' name='aboutMe' component={Textarea1}/>\r\n        </div>\r\n        <div>\r\n            <b>Looking for a job: </b>\r\n            <span><Field placeholder='Looking for a job..' name='lookingForAJob' component={Checkbox} type='checkbox' /></span>\r\n        </div>\r\n        <div>\r\n            <b>My work skills: </b>\r\n            <Field placeholder='description..' name='lookingForAJobDescription' component={Textarea2}/>\r\n        </div>\r\n        <div>\r\n            <b>Contacts</b>: { props.profile.contacts && Object.keys(props.profile.contacts).map(key => {\r\n                return <Field key={key} placeholder={key} name={'contacts.' + key} component = {Input}/>})}\r\n        </div>\r\n    </form>\r\n}\r\n\r\nexport const ProfileDataFormRedux = reduxForm<ProfileFormValuesType, PropsType>({form: 'editProfileData'})(ProfileDataForm)\r\n\r\n\r\ntype PropsType = {\r\n    handleSubmit: () => {}\r\n    error: string\r\n    profile: SaveProfileType\r\n}\r\nexport type ProfileFormValuesType = {\r\n    aboutMe: string\r\n    lookingForAJobDescription: string\r\n    lookingForAJob: boolean\r\n}","\r\n\r\nexport const base64StringtoFile = (base64String: string, filename: string) => {\r\n    if(base64String && base64String.length && base64String.length > 0){\r\n        var arr = base64String.split(','),\r\n        //@ts-ignore\r\n        mime = arr[0].match(/:(.*?);/)[1],\r\n        bstr = atob(arr[1]), n = bstr.length, \r\n        u8arr = new Uint8Array(n)\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n)\r\n      }\r\n      return new File([u8arr], filename, {type: mime})\r\n    }\r\n  }\r\n\r\n    \r\nexport const getCroppedImg = (image: HTMLImageElement, crop: ReactCrop.Crop, fileName: string) => {\r\n  const canvas = document.createElement('canvas');\r\n  const scaleX = image.naturalWidth / image.width;\r\n  const scaleY = image.naturalHeight / image.height;\r\n  canvas.width = crop.width;\r\n  canvas.height = crop.height;\r\n  const ctx = canvas.getContext('2d');\r\n\r\n  ctx && ctx.drawImage(\r\n    image,\r\n    crop.x * scaleX,\r\n    crop.y * scaleY,\r\n    crop.width * scaleX,\r\n    crop.height * scaleY,\r\n    0,\r\n    0,\r\n    crop.width,\r\n    crop.height\r\n  )\r\n\r\n  return new Promise((resolve, reject) => {\r\n      canvas.toBlob(blob => {\r\n        if (!blob) {\r\n          console.error('Canvas is empty');\r\n          return;\r\n        }\r\n        //@ts-ignore\r\n        blob.name = fileName; \r\n        let reader = new FileReader()\r\n        reader.readAsDataURL(blob) \r\n        reader.onload = function() {\r\n        const myFilename = \"previewFile.jpg\"\r\n        //@ts-ignore\r\n        const croppedImageFile = base64StringtoFile(reader.result, myFilename)\r\n        const croppedImageUrl = window.URL.createObjectURL(blob)\r\n        let newCropObject = {\r\n          croppedImageFile,\r\n          croppedImageUrl\r\n        }\r\n        resolve(newCropObject);\r\n        };\r\n      }, 'image/jpeg');\r\n    });\r\n}\r\n\r\nexport const downloadCroppedImg = (url: string) => {\r\n  var a = document.createElement('a')\r\n  a.href = url\r\n  a.download = 'avatar.jpeg'\r\n  document.body.appendChild(a);\r\n  a.click();\r\n  document.body.removeChild(a);\r\n}","import React from 'react'\r\nimport Dropzone from 'react-dropzone'\r\nimport  s from './ProfileInfo.module.css'\r\n\r\nconst DropzoneAva: React.FC<PropsType> = ({setIsLoadImg, setSrc}) => {\r\n\r\n    const handleDrop = (files: any, rejectedFiles: any) => {\r\n        if(files && files.length > 0){\r\n            setIsLoadImg(true)\r\n            const reader = new FileReader();\r\n            reader.addEventListener('load', () =>\r\n                setSrc( reader.result )\r\n            );\r\n            reader.readAsDataURL(files[0]);\r\n        }\r\n    }\r\n\r\n    return <Dropzone onDrop={handleDrop} multiple = {false} accept = {\"image/*\"} maxSize={8000000}>\r\n        {({ getRootProps, getInputProps }) => (\r\n            <div {...getRootProps()} className = {s.dropzone}>\r\n                <p>Drop files here, or click to select files</p>\r\n                <input {...getInputProps()} />\r\n            </div>\r\n        )}\r\n  </Dropzone>\r\n\r\n}\r\n\r\nexport default DropzoneAva\r\n\r\n\r\ntype PropsType = {\r\n    setIsLoadImg: (b: boolean) => void\r\n    setSrc: (url: string | ArrayBuffer | null) => void\r\n}","import  s from './ProfileInfo.module.css'\r\nimport photoUser from '../../../img/user.svg'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons'\r\nimport  React, { useState } from 'react';\r\nimport { getCroppedImg } from '../../utils/Validators/cropImgFunctions';\r\nimport  ReactCrop  from 'react-image-crop';\r\nimport DropzoneAva from './DropzoneAva';\r\n\r\nconst AvatarPhoto: React.FC<PropsType> = ({avatar, fullName, isOwner, updatePhoto}) => {\r\n\r\n    const [isBigMode, setBigMode] = useState(false)\r\n\r\n    if(isBigMode) {\r\n        document.body.classList.add('pop_overflow')\r\n    } else {\r\n        document.body.classList.remove('pop_overflow')\r\n    }\r\n\r\n    return <div className={s.avaArea}>\r\n        <img src={ avatar || photoUser } alt=\"photo\" className={s.avaImg} onClick = {() => setBigMode(true)}/>\r\n        <span className = {s.avaHover}>\r\n            <FontAwesomeIcon icon={faSearch} onClick = {() => setBigMode(true)}/> \r\n        </span>\r\n        {\r\n            isBigMode \r\n                && <AvatarBigMode \r\n                    isBigMode = {isBigMode} \r\n                    setBigMode = {setBigMode} \r\n                    avatarPhoto = {avatar} \r\n                    fullName = {fullName} \r\n                    isOwner = {isOwner}\r\n                    updatePhoto = {updatePhoto}/>\r\n        }\r\n    </div>\r\n}\r\n\r\nconst AvatarBigMode: React.FC<BigModeType> = ({ isBigMode, setBigMode, avatarPhoto, fullName, isOwner, updatePhoto}) => {\r\n    \r\n    const [imageRef, setImageRef] = useState(null as null | HTMLImageElement)\r\n    const [isLoadImg, setIsLoadImg] = useState(false)\r\n    const [src, setSrc] = useState(null as string | ArrayBuffer | null)\r\n    const [croppedObject, setCroppedObject] = useState({\r\n            croppedImageFile: null as null | File,\r\n            croppedImageUrl: '',\r\n        } as CroppedImgType | null)\r\n    const [crop, setCrop] = useState({\r\n          unit: \"%\" as \"%\" | \"px\" | undefined,\r\n          width: 30,\r\n          height: 30,\r\n          x: 0,\r\n          y: 0,\r\n          aspect: 1 / 1 as number\r\n        })\r\n\r\n    const onImageLoaded = (image: HTMLImageElement) => {\r\n        setImageRef(image)\r\n      };\r\n    \r\n    const onCropComplete = (crop: ReactCrop.Crop) => {\r\n      makeClientCrop(crop);\r\n    };\r\n  \r\n    const onCropChange = (crop: ReactCrop.Crop) => {\r\n        //@ts-ignore\r\n        setCrop( crop );\r\n      };\r\n    \r\n    const makeClientCrop = async (crop: ReactCrop.Crop) => {\r\n        if (imageRef && crop.width && crop.height) {\r\n          const croppedObject = await getCroppedImg(\r\n            imageRef,\r\n            crop,\r\n            'newFile.jpeg'\r\n          )\r\n          \r\n          //@ts-ignore\r\n          setCroppedObject( croppedObject );\r\n        }\r\n      }\r\n\r\n    const updatePhotoCrop = () => {\r\n        croppedObject && croppedObject.croppedImageFile && updatePhoto(croppedObject.croppedImageFile)\r\n        setIsLoadImg(false)\r\n        refreshInputArea()\r\n    }\r\n\r\n    const refreshInputArea = () => {\r\n      setSrc(null)\r\n      setCroppedObject(null)\r\n      setIsLoadImg(true)\r\n    }\r\n\r\n    return <div>\r\n    <div id=\"overlay\" className = {isBigMode ? \"overlay\" : ''} onClick={() => setBigMode(false)}></div>\r\n    <div className = {isBigMode  ? s.BigModeArea : ''} id = {s.BigModeArea}>\r\n        <div>\r\n            <h3> : </h3>\r\n            <img src={avatarPhoto ? avatarPhoto : photoUser} alt=\"PHOTO\" />\r\n        </div>\r\n        <div className = {s.rightContent} >\r\n            <span style = {{display: \"flex\", alignItems: \"center\", height: \"60px\", borderBottom: \"1px solid #ccc\"}}>\r\n                <img src={avatarPhoto ? avatarPhoto : photoUser} alt=\"PHOTO\" className = {s.postImg} />\r\n                <span className={s.user}>{fullName}</span>\r\n            </span>\r\n            <span className = {s.closeBig} onClick={() => setBigMode(false)}></span>\r\n            {isOwner \r\n                && <div>\r\n                    <span> : </span>\r\n                    <DropzoneAva setIsLoadImg = {setIsLoadImg} setSrc = {setSrc} />\r\n                </div> \r\n            }\r\n            { \r\n                src && isLoadImg && <div>\r\n                    <ReactCrop\r\n                    //@ts-ignore\r\n                        src={src}\r\n                        crop={crop}\r\n                        ruleOfThirds\r\n                        onImageLoaded={onImageLoaded}\r\n                        onComplete={onCropComplete}\r\n                        onChange={onCropChange}\r\n                />\r\n                {   croppedObject && croppedObject.croppedImageUrl && \r\n                    //@ts-ignore\r\n                    <img alt=\"Crop\" style={{ maxWidth: '100%' }} src={croppedObject.croppedImageUrl} />\r\n                }\r\n                <button onClick = {() => updatePhotoCrop()}> Send </button>\r\n                </div>\r\n            }\r\n        </div>\r\n    </div>\r\n    </div>\r\n}\r\n\r\nexport default AvatarPhoto\r\n\r\ntype PropsType = {\r\n    avatar: string | null\r\n    fullName: string\r\n    isOwner: boolean\r\n\r\n    updatePhoto: (file: File) => void\r\n}\r\n\r\ntype BigModeType = {\r\n    isBigMode: boolean\r\n    avatarPhoto: string | null | undefined\r\n    fullName: string\r\n    isOwner: boolean\r\n\r\n    setBigMode: (n: boolean) => void\r\n    updatePhoto: (file: File) => void\r\n}\r\n\r\ntype CroppedImgType = {\r\n    croppedImageFile: null | File\r\n    croppedImageUrl: string\r\n}\r\n","import React from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faAddressBook } from '@fortawesome/free-solid-svg-icons'\r\nimport { faStickyNote } from '@fortawesome/free-solid-svg-icons'\r\nimport { faBriefcase } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCheck } from '@fortawesome/free-solid-svg-icons'\r\nimport { ProfileType } from '../../../Types/Types'\r\nimport  s from './ProfileInfo.module.css'\r\n\r\nconst ProfileData: React.FC<ProfileDataType> = ({profile, ...props}) => {\r\n\r\n    return <div style={{position: 'relative'}} className={s.profileData}>\r\n        {props.isOwner && <button onClick = {props.onEditMode} className = {s.editBtn + ' ' + s.btn}/>}\r\n        <div style={{display:'flex'}}>\r\n            <span className={s.infoKey}> \r\n                <FontAwesomeIcon icon={faStickyNote} /> \r\n                About me: \r\n            </span>\r\n            <span className={s.infoValue}>{profile.aboutMe}</span></div>\r\n        <div style={{display:'flex'}}> \r\n            <span className={s.infoKey}> \r\n                <FontAwesomeIcon icon={faCheck} /> \r\n                Looking for a job: \r\n            </span>\r\n            <span className={s.infoValue}>{profile.lookingForAJob ? 'yes' : 'no'}</span>\r\n        </div>\r\n        {profile.lookingForAJob \r\n            && <div style={{display:'flex'}}>\r\n                <span className={s.infoKey}>\r\n                    <FontAwesomeIcon icon={faBriefcase} /> \r\n                    My work skills:\r\n                </span>\r\n                <span className={s.infoValue}>\r\n                {profile.lookingForAJob && profile.lookingForAJobDescription}</span>\r\n            </div>}\r\n        <div>\r\n            <span className={s.infoKey}> <FontAwesomeIcon icon={faAddressBook} /> Contacts </span>: \r\n            {\r\n            profile.contacts && Object\r\n                .keys(profile.contacts)\r\n                .map(key => {\r\n                    //@ts-ignore\r\n                    return profile.contacts[key as keyof ContactsType] \r\n                        && <Contact key={key} \r\n                                    className={s.infoValue} \r\n                                    contactTitle={key} \r\n                                    //@ts-ignore\r\n                                    contactValue={profile.contacts[key as keyof ContactsType]} />\r\n            })\r\n            }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nconst Contact: React.FC<ContactType> = ({contactTitle, contactValue}) => {\r\n    return <div className={s.contact}><span className={s.infoKey}>{contactTitle}:</span> <a href={contactValue}>{contactValue}</a></div>\r\n}\r\n\r\nexport default ProfileData\r\n\r\n\r\ntype ProfileDataType = {\r\n    profile: ProfileType\r\n    isOwner: boolean\r\n\r\n    onEditMode: () => void\r\n}\r\n\r\ntype ContactType = { \r\n    contactTitle: string\r\n    contactValue: string\r\n    className: string\r\n}","import React, { useState } from 'react';\r\nimport  s from './ProfileInfo.module.css'\r\nimport Preloader from '../../common/Preloader/Preloader';\r\nimport ProfileStatusWithHooks from \"./ProfileStatusWithHooks\";\r\nimport {ProfileDataFormRedux} from \"./ProfileDataForm\"\r\nimport {SaveProfileType} from '../../../Types/Types';\r\nimport 'react-image-crop/dist/ReactCrop.css';\r\nimport AvatarPhoto from './AvatarPhoto';\r\nimport ProfileData from './ProfileData';\r\nimport photoUser from '../../../img/user.svg'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../../redux/store-redux';\r\nimport { saveProfile, updatePhoto } from './../../../redux/profile_reducer';\r\nimport { follow, unfollow } from '../../../redux/users_reducer';\r\n\r\nconst ProfileInfo:React.FC<PropsType> = (props) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const [editMode, setEditMode] = useState(false)\r\n    const isFetching = useSelector((state: AppStateType) => state.profilePage.isFetching)\r\n    const profile = useSelector((state: AppStateType) => state.profilePage.profile)\r\n    const friends = useSelector((state: AppStateType) => state.usersPage.friends)\r\n    const toggleProgressArr = useSelector((state: AppStateType) => state.usersPage.toggleProgressArr)\r\n\r\n    const onSubmit = (data: SaveProfileType) => {\r\n        dispatch(saveProfile(data))\r\n        setEditMode(false)\r\n    }\r\n        if (!profile || isFetching){\r\n            return <Preloader />\r\n        }\r\n\r\n    const switch_follow = (followed: boolean, userId: number) => {\r\n        if (followed) {\r\n            dispatch(unfollow(userId))\r\n        } else {\r\n            dispatch(follow(userId))\r\n        }\r\n    }\r\n\r\n        return (<div>\r\n            <div className={s.descriptionBlock}>\r\n                <div style={{display:'flex'}}>\r\n                    {\r\n                        props.isOwner \r\n                            ? <AvatarPhoto \r\n                                avatar = {profile.photos.large} \r\n                                fullName = {profile.fullName} \r\n                                isOwner = {props.isOwner}\r\n                                updatePhoto = {updatePhoto}/>\r\n                                //@ts-ignore\r\n                            : <img src = {profile.photos.large ? profile.photos.large : photoUser} className = {s.avaImg} alt=\"PHOTO\"/>\r\n                    }\r\n                    <div style={{marginLeft:\"20px\"}}>\r\n                        <p><b>{profile.fullName || 'unknown user '}</b></p>\r\n                        <ProfileStatusWithHooks />\r\n                    </div>\r\n                </div>\r\n                {\r\n                editMode \r\n                //@ts-ignore\r\n                    ? <ProfileDataFormRedux initialValues = {profile} profile = {profile} onSubmit = {onSubmit}/>\r\n                    : <ProfileData profile = {profile} onEditMode = {() => setEditMode(true)} isOwner={props.isOwner}/>\r\n                }\r\n                {\r\n                    !props.isOwner\r\n                        && friends.some(item => { return profile && item.id === profile.userId})\r\n                        ? <button className={s.btnFollow + ' ' + (s.btnRed)} onClick={() => switch_follow(true, profile && profile.userId)}\r\n                                    disabled={toggleProgressArr.some(id => profile && id === profile.userId)} key = {profile.userId}> Unfollow\r\n                                </button>\r\n                        : !props.isOwner && <button className={s.btnFollow + ' ' + (s.btnBlue)} onClick={() => switch_follow(false, profile && profile.userId)}\r\n                                    disabled={toggleProgressArr.some(id => profile && id === profile.userId)} key = {profile.userId}> Follow\r\n                                </button>\r\n                }\r\n            </div>\r\n        </div>);\r\n}\r\n\r\nexport default ProfileInfo;\r\n\r\n\r\ntype PropsType = {\r\n    isOwner: boolean\r\n}","import React, { useReducer } from 'react'\r\nimport sNews from '../../../News/newsItem/NewsItem.module.css'\r\nimport commentUserPhoto from '../../../../img/user22.jpg'\r\nimport {PostItemType} from \"../../../../redux/profile_reducer\";\r\nimport { AppStateType } from '../../../../redux/store-redux';\r\nimport { useSelector } from 'react-redux';\r\nimport Preloader from '../../../common/Preloader/Preloader';\r\n\r\ntype PropsType = {\r\n    post: PostItemType\r\n    avatarPhoto: string | null | undefined\r\n}\r\nconst CommentsArea: React.FC<PropsType> = (props) => {\r\n\r\n    return <div className={sNews.commentsArea}>\r\n    { props.post.comments.map(item => (\r\n        <div className={sNews.commentsItem} key={item.userId}>\r\n            {\r\n            item.photo \r\n                ? <img src={item.photo} alt=\"Photo\" className={sNews.commentPhoto}/>\r\n                : <img src={ props.avatarPhoto ?  props.avatarPhoto : commentUserPhoto} alt=\"Photo\" className={sNews.commentPhoto}/>\r\n            }\r\n            <div>\r\n                <span>{item.fullName}</span>\r\n                <p style={{paddingLeft: '15px', margin: 0}}>{item.text}</p>\r\n            </div>\r\n        </div>\r\n    ))}\r\n</div>\r\n}\r\n\r\nexport default CommentsArea","import React from 'react'\r\nimport sNews from '../../../News/newsItem/NewsItem.module.css'\r\nimport commentPhoto from '../../../../img/comment2.svg'\r\nimport likesPhoto from '../../../../img/heart.svg'\r\nimport likesPhotoActive from '../../../../img/heart_active.svg'\r\nimport {PostItemType} from \"../../../../redux/profile_reducer\";\r\n\r\ntype PropsType = {\r\n    onAddLike: (id: number) => void\r\n    id: number\r\n    post: PostItemType\r\n}\r\nconst ReviewArea: React.FC<PropsType> = ({onAddLike, id, ...props}) => {\r\n\r\n    return <div className={sNews.reviewCount}> \r\n    <span>\r\n        {\r\n        props.post.liked \r\n        ? <img src={likesPhotoActive} alt=\"PHOTO\" className={sNews.reviewIcon} onClick={() => onAddLike(id)}/>\r\n        : <img src={likesPhoto} alt=\"PHOTO\" className={sNews.reviewIcon} onClick={() => onAddLike(id)}/>\r\n    } {props.post.likesCount !== 0 && props.post.likesCount} \r\n    </span>\r\n     <span> \r\n        <img src={commentPhoto} alt=\"PHOTO\" className={sNews.reviewIcon}/>{props.post.CommentsCount !== 0 && props.post.CommentsCount} \r\n     </span> \r\n</div>\r\n}\r\n\r\nexport default ReviewArea","import React from 'react';\r\nimport s from './Post.module.css';\r\nimport sNews from '../../../News/newsItem/NewsItem.module.css'\r\nimport userPhoto from '../../../../img/user.svg'\r\nimport {Element} from '../../../common/FormControl/FormControl';\r\nimport { reduxForm, Field, InjectedFormProps } from 'redux-form';\r\nimport CommentsArea from './CommentsArea';\r\nimport ReviewArea from './ReviewArea';\r\nimport {ProfileInitialStateType, PostItemType} from '../../../../redux/profile_reducer';\r\nimport { ProfileType } from '../../../../Types/Types';\r\nimport { useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../../../redux/store-redux';\r\n\r\nlet id = 5;\r\n\r\ntype PropsType = {\r\n    state: ProfileInitialStateType\r\n    profile: ProfileType | null\r\n    post: PostItemType\r\n    avatarPhoto: string | null | undefined\r\n\r\n    reset: (form: string) => void\r\n    addComment: (id: number, text: string) => void\r\n    updateCommentCount: (id: number) => void\r\n    updateLikeCount: (id: number) => void\r\n}\r\n\r\nconst Post: React.FC<PropsType> = (props) => {\r\n\r\n  let onAddComment = (data: any) => {\r\n      props.addComment(props.post.id, data['comment' + props.post.id]);\r\n      props.updateCommentCount(props.post.id)\r\n      props.reset('commentFormMyPost')\r\n  }\r\n\r\n  let onAddLike = (id: number) => {\r\n      props.updateLikeCount(id)\r\n  }\r\n\r\n  return (\r\n      <div className={sNews.newsItem}>\r\n          <span style = {{display: \"flex\", alignItems: \"center\"}}>\r\n              <span>\r\n                  {\r\n                  props.state.photos && props.state.photos.large\r\n                      ? <img src={props.state.photos.large} alt=\"PHOTO1\" className={sNews.userImg}/>\r\n                      : <img src={userPhoto} alt=\"PHOTO2\" className={sNews.userImg}/>\r\n                  }\r\n              </span>\r\n              <span className={sNews.user}>{props.profile && props.profile.fullName || ' '}</span>\r\n          </span>\r\n          <span className={sNews.newsTitle}> {props.post.title} </span>\r\n          <div>\r\n            { props.post.photo && <img src={props.post.photo} alt=\"Photo\"/> }\r\n          </div>\r\n          <ReviewArea onAddLike = {onAddLike} id={props.post.id} post={props.post}/>\r\n          <CommentFormRedux onSubmit={onAddComment} id={props.post.id}/>\r\n          <CommentsArea post = {props.post} avatarPhoto = {props.avatarPhoto}/>\r\n      </div>\r\n  );\r\n}\r\n\r\ntype PostFormPropsType = {\r\n    id: number\r\n}\r\n\r\ntype PostFormValuesType = {\r\n    id: number\r\n}\r\n\r\nconst Input = Element('input');\r\n    \r\nconst CommentForm: React.FC<InjectedFormProps<PostFormValuesType, PostFormPropsType> & PostFormPropsType> = (props) => {\r\n    return <form className={sNews.inputComment} onSubmit={props.handleSubmit}>\r\n        <Field placeholder='Write your comment' name = {'comment' + props.id} component = {Input}/>\r\n        <button type = 'submit' className='btn'>Send</button>\r\n    </form>\r\n}\r\n\r\nconst CommentFormRedux = reduxForm<PostFormValuesType, PostFormPropsType>({form: 'commentFormMyPost'})(CommentForm)\r\n\r\n\r\nexport default Post;","import React from 'react';\r\nimport s from './MyPosts.module.css';\r\nimport Post from './Post/Post';\r\nimport {Field, reduxForm, InjectedFormProps} from \"redux-form\";\r\nimport {maxLengthCreater, required} from \"../../utils/Validators/validators\";\r\nimport {Element} from \"../../common/FormControl/FormControl\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport { ProfileInitialStateType } from '../../../redux/profile_reducer';\r\n\r\nconst MyPosts: React.FC<PropsType> = (props) => {\r\n\r\n    let onAddPost = (message: {newMyPostText: string}) => {\r\n        props.addPost(message.newMyPostText);\r\n        props.reset('myPostForm');\r\n    }\r\n\r\n    if (!props.state.profile){\r\n        return <Preloader />\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className={s.addPostArea}>\r\n                <h3>My posts</h3>\r\n                <MyPostFormRedux onSubmit={onAddPost}/>\r\n            </div>\r\n            <div className={s.posts}>\r\n                {[...props.state.postsData].reverse().map(post =>\r\n                    <Post \r\n                        post = {post} \r\n                        key={post.id}\r\n                        profile = {props.state.profile}\r\n                        addComment={props.addNewComment} \r\n                        updateLikeCount={props.updateLikeCount}\r\n                        updateCommentCount={props.updateCommentCount}\r\n                        avatarPhoto={props.avatarPhoto}\r\n                        reset={props.reset}\r\n                        state={props.state}/>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nlet maxLength255 = maxLengthCreater(255);\r\nconst Textarea = Element(\"textarea\");\r\n\r\nclass myPostForm extends React.Component<InjectedFormProps<MyPostFormValuesType> >{\r\n    render() {\r\n        return (\r\n            <form className={s.sendText} onSubmit={this.props.handleSubmit}>\r\n                <Field placeholder='Enter message...' name='newMyPostText' validate={[required, maxLength255]}\r\n                       component={Textarea}/>\r\n                <button className=\"btn\">Add post</button>\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nconst MyPostFormRedux = reduxForm<MyPostFormValuesType>({form: 'myPostForm'})(myPostForm)\r\n\r\nexport default MyPosts;\r\n\r\n\r\ntype PropsType = {\r\n    state: ProfileInitialStateType\r\n    avatarPhoto: string | null | undefined\r\n\r\n    addPost: (text: string) => void\r\n    reset: (form: string) => void\r\n    addNewComment: (id: number, text: string) => void\r\n    updateCommentCount: (id: number) => void\r\n    updateLikeCount: (id: number) => void\r\n}\r\n\r\n\r\ntype MyPostFormValuesType = {\r\n    newMyPostText: string\r\n}","import React from 'react';\r\nimport {actions} from \"../../../redux/profile_reducer\";\r\nimport MyPosts from \"./MyPosts\";\r\nimport {connect} from \"react-redux\";\r\nimport {reset} from 'redux-form';\r\nimport { AppStateType } from '../../../redux/store-redux';\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n\r\n    return {\r\n        state: state.profilePage,\r\n        avatarPhoto: state.profilePage.profile && state.profilePage.profile.photos.large\r\n    }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, { \r\n    addPost: actions.addPost, \r\n    reset, \r\n    addNewComment: actions.addNewComment, \r\n    updateCommentCount: actions.updateCommentCount, \r\n    updateLikeCount: actions.updateLikeCount})(MyPosts)\r\n\r\nexport default MyPostsContainer","import React from 'react';\r\nimport s from './Profile.module.css';\r\nimport ProfileInfo from \"./ProfileInfo/ProfilInfo\";\r\nimport MyPostsContainer from \"./MyPosts/MyPostsContainer\";\r\n\r\nconst Profile: React.FC<PropsType> = (props) => {\r\n\r\n  return (\r\n    <div className={s.content}>\r\n        <ProfileInfo isOwner={props.isOwner} />\r\n      <MyPostsContainer />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile;\r\n\r\n\r\ntype PropsType = {\r\n  isOwner: boolean\r\n}","import React, { useEffect } from 'react';\r\nimport Profile from \"./Profile\";\r\nimport { useDispatch, useSelector} from \"react-redux\";\r\nimport {check_auth, getStatus} from \"../../redux/profile_reducer\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport {compose} from \"redux\";\r\nimport {withAuthRedirect} from \"../HOC/withAuthRedirect\"\r\nimport { AppStateType } from '../../redux/store-redux';\r\n\r\nconst ProfileContainer:React.FC = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const params = useParams()\r\n    const authId = useSelector((state: AppStateType) => state.auth.id)\r\n\r\n    const refreshProfile = () => {\r\n        //@ts-ignore\r\n        let userId = params.userId;\r\n        if (!userId) userId = authId as number\r\n        dispatch(check_auth(userId))\r\n        dispatch(getStatus(userId))\r\n    }\r\n\r\n    useEffect(() => {\r\n        refreshProfile();\r\n        // @ts-ignore\r\n    }, [params.userId])\r\n\r\n        return (\r\n            // @ts-ignore\r\n            <Profile isOwner={!params.userId} />\r\n        )\r\n}\r\n\r\nexport default compose<React.ComponentType>(\r\n    withAuthRedirect\r\n)(ProfileContainer)","import React from 'react'\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/store-redux\";\r\nimport {actions} from \"../../redux/music_reducer\";\r\nimport { faListUl, faMusic } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport './Music.css'\r\n\r\nconst Playlist = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const songs = useSelector((state: AppStateType) => state.music.songs)\r\n    const currentSong = useSelector((state: AppStateType) => state.music.currentSong)\r\n\r\n    const SetCurrent = (id: number) => {\r\n        dispatch(actions.SetCurrent(id))\r\n    }\r\n\r\n    return (\r\n        <div className=\"playlist\">\r\n            <div className=\"header\">\r\n            <FontAwesomeIcon icon={faListUl} />\r\n                <span className=\"pltext\">Play List</span>\r\n            </div>\r\n            <div className=\"songlist\">\r\n                <ul className=\"loi\">\r\n                    {\r\n                        songs.map((song, i) =>\r\n                            <li className={'songContainer ' + (currentSong === i ? 'selected' : '')} key={i}\r\n                                onClick={() => {\r\n                                    SetCurrent(i);\r\n                                }}>\r\n                                <div className = 'musicIcon'>\r\n                                    <FontAwesomeIcon icon = {faMusic} />\r\n                                </div>\r\n                                <span className=\"song\">{song[0]}</span>\r\n                            </li>\r\n                        )\r\n                    }\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Playlist","import React, {ChangeEvent, useEffect, useRef, useState} from 'react';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/store-redux\";\r\nimport {actions} from \"../../redux/music_reducer\";\r\nimport { faPause, faPlay, faRandom, faRedoAlt, faStepBackward, faStepForward, faVolumeDown } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport './Music.css'\r\n\r\nconst Controls = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const playing = useSelector((state: AppStateType) => state.music.playing)\r\n    const currentSong = useSelector((state: AppStateType) => state.music.currentSong)\r\n    const random = useSelector((state: AppStateType) => state.music.random)\r\n    const songs = useSelector((state: AppStateType) => state.music.songs)\r\n    const repeat = useSelector((state: AppStateType) => state.music.repeat)\r\n    const currentTimeState = useSelector((state: AppStateType) => state.music.currentTime)\r\n\r\n    const audio = useRef('audio_tag');\r\n\r\n    const [statevolum, setStateVolum] = useState(0.3)\r\n    const [dur, setDur] = useState(0)\r\n    const [currentTime, setCurrentTime] = useState(currentTimeState)\r\n\r\n    const fmtMSS = (s: number) => { return (s - (s %= 60)) / 60 + (9 < s ? ':' : ':0') + ~~(s) }\r\n\r\n    //@ts-ignore\r\n    const toggleAudio = () => audio.current.paused ? audio.current.play() : audio.current.pause();\r\n\r\n    const handleVolume = (q: number ) => {\r\n        setStateVolum(q);\r\n        //@ts-ignore\r\n        audio.current.volume = q;\r\n    }\r\n\r\n    const handleProgress = (e: ChangeEvent<HTMLInputElement>) => {\r\n        //@ts-ignore\r\n        let compute = (e.target.value * dur) / 100;\r\n        setCurrentTime(compute);\r\n        //@ts-ignore\r\n        audio.current.currentTime = compute\r\n    }\r\n    // Prev song\r\n    const prevSong = () => {\r\n        if (currentSong === 0) {\r\n            SetCurrent(songs.length - 1)\r\n        } else {\r\n            SetCurrent(currentSong - 1)\r\n        }\r\n    }\r\n    // Next song\r\n    const nextSong = () => {\r\n        if (currentSong === songs.length - 1) {\r\n            SetCurrent(0)\r\n        } else {\r\n            SetCurrent(currentSong + 1)\r\n        }\r\n    }\r\n    const handleEnd = () => {\r\n        // Check for random and repeat options\r\n        if (random) {\r\n            return dispatch({ type: 'SET_CURRENT_SONG', data: ~~(Math.random() * songs.length) })\r\n        } else {\r\n            if (repeat) {\r\n                nextSong()\r\n            } else if ((currentSong === songs.length - 1)) {\r\n                return\r\n            } else {\r\n                nextSong();\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleUpdateTime = (e: any) => {\r\n        setCurrentTime(e.target.currentTime)\r\n        dispatch(actions.updateCurrentTime(currentTime))\r\n    }\r\n\r\n    const SetCurrent = (id: number) => {\r\n        dispatch(actions.SetCurrent(id))\r\n    }\r\n\r\n    const togglePlaying = () => {\r\n        dispatch(actions.togglePlaying())\r\n    }\r\n\r\n    const toggleRandom = () => {\r\n        dispatch(actions.toggleRandom())\r\n    }\r\n\r\n    const toggleRepeat = () => {\r\n        dispatch(actions.toggleRepeat())\r\n    }\r\n\r\n    useEffect(() => {\r\n        //@ts-ignore\r\n        audio.current.volume = statevolum;\r\n        if (playing) { toggleAudio() }\r\n        //@ts-ignore\r\n        audio.current.currentTime = currentTime\r\n    }, [currentSong])\r\n\r\n    useEffect(() => {\r\n        setCurrentTime(currentTimeState)\r\n        //@ts-ignore\r\n        audio.current.currentTime = currentTime\r\n    }, [currentTimeState])\r\n\r\n    return (\r\n        <div className=\"controls\">\r\n            <audio\r\n                //@ts-ignore\r\n                onTimeUpdate={(e) => handleUpdateTime(e)}\r\n                //@ts-ignore\r\n                onCanPlay={(e) => setDur(e.target.duration)}\r\n                onEnded={handleEnd}\r\n                //@ts-ignore\r\n                ref={audio}\r\n                type=\"audio/mpeg\"\r\n                preload='true'\r\n                src={songs[currentSong][1]} \r\n                id=\"audioMusic\"/>\r\n            <div className=\"vlme\">\r\n                <span className=\"volum\"><FontAwesomeIcon icon={faVolumeDown} /></span>\r\n                <input value={Math.round(statevolum * 100)} type=\"range\" name=\"volBar\" id=\"volBar\" onChange={\r\n                    (e) => {\r\n                        //@ts-ignore\r\n                        return handleVolume(e.target.value / 100)\r\n                        }} />\r\n\r\n            </div>\r\n            <div className=\"musicControls\">\r\n                <span className=\"prev\" onClick={prevSong}><FontAwesomeIcon icon={faStepBackward} /></span>\r\n                <span className=\"play\" onClick={() => { togglePlaying(); toggleAudio(); }}>\r\n                    <span className={!playing ? '' : 'hide'}><FontAwesomeIcon icon={faPlay} /></span>\r\n                    <span className={!playing ? 'hide' : ''}><FontAwesomeIcon icon={faPause} /></span>\r\n                </span>\r\n\r\n                <span className=\"next\" onClick={nextSong}><FontAwesomeIcon icon={faStepForward} /></span>\r\n            </div>\r\n            <div className=\"progressb\">\r\n                <span className=\"currentT\">{fmtMSS(currentTime)}</span>\r\n                <input\r\n                    onChange={handleProgress}\r\n                    value={dur ? (currentTime * 100) / dur : 0}\r\n                    type=\"range\" name=\"progresBar\" id=\"prgbar\" />\r\n                <span className=\"totalT\">{fmtMSS(dur)}</span>\r\n\r\n            </div>\r\n            <div className=\"plsoptions\">\r\n\r\n        <span onClick={toggleRandom} className={\"random \" + (random ? 'active' : '')}>\r\n        <FontAwesomeIcon icon={faRandom} />\r\n        </span>\r\n                <span onClick={toggleRepeat} className={\"repeat \" + (repeat ? 'active' : '')}>\r\n                <FontAwesomeIcon icon={faRedoAlt} />\r\n        </span>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Controls;","import React from 'react';\r\nimport Playlist from \"./Playlist\";\r\nimport Controls from \"./Controls\";\r\nimport './Music.css'\r\n\r\nconst Music = () => {\r\n    return (<>\r\n        <Controls />\r\n        <div className = \"pageArea\" style = {{marginTop: \"5px\"}}>\r\n        <div className=\"main\">\r\n            <div className=\"top\">\r\n                <Playlist />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </>);\r\n}\r\n\r\nexport default Music;","import React from 'react';\r\n\r\nconst Settings = () => {\r\n    return (<div>\r\n        Settings\r\n    </div>);\r\n}\r\n\r\nexport default Settings;","import React, { useState } from 'react';\r\nimport s from './NewsItem.module.css'\r\nimport commentPhoto from '../../../img/comment2.svg'\r\nimport likesPhoto from '../../../img/heart.svg'\r\nimport commentUserPhoto from '../../../img/user22.jpg'\r\nimport likesPhotoActive from '../../../img/heart_active.svg'\r\nimport userPhoto from '../../../img/user(1).svg'\r\nimport {Element} from '../../common/FormControl/FormControl';\r\nimport { reduxForm, Field, InjectedFormProps, reset } from 'redux-form';\r\nimport {NewsItemType} from '../../../redux/news_reducer'\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../../redux/store-redux';\r\nimport { actions } from '../../../redux/news_reducer';\r\n\r\nconst NewsItem: React.FC<PropsType> = ({post}) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const avatarPhoto = useSelector((state: AppStateType) => state.profilePage.photos && state.profilePage.photos.large)\r\n    const [isBigMode, setBigMode] = useState(false)\r\n\r\n    let onAddComment = (data: any) => {\r\n        if(data['comment' + post.id]){\r\n            dispatch(actions.addNewComment(post.id, data['comment' + post.id]))\r\n            dispatch(actions.updateCommentCount(post.id))\r\n            dispatch(reset('commentForm'))\r\n        }\r\n    }\r\n\r\n    let onAddLike = (id: number) => {\r\n        dispatch(actions.updateLikeCount(id))\r\n    }\r\n\r\n    if(isBigMode) {\r\n        document.body.classList.add('pop_overflow')\r\n    } else {\r\n        document.body.classList.remove('pop_overflow')\r\n    }\r\n\r\n    return (\r\n        <div className={s.newsItem}>\r\n            <div className = {s.newsItemContent} onClick = {() => setBigMode(true)}>\r\n                <span style = {{display: \"flex\", alignItems: \"center\"}}>\r\n                    <span>\r\n                        {\r\n                        post.avatar \r\n                            ? <img src={post.avatar} alt=\"PHOTO\" className={s.userImg}/>\r\n                            : <img src={userPhoto} alt=\"PHOTO\" className={s.userImg}/>\r\n                        }\r\n                    </span>\r\n                    <span className={s.user}>{post.fullName}</span>\r\n                </span>\r\n                <span className={s.newsTitle}> {post.title} </span>\r\n                <div>\r\n                    <img src={post.photo} alt=\"Photo\"/>\r\n                </div>\r\n            </div>\r\n            <div className={s.reviewCount}> \r\n                <span>\r\n                {\r\n                    post.liked \r\n                    ? <img src={likesPhotoActive} alt=\"PHOTO\" className={s.reviewIcon} onClick={() => onAddLike(post.id)}/>\r\n                    : <img src={likesPhoto} alt=\"PHOTO\" className={s.reviewIcon} onClick={() => onAddLike(post.id)}/>\r\n                } {post.likesCount} \r\n                </span>\r\n                 <span> \r\n                    <img src={commentPhoto} alt=\"PHOTO\" className={s.reviewIcon}/>{post.CommentsCount} \r\n                 </span> \r\n            </div>\r\n            <CommentFormRedux onSubmit={onAddComment} id = {post.id}/>\r\n            <NewsCommentsArea post = {post} avatarPhoto = {avatarPhoto}/>\r\n            {\r\n                isBigMode && <NewsItemBigMode post = {post} avatarPhoto = {avatarPhoto} onAddLike = {onAddLike} isBigMode = {isBigMode} setBigMode = {setBigMode} onAddComment = {onAddComment} />\r\n            }\r\n        </div>\r\n    );\r\n}\r\n\r\nconst NewsItemBigMode: React.FC<BigModeType> = ({post, onAddLike, isBigMode, setBigMode, onAddComment, avatarPhoto}) => {\r\n\r\n    return <>\r\n    <div id=\"overlay\" className = {isBigMode ? \"overlay\" : ''} onClick={() => setBigMode(false)}></div>\r\n    <div className = {isBigMode  ? s.BigModeArea : ''} id = {s.BigModeArea}>\r\n        <div style = {{ display: \"flex\", alignItems: \"center\"}} >\r\n            <img src={post.photo} alt=\"PHOTO\" className = {s.postImg}/>\r\n        </div>\r\n        <div className = {s.rightContent} >\r\n            <span style = {{display: \"flex\", alignItems: \"center\", height: \"60px\", borderBottom: \"1px solid #ccc\"}}>\r\n                <span>\r\n                    {\r\n                    post.avatar \r\n                        ? <img src={post.avatar} alt=\"PHOTO\" className={s.userImg}/>\r\n                        : <img src={userPhoto} alt=\"PHOTO\" className={s.userImg}/>\r\n                    }\r\n                </span>\r\n                <span className={s.user}>{post.fullName}</span>\r\n            </span>\r\n            <div className={s.reviewCount} style = {{border: 0}}> \r\n                <span>\r\n                    {\r\n                    post.liked \r\n                        ? <img src={likesPhotoActive} alt=\"PHOTO\" className={s.reviewIcon} onClick={() => onAddLike(post.id)}/>\r\n                        : <img src={likesPhoto} alt=\"PHOTO\" className={s.reviewIcon} onClick={() => onAddLike(post.id)}/>\r\n                    } {post.likesCount} \r\n                </span>\r\n            </div>\r\n            <CommentFormRedux onSubmit={ onAddComment } id = {post.id}/>\r\n            <NewsCommentsArea post = {post} avatarPhoto = {avatarPhoto}/>\r\n        </div>\r\n    </div>\r\n    <span className = {s.closeBig} onClick={() => setBigMode(false)}></span>\r\n    </>\r\n}\r\n\r\nconst NewsCommentsArea: React.FC<NewsCommentsAreaType> = ({post, avatarPhoto}) => {\r\n\r\n    return <div className={s.commentsArea}>\r\n    { post.comments.map(item => (\r\n        <div className={s.commentsItem} key={item.userId}>\r\n            {\r\n            item.photo \r\n                ? <img src={item.photo } alt=\"Photo\" className={s.commentPhoto}/>\r\n                : <img src={ avatarPhoto ? avatarPhoto : commentUserPhoto } alt=\"Photo\" className={s.commentPhoto}/>\r\n            }\r\n          <div>\r\n                <span>{item.fullName}</span>\r\n                <p style={{paddingLeft: '15px', margin: 0}}>{item.text}</p>\r\n            </div>\r\n        </div>\r\n    ))}\r\n</div>\r\n}\r\n\r\nconst Input = Element('input');\r\n\r\nconst CommentForm: React.FC<InjectedFormProps<CommentFormValuesType, CommentFormPropsType> & CommentFormPropsType> = (props) => {\r\n    return <form className={s.inputComment} onSubmit={props.handleSubmit}>\r\n        <Field placeholder='Write your comment' name={'comment'  + props.id as CommentFormValuesKeys} component = {Input}/>\r\n        <button type = 'submit' className='btn'>Send</button>\r\n    </form>\r\n}\r\n\r\nconst CommentFormRedux = reduxForm<CommentFormValuesType, CommentFormPropsType>({form: 'commentForm'})(CommentForm)\r\n\r\nexport default NewsItem;\r\n\r\n\r\n\r\ntype CommentFormValuesType = {\r\n    comment: string\r\n}\r\n\r\ntype CommentFormPropsType = {\r\n    id: number\r\n}\r\n\r\ntype NewsCommentsAreaType = {\r\n    post: NewsItemType\r\n    avatarPhoto: string | null | undefined\r\n}\r\n\r\ntype BigModeType = {\r\n    post: NewsItemType\r\n    isBigMode: boolean\r\n    avatarPhoto: string | null | undefined\r\n\r\n    onAddComment: (data: {comment: string}) => void\r\n    setBigMode: (n: boolean) => void\r\n    onAddLike: (id: number) => void\r\n}\r\n\r\ntype PropsType = {\r\n    post: NewsItemType\r\n}\r\n\r\ntype CommentFormValuesKeys = Extract<keyof CommentFormValuesType, string>","import React, { useState } from 'react';\r\nimport {StoriesType} from '../../../redux/news_reducer'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { AppStateType } from '../../../redux/store-redux';\r\nimport defaultUserPhoto from '../../../img/user(1).svg'\r\nimport nextPhoto from '../../../img/next.svg'\r\nimport backPhoto from '../../../img/back.svg'\r\nimport { actions } from './../../../redux/news_reducer';\r\nimport style from './Stories.module.css'\r\n\r\nconst StoriesItem: React.FC<PropsType> = React.memo(({story, index, arr}) => {\r\n\r\n    const userPhoto = useSelector((state: AppStateType) => state.profilePage.photos && state.profilePage.photos.large)\r\n    const dispatch = useDispatch()\r\n    const [isBigMode, setBigMode] = useState(false)\r\n    const [isStoryViewed, setStoryViewed] = useState(story.viewed)\r\n    const [storyPhoto, setStoryPhoto] = useState(story.photo)\r\n    const [storyIndex, setStoryIndex] = useState(index)\r\n\r\n    const imgStyles = {width: \"110px\", height: \"185px\", borderRadius: \"5px\", cursor: \"pointer\"}\r\n    const imgStyle = {width: \"43px\", borderRadius: \"50%\", border: story.viewed ? \"4px solid #ccc\" : \"4px solid #4a76a8\", cursor: \"pointer\"}\r\n\r\n    const onStoryClick = () => {\r\n        document.body.classList.add('pop_overflow')\r\n        setBigMode(true)\r\n        setStoryViewed(true)\r\n        dispatch(actions.viewStory(story.id))\r\n    }\r\n\r\n    let storyTime = setInterval(() => {}, 7000);\r\n\r\n    const changeStoryPhoto = (direction: boolean) => {\r\n        clearInterval(storyTime)\r\n        if(direction && storyIndex < arr.length - 1){\r\n            setStoryPhoto(arr[storyIndex + 1].photo)\r\n            dispatch(actions.viewStory(arr[storyIndex + 1].id))\r\n            setStoryIndex(storyIndex + 1)\r\n        } else if(!direction && storyIndex - 1 >= 0) {\r\n            setStoryPhoto(arr[storyIndex - 1].photo)\r\n            dispatch(actions.viewStory(arr[storyIndex - 1].id))\r\n            setStoryIndex(storyIndex - 1)\r\n        } else {\r\n            setBigMode(false)\r\n            setStoryIndex(0)\r\n        }\r\n    }\r\n\r\n    if(isBigMode) {\r\n        document.body.classList.add(\"pop_overflow\")\r\n        storyTime = setInterval(() => {\r\n            if(arr.length === 1 || storyIndex + 1 === arr.length) {\r\n                setBigMode(false)\r\n            } else {\r\n                changeStoryPhoto(true)\r\n            }\r\n        }, 7000)\r\n    } else {\r\n        document.body.classList.remove(\"pop_overflow\")\r\n        storyPhoto !== story.photo && setStoryPhoto(story.photo)\r\n        clearInterval(storyTime)\r\n    } \r\n\r\n    return <div style={{marginLeft: \"15px\", position: \"relative\"}}>\r\n        <img src={story.photo} alt=\"Photo\" style={imgStyles} onClick={onStoryClick} />\r\n        <div style={{position: \"absolute\", top: \"110px\", left: \"30px\"}}>\r\n            <img onClick={onStoryClick} src={userPhoto ? userPhoto : defaultUserPhoto} style = {imgStyle} alt=\"Photo\"/>\r\n        </div>\r\n        {\r\n            isBigMode && <StoryBigMode isBigMode = {isBigMode} \r\n                                        setBigMode = {setBigMode} \r\n                                        storyPhoto = {storyPhoto} \r\n                                        changeStoryPhoto = {changeStoryPhoto}\r\n                                        storyId = {storyIndex} \r\n                                        key={storyIndex} />\r\n        }\r\n    </div>\r\n})\r\n\r\nconst StoryBigMode: React.FC<BigModeType> = React.memo(({isBigMode, setBigMode, storyPhoto, changeStoryPhoto, storyId}) => {\r\n\r\n    return <div>\r\n    <div id=\"overlay\" className = {isBigMode  ? \"overlay\" : ''} onClick={() => setBigMode(false)}></div>\r\n    <div id=\"magnify\" className={isBigMode ? \"magnify\" : ''}>\r\n        <img src={ storyPhoto } alt=\"Photo\" className={style.centerStory} />\r\n        <img src={backPhoto} onClick={() => changeStoryPhoto(false)} alt=\"Back\" style={{width: \"35px\", position: \"fixed\", top: \"50px\", left: \"570px\", zIndex: 10000, cursor: \"pointer\"}} />\r\n        <img src={nextPhoto} onClick={() => changeStoryPhoto(true)} alt=\"Next\" style={{width: \"35px\", position: \"fixed\", top: \"50px\", right: \"560px\", zIndex: 10000, cursor: \"pointer\"}} />\r\n        <span className=\"popupLayer\" id = {'' + storyId}/>\r\n        <div id=\"close-popup\" onClick={() => {setBigMode(false); document.body.classList.remove('pop_overflow')}}><i></i></div>\r\n    </div>\r\n</div>\r\n})\r\n\r\nexport default StoriesItem\r\n\r\n\r\ntype PropsType = {\r\n    story: StoriesType\r\n    index: number\r\n    arr: Array<StoriesType>\r\n    key: number\r\n}\r\n\r\ntype BigModeType = {\r\n    isBigMode: boolean\r\n    storyPhoto: string\r\n    storyId: number\r\n    setBigMode: (isMode: boolean) => void\r\n    changeStoryPhoto: (direction: boolean) => void\r\n}","import React from 'react';\r\nimport StoriesItem from './StoriesItem';\r\nimport { useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../../redux/store-redux';\r\n\r\nconst Stories = () => {\r\n    \r\n    const stories = useSelector((state: AppStateType) => state.newsPage.stories)\r\n\r\n    return <div className = \"pageArea\" style ={{display: \"flex\", padding: \"10px 15px\"}}>\r\n        {\r\n            stories.map((item, index, arr) => {\r\n                return <StoriesItem story = {item} index = {index} arr = {arr} key={item.id}/>\r\n            })\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default Stories\r\n","import React from 'react';\r\nimport NewsItem from \"./newsItem/NewsItem\";\r\nimport s from './News.module.css'\r\nimport Stories from './Stories/Stories';\r\nimport { useSelector } from 'react-redux';\r\nimport { AppStateType } from '../../redux/store-redux';\r\n\r\nconst News: React.FC = () => {\r\n\r\n    const newsState = useSelector((state: AppStateType) => state.newsPage)\r\n    \r\n    return (\r\n        <div className={s.newsWrap}>\r\n            <Stories />\r\n            <div className={s.postArea}>\r\n                {newsState.news.map(post => (\r\n                    <NewsItem post={post}\r\n                             key={post.id}/>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default News;","import React from 'react';\r\nimport News from \"./News\";\r\nimport {withAuthRedirect} from \"../HOC/withAuthRedirect\";\r\nimport {compose} from \"redux\";\r\n\r\nexport default compose<React.ComponentType>(\r\n    withAuthRedirect\r\n)(News)\r\n\r\n","import React from 'react'\r\nimport {Field, reduxForm, InjectedFormProps} from \"redux-form\";\r\nimport {connect} from \"react-redux\";\r\nimport {checkLoginMe} from \"../../redux/header_reducer\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {required} from \"../utils/Validators/validators\";\r\nimport {Element} from \"../common/FormControl/FormControl\";\r\nimport style from \"../common/FormControl/FormControl.module.css\"\r\nimport s from \"./Login.module.css\"\r\nimport { AppStateType } from '../../redux/store-redux';\r\n\r\n\r\ntype MapStatePropsType = {\r\n    isAuth: boolean\r\n    captcha: string | null\r\n}\r\n\r\ntype MapDispatchPropsType = {\r\n    checkLoginMe: (email: string | null, password: string | null, rememberMe: boolean, captcha: string | null) => Promise<void>\r\n}\r\n\r\ntype LoginPropsType = MapDispatchPropsType & MapStatePropsType\r\n\r\nexport type LoginFormValuesType = {\r\n    captcha: string | null\r\n    rememberMe: boolean\r\n    password: string | null\r\n    email: string | null\r\n}\r\n\r\ntype LoginFormValuesTypeKeys = Extract<keyof LoginFormValuesType, string>\r\n\r\n\r\n\r\nconst Login: React.FC<LoginPropsType> = (props) => {\r\n\r\n    const onSubmit = (inputData: LoginFormValuesType) => {\r\n        props.checkLoginMe(inputData.email, inputData.password, inputData.rememberMe, inputData.captcha);\r\n    }\r\n\r\n    if (props.isAuth) {\r\n        return <Redirect to={\"/profile\"} />\r\n    }\r\n\r\n    return (\r\n        <div className='pageArea'>\r\n            <h1>Login</h1>\r\n            <ReduxForm onSubmit={onSubmit} captcha = {props.captcha}/>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\nconst Input = Element(\"input\");\r\n\r\ntype LoginFormPropsType = {\r\n    captcha: string | null\r\n}\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<LoginFormValuesType, LoginFormPropsType> & LoginFormPropsType > = (props) => {\r\n\r\n    return (\r\n        <form onSubmit={props.handleSubmit} className={s.form}>\r\n            <div>\r\n                <label htmlFor=\"email\">Email</label>\r\n                <Field name={'email'}  placeholder='Email..' component={Input} validate={[required]} id='email'/>\r\n            </div>\r\n            <div>\r\n                <label htmlFor=\"pass\">Password</label>\r\n                <Field name={'password'} placeholder='Password..' component={Input} id='pass' validate={[required]} type='password'/>\r\n            </div>\r\n            <div style={{display: 'flex'}}>\r\n                <label htmlFor=\"remember\">Remember me</label>\r\n                <Field name={'rememberMe'} type={'checkbox'} component={Input} id='remember'/>\r\n            </div>\r\n\r\n            {props.captcha && <img src={props.captcha} alt=\"Captcha\"/>}\r\n            {props.captcha && <Field name={'captcha'} component={Input} id='captcha'/>}\r\n\r\n            <div>\r\n                <button className='btn'>Login</button>\r\n            </div>\r\n            {props.error && <div className={style.commonError}>{props.error}</div>}\r\n        </form>\r\n    )\r\n}\r\n\r\nconst ReduxForm = reduxForm<LoginFormValuesType, LoginFormPropsType>({\r\n    form: 'login'\r\n})(LoginForm)\r\n\r\nlet mapStateToProps = (state: AppStateType) => ({\r\n    isAuth: state.auth.isAuth,\r\n    captcha: state.auth.captcha\r\n})\r\n\r\nexport default connect(mapStateToProps, {checkLoginMe})(Login)","import React from \"react\";\r\nimport Preloader from \"../common/Preloader/Preloader\";\r\n\r\n\r\nexport const withSuspens = (Component: React.ComponentType) => {\r\n\r\n    return (props: any) => {\r\n\r\n        return <React.Suspense fallback={<Preloader />}><Component {...props}/></React.Suspense>\r\n    }\r\n}","import React from 'react';\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/store-redux\";\r\nimport {\r\n    sendMessage,\r\n    startMessagesListening,\r\n    startStatusListening,\r\n    stopMessagesListening, stopStatusListening\r\n} from \"../../redux/chat_reducer\";\r\nimport {ChatApi} from \"../../api/chat-api\";\r\n\r\nexport type MessageApiType = {\r\n    message: string\r\n    userId: number\r\n    userName: string\r\n    photo: string\r\n}\r\n\r\nexport const Chat = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const status = useSelector((state: AppStateType) => state.chat.status)\r\n\r\n    React.useEffect(() => {\r\n        ChatApi.start()\r\n        dispatch(startMessagesListening())\r\n        dispatch(startStatusListening())\r\n\r\n        return () => {\r\n            dispatch(stopMessagesListening())\r\n            dispatch(stopStatusListening())\r\n        }\r\n    }, [])\r\n\r\n    return <>\r\n        {status === \"error\" && <div>Some error! Please, refresh the page</div>}\r\n        <Messages/>\r\n        <AddMessageForm/>\r\n    </>\r\n}\r\n\r\nexport const Messages: React.FC = () => {\r\n    const messageWrapper = React.useRef<HTMLDivElement | null>(null)\r\n    const messagesBottom = React.useRef<HTMLDivElement | null>(null)\r\n    const messages = useSelector((state: AppStateType) => state.chat.messages)\r\n    const [isAutoScroll, setIsAutoScroll] = React.useState(false)\r\n\r\n    const onScroll = (e: React.UIEvent<HTMLDivElement, UIEvent>) => {\r\n        let element = e.currentTarget;\r\n        if (Math.abs((element.scrollHeight - element.scrollTop) - element.clientHeight) < 200) {\r\n            setIsAutoScroll(true)\r\n        } else {\r\n            setIsAutoScroll(false)\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        isAutoScroll && messagesBottom.current && messagesBottom.current.scrollIntoView()\r\n    }, [messages])\r\n\r\n    return <div ref={messageWrapper} onScroll={onScroll} style={{maxHeight: \"500px\", overflowY: \"scroll\"}}>\r\n        {\r\n            messages && messages.length > 0\r\n                ? messages.map((item,) => {\r\n                    return <Message key={item.id} message={item}/>\r\n                })\r\n                : \"  \"\r\n        }\r\n        <div ref={messagesBottom}/>\r\n    </div>\r\n};\r\n\r\ntype MessagePropsType = {\r\n    message: MessageApiType\r\n}\r\n\r\nexport const Message: React.FC<MessagePropsType> = ({message}) => {\r\n    return <>\r\n        <div style={{display: \"flex\"}}>\r\n            <img src={message.photo}\r\n                 alt=\"avaUser\"\r\n                 style={{marginLeft: \"10px\", borderRadius: \"50%\", width: \"50px\"}}/>\r\n            <span style={{marginLeft: \"10px\"}}>{message.userName}</span>\r\n            <span style={{marginLeft: \"10px\"}}>{message.message}</span>\r\n        </div>\r\n        <hr/>\r\n    </>\r\n};\r\n\r\nexport const AddMessageForm: React.FC = () => {\r\n    const [message, setMessage] = React.useState(\"\")\r\n\r\n    const status = useSelector((state: AppStateType) => state.chat.status)\r\n    const dispatch = useDispatch()\r\n\r\n    const sendMessageHandler = () => {\r\n        if (!message) return;\r\n        dispatch(sendMessage(message))\r\n        setMessage(\"\")\r\n    }\r\n\r\n    return <>\r\n            <textarea name=\"message\" value={message}\r\n                      onChange={(e) => setMessage(e.currentTarget.value)}\r\n                      id=\"addMessage\" cols={30} rows={10}/>\r\n        <button disabled={status !== 'ready'} onClick={() => sendMessageHandler()}>Send</button>\r\n    </>\r\n};","import React from 'react';\r\nimport {Chat} from \"./Chat\";\r\n\r\nexport const ChatPage:React.FC = () => {\r\n    return <>\r\n            <Chat />\r\n        </>\r\n};\r\n","import ProfileContainer from \"./components/Profile/ProfileContainer\";\r\nimport Music from \"./components/Music/Music\";\r\nimport Settings from \"./components/Settings/Settings\";\r\nimport NewsContainer from \"./components/News/NewsContainer\";\r\nimport Login from \"./components/Login/Login\";\r\nimport React from \"react\";\r\nimport {withSuspens} from \"./components/HOC/withSuspens\";\r\nimport {ChatPage} from \"./components/Chat/ChatPage\";\r\n\r\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst WithSuspensDialogs = withSuspens(DialogsContainer)\r\nconst WithSuspensUsers = withSuspens(UsersContainer)\r\n\r\nexport const componentsData = [\r\n    {\r\n        path: '/',\r\n        exact: true,\r\n        Component: <NewsContainer/>\r\n    },\r\n    {\r\n        path: '/chat',\r\n        exact: true,\r\n        Component: <ChatPage/>\r\n    },\r\n    {\r\n        path: '/profile/:userId?',\r\n        exact: false,\r\n        Component: <ProfileContainer/>\r\n    },\r\n    {\r\n        path: '/dialogs/:userId?',\r\n        exact: false,\r\n        Component: <WithSuspensDialogs/>\r\n    },\r\n    {\r\n        path: '/music',\r\n        exact: false,\r\n        Component: <Music/>\r\n    },\r\n    {\r\n        path: '/news',\r\n        exact: false,\r\n        Component: <NewsContainer/>\r\n    },\r\n    {\r\n        path: '/users',\r\n        exact: true,\r\n        Component: <WithSuspensUsers/>\r\n    },\r\n    {\r\n        path: '/settings',\r\n        exact: true,\r\n        Component: <Settings/>\r\n    },\r\n    {\r\n        path: '/login',\r\n        exact: true,\r\n        Component: <Login/>\r\n    },\r\n    {\r\n        path: '*',\r\n        exact: false,\r\n        Component: <div>404 - Not found</div>\r\n    }\r\n]\r\n\r\n\r\n//     <Route path='/profile/:userId?' render={() => <ProfileContainer />}/>\r\n// <Route path='/dialogs/:userId?' render={() => <WithSusmensDialogs />}/>\r\n// <Route path='/music' render={() => <Music/>}/>\r\n// <Route path='/settings' render={() => <Settings/>}/>\r\n// <Route path='/news' render={() => <NewsContainer />}/>\r\n// <Route exact path='/' render={() => <NewsContainer />}/>\r\n// <Route path='/users' render={ () => <WithSusmensUsers />}/>\r\n// <Route path='/login' render={() => <Login/>}/>\r\n// <Route path='*' render={() => <div>404 - Not found</div>}/>","import React, {useEffect} from 'react';\r\nimport './App.css';\r\nimport {HashRouter, Route, Switch} from \"react-router-dom\";\r\nimport Navbar from './components/Navbar/Navbar';\r\nimport Footer from \"./Footer\";\r\nimport HeaderContainer from \"./components/Header/HeaderContainer\";\r\nimport {Provider, useDispatch, useSelector} from \"react-redux\";\r\nimport Preloader from \"./components/common/Preloader/Preloader\";\r\nimport {init} from \"./redux/app_reducer\";\r\nimport store, {AppStateType} from \"./redux/store-redux\";\r\nimport {componentsData} from \"./componentsDataArr\";\r\n\r\nconst App: React.FC = () => {\r\n\r\n    const dispatch = useDispatch()\r\n    const initialized = useSelector((state: AppStateType) => state.app.initialized)\r\n\r\n    useEffect(() => {\r\n        dispatch(init())\r\n    }, [])\r\n\r\n    if (!initialized) {\r\n        return <Preloader/>\r\n    }\r\n\r\n    // @ts-ignore\r\n    return (\r\n        <div className=\"wrapper\">\r\n            <div className='app-wrapper'>\r\n                <HeaderContainer/>\r\n                <Navbar/>\r\n                <div className=\"app-wrapper-content\">\r\n                    <Switch>\r\n                        {\r\n                            componentsData.map((item, i) => {\r\n                                return <Route key = {i} path={item.path} exact={item.exact} render={() => item.Component}/>\r\n\r\n                            })\r\n                        }\r\n                    </Switch>\r\n                </div>\r\n            </div>\r\n            <Footer/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst MyWayApp = () => {\r\n    return <HashRouter>\r\n        <Provider store={store}>\r\n            <App/>\r\n        </Provider>\r\n    </HashRouter>\r\n}\r\n\r\nexport default MyWayApp\r\n\r\n//process.env.PUBLIC_URL\r\n","import * as serviceWorker from './serviceWorker';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport MyWayApp from './App';\r\nimport \"antd/dist/antd.css\";\r\n\r\nReactDOM.render(<MyWayApp />, document.getElementById('root'));\r\n\r\nserviceWorker.unregister();\r\n","module.exports = __webpack_public_path__ + \"static/media/user.47be60ba.svg\";","module.exports = __webpack_public_path__ + \"static/media/user(1).7de5e5f7.svg\";","import React from 'react'\r\nimport style from './Preloader.module.css'\r\n\r\nconst Preloader = () => {\r\n    return <div className={style.ldsDualRing}></div>\r\n}\r\n\r\nexport default Preloader","import {UsersAPI} from \"../api/api\";\r\nimport { InferActionsTypes, ThunkType } from \"./store-redux\";\r\n\r\nlet initialState = {\r\n    usersData: [] as Array<UsersDataItemType>,\r\n    pageSize: 100,\r\n    currentPage: 1,\r\n    pageCount: 0,\r\n    isFetching: true,\r\n    toggleProgressArr: [] as Array<number>,\r\n    friends: [] as Array<UsersDataItemType>,\r\n    filter: {\r\n        term: '',\r\n        friends: null as null | boolean\r\n    }\r\n}\r\n\r\ntype InitialStateType = typeof initialState\r\nexport type FilterType = typeof initialState.filter\r\n\r\nlet users_reducer = (state = initialState, action: ActionsType) : InitialStateType => {\r\n\r\n    switch (action.type) {\r\n\r\n        case 'SN/Users/SWITCH_FOLLOW': {\r\n\r\n                return {\r\n                    ...state,\r\n                    usersData: state.usersData.map( u => {\r\n                        if(u.id === action.userId){\r\n                            return {...u, followed: !u.followed}\r\n                        }\r\n                        return u\r\n                    })\r\n                }\r\n        }\r\n        case 'SN/Users/SET_USERS': {\r\n            return { ...state, usersData: [...action.users]}\r\n        }\r\n        case 'SN/Users/SET_CURRENT_PAGE': {\r\n            return { ...state, currentPage: action.currentPage}\r\n        }\r\n        case 'SN/Users/SET_TOTAL_PAGE_COUNT': {\r\n            return { ...state, pageCount: action.count}\r\n        }\r\n        case 'SN/Users/TOGGLE_FETCHING': {\r\n            return { ...state, isFetching: action.isFetching}\r\n        }\r\n        case 'SN/Users/TOGGLE_PROGRESS': {\r\n            let userId = action.id\r\n            return {\r\n                ...state,\r\n                toggleProgressArr: action.isFetching\r\n                    ? [...state.toggleProgressArr, userId]\r\n                    : [...state.toggleProgressArr.filter(id => id !== userId)] \r\n            } \r\n        }\r\n        case 'SN/Users/GET_FRIENDS': {\r\n\r\n            return {\r\n                ...state,\r\n                friends: [...action.friends] as Array<UsersDataItemType>\r\n            }\r\n        }\r\n        case 'SN/Users/GET_FILTER': {\r\n            return {\r\n                ...state,\r\n                filter: {term: action.filter.term, friends: action.filter.friends}\r\n            }\r\n        }\r\n        default: {\r\n            return state\r\n        }\r\n    }\r\n}\r\n\r\ntype ActionsType = InferActionsTypes<typeof actions>\r\n\r\nexport const actions = {\r\n    switch_follow: (userId: number) => ({type: 'SN/Users/SWITCH_FOLLOW', userId} as const),\r\n    setUsers: (users: Array<UsersDataItemType>) => ({type: 'SN/Users/SET_USERS', users} as const),\r\n    setCurrentPage: (currentPage: number) => ({type: 'SN/Users/SET_CURRENT_PAGE', currentPage} as const),\r\n    setPageCount: (count: number) => ({type: 'SN/Users/SET_TOTAL_PAGE_COUNT', count} as const),\r\n    toggleIsFetching: (isFetching: boolean) => ({type: 'SN/Users/TOGGLE_FETCHING', isFetching} as const),\r\n    toggleProgress: (isFetching: boolean, id: number) => ({type: 'SN/Users/TOGGLE_PROGRESS', isFetching, id} as const),\r\n    getFriends: (friends: Array<UsersDataItemType>) => ({type: 'SN/Users/GET_FRIENDS', friends} as const),\r\n    getFilter: (filter: FilterType) => ({type: 'SN/Users/GET_FILTER', filter} as const)\r\n}\r\n\r\n\r\n\r\ntype getThunkType = ThunkType<ActionsType >\r\n\r\nexport const getUsers = (currentPage: number, pageSize: number, filter: FilterType): getThunkType => async (dispatch)  => {\r\n\r\n    dispatch(actions.setCurrentPage(currentPage))\r\n    dispatch(actions.toggleIsFetching(true))\r\n    dispatch(actions.getFilter(filter))\r\n    const data = await UsersAPI.getUsers(currentPage, pageSize, filter.term, filter.friends)\r\n    dispatch(actions.toggleIsFetching(false))\r\n    dispatch(actions.setUsers(data.items))\r\n    dispatch(actions.setPageCount(data.totalCount))\r\n}\r\n\r\nexport const getFriends = (): getThunkType => async (dispatch)  => {\r\n\r\n    dispatch(actions.toggleIsFetching(true))\r\n    const data = await UsersAPI.getFriends()\r\n    dispatch(actions.toggleIsFetching(false))\r\n    dispatch(actions.getFriends(data.items))\r\n}\r\n\r\nexport const follow = (userId: number): getThunkType => async (dispatch) => {\r\n    dispatch(actions.toggleProgress(true, userId))\r\n    const data = await UsersAPI.follow(userId)\r\n        dispatch(actions.switch_follow(userId))\r\n        dispatch(actions.toggleProgress(false, userId))\r\n        dispatch(getFriends())\r\n}\r\n\r\nexport const unfollow = (userId: number): getThunkType => async (dispatch) => {\r\n    dispatch(actions.toggleProgress(true, userId))\r\n    const data = await UsersAPI.unfollow(userId)\r\n        dispatch(actions.switch_follow(userId))\r\n        dispatch(actions.toggleProgress(false, userId))\r\n        dispatch(getFriends())\r\n}\r\n\r\nexport default users_reducer\r\n\r\n\r\ntype UsersDataItemType = {\r\n    name: string | null,\r\n    id: number,\r\n    photos: {\r\n        small: string | null,\r\n        large: string | null\r\n    },\r\n    status: string | null,\r\n    followed: boolean\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__38H_L\",\"item\":\"Navbar_item__1o5Mi\",\"active\":\"Navbar_active__3WUce\",\"itemLink\":\"Navbar_itemLink__1jl79\",\"linkWrap\":\"Navbar_linkWrap__3pUpL\",\"linkName\":\"Navbar_linkName__2KkCq\",\"itemSettings\":\"Navbar_itemSettings__3Q9jd\",\"navbarItemImg\":\"Navbar_navbarItemImg__-6Je8\",\"music\":\"Navbar_music__14dvC\",\"settings\":\"Navbar_settings__aAuoQ\",\"profile\":\"Navbar_profile__3Iud4\",\"message\":\"Navbar_message__kO4_Y\",\"news\":\"Navbar_news__1Vmwk\",\"users\":\"Navbar_users__2XIUB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__3j6Mb\",\"accountInfo\":\"Header_accountInfo__3sZxQ\",\"accountDrop\":\"Header_accountDrop__3Ndw5\",\"userImg\":\"Header_userImg__1L8ZS\",\"login\":\"Header_login__1qApJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputArea\":\"FormControl_inputArea__2zbgv\",\"error\":\"FormControl_error__AgXpc\",\"commonError\":\"FormControl_commonError__nrQlp\"};","export const required = (value: string) => {\r\n    if (value) return undefined\r\n\r\n    return \"Field must be not empty!\"\r\n}\r\n\r\nexport const maxLengthCreater = (maxLength: number) => (value: string) => {\r\n    if (value.length > maxLength)\r\n        return `Fields max length is ${maxLength}!`\r\n    return undefined\r\n}\r\n","module.exports = __webpack_public_path__ + \"static/media/heart.21b08fee.svg\";","module.exports = __webpack_public_path__ + \"static/media/heart_active.72246e10.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"FriendsBar\":\"FreindsBar_FriendsBar__2-7qg\",\"FriendsBarContent\":\"FreindsBar_FriendsBarContent__3B25l\",\"item\":\"FreindsBar_item__3ddza\"};","import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport { useSelector} from \"react-redux\";\r\nimport { AppStateType } from \"../../redux/store-redux\";\r\n\r\n\r\nexport const withAuthRedirect = (Component: React.ComponentType) => {\r\n\r\n    const RedirectComponent = (props: any) => {\r\n        const isAuth = useSelector((state: AppStateType) => state.auth.isAuth)\r\n\r\n        if (!isAuth) {\r\n            return <Redirect to='/login'/>\r\n        }\r\n\r\n        return <Component {...props}/>\r\n    }\r\n\r\n    return RedirectComponent\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"newsItem\":\"NewsItem_newsItem__3oBaT\",\"user\":\"NewsItem_user__243Ud\",\"newsTitle\":\"NewsItem_newsTitle__3mn5I\",\"reviewCount\":\"NewsItem_reviewCount__1II4o\",\"commentsArea\":\"NewsItem_commentsArea__11K9a\",\"commentsItem\":\"NewsItem_commentsItem__2Se2x\",\"inputComment\":\"NewsItem_inputComment__3koUd\",\"reviewIcon\":\"NewsItem_reviewIcon__38uJ3\",\"userImg\":\"NewsItem_userImg__2rCdw\",\"commentPhoto\":\"NewsItem_commentPhoto__1Fg3R\",\"newsItemContent\":\"NewsItem_newsItemContent__2HpPs\",\"postImg\":\"NewsItem_postImg__2rHwC\",\"BigModeArea\":\"NewsItem_BigModeArea__3R6el\",\"rightContent\":\"NewsItem_rightContent__10CKD\",\"closeBig\":\"NewsItem_closeBig__CBiLS\"};","module.exports = __webpack_public_path__ + \"static/media/user22.ee08bb2d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/comment2.a93a5733.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sendText\":\"MyPosts_sendText__ddk57\",\"btn\":\"MyPosts_btn__1zJ1u\",\"myPostWrap\":\"MyPosts_myPostWrap__38es8\",\"addPostArea\":\"MyPosts_addPostArea__3WQQm\",\"posts\":\"MyPosts_posts__2uC8G\"};"],"sourceRoot":""}